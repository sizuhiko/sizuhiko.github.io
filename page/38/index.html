<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>sizuhiko - Technote</title>
    <link rel="shortcut icon" href="/imgages/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/stylesheets/main.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/shareon@2/dist/shareon.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/shareon@2/dist/shareon.iife.js" defer init></script>    
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />

    <!--[if lte IE 8]>
      <link rel="stylesheet" href="/stylesheets/browsers/ie.css" type="text/css">
      <script src="/javascripts/browsers/ie8.js"></script>
      <script defer src="/javascripts/browsers/ie-css3.js"></script>
    <![endif]-->
    <!--[if IE 6]>
      <link rel="stylesheet" href="/styleseets/browsers/ie6.css" type="text/css">
    <![endif]-->
    <!--[if IE 7]>
      <link rel="stylesheet" href="/styleseets/browsers/ie7.css" type="text/css">
    <![endif]-->
    <!--[if IE 8]>
      <link rel="stylesheet" href="/stylesheets/browsers/ie8.css" type="text/css">
    <![endif]-->
    <style type="text/css">
      @media all and (max-width:680px) {
        #blogtools a, #blogtools a:link, #blogtools a:visited { position:relative; top:0; margin:0 0 5px 10px; float:left; background:#f1f1f1; color:#111; border:1px solid #888; }
        #postcontent, #posttitle { width:100%; }
        #qppreview { display:none; }
        #qpsubmit { width:auto !important; float:none; line-height:1.4; height:auto; margin:7px 0; }
        #postform b { display:block; }
        #sharing { float:none; padding-top:3px; }
        }
    </style>
    <style type="text/css">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .cm {
  color: #999988;
  font-style: italic;
}
.highlight .cp {
  color: #999999;
  font-weight: bold;
}
.highlight .c1 {
  color: #999988;
  font-style: italic;
}
.highlight .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #999988;
  font-style: italic;
}
.highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}
.highlight .gd {
  color: #000000;
  background-color: #ffdddd;
}
.highlight .ge {
  color: #000000;
  font-style: italic;
}
.highlight .gr {
  color: #aa0000;
}
.highlight .gh {
  color: #999999;
}
.highlight .gi {
  color: #000000;
  background-color: #ddffdd;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .gt {
  color: #aa0000;
}
.highlight .kc {
  color: #000000;
  font-weight: bold;
}
.highlight .kd {
  color: #000000;
  font-weight: bold;
}
.highlight .kn {
  color: #000000;
  font-weight: bold;
}
.highlight .kp {
  color: #000000;
  font-weight: bold;
}
.highlight .kr {
  color: #000000;
  font-weight: bold;
}
.highlight .kt {
  color: #445588;
  font-weight: bold;
}
.highlight .k, .highlight .kv {
  color: #000000;
  font-weight: bold;
}
.highlight .mf {
  color: #009999;
}
.highlight .mh {
  color: #009999;
}
.highlight .il {
  color: #009999;
}
.highlight .mi {
  color: #009999;
}
.highlight .mo {
  color: #009999;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #009999;
}
.highlight .sa {
  color: #000000;
  font-weight: bold;
}
.highlight .sb {
  color: #d14;
}
.highlight .sc {
  color: #d14;
}
.highlight .sd {
  color: #d14;
}
.highlight .s2 {
  color: #d14;
}
.highlight .se {
  color: #d14;
}
.highlight .sh {
  color: #d14;
}
.highlight .si {
  color: #d14;
}
.highlight .sx {
  color: #d14;
}
.highlight .sr {
  color: #009926;
}
.highlight .s1 {
  color: #d14;
}
.highlight .ss {
  color: #990073;
}
.highlight .s, .highlight .dl {
  color: #d14;
}
.highlight .na {
  color: #008080;
}
.highlight .bp {
  color: #999999;
}
.highlight .nb {
  color: #0086B3;
}
.highlight .nc {
  color: #445588;
  font-weight: bold;
}
.highlight .no {
  color: #008080;
}
.highlight .nd {
  color: #3c5d5d;
  font-weight: bold;
}
.highlight .ni {
  color: #800080;
}
.highlight .ne {
  color: #990000;
  font-weight: bold;
}
.highlight .nf, .highlight .fm {
  color: #990000;
  font-weight: bold;
}
.highlight .nl {
  color: #990000;
  font-weight: bold;
}
.highlight .nn {
  color: #555555;
}
.highlight .nt {
  color: #000080;
}
.highlight .vc {
  color: #008080;
}
.highlight .vg {
  color: #008080;
}
.highlight .vi {
  color: #008080;
}
.highlight .nv, .highlight .vm {
  color: #008080;
}
.highlight .ow {
  color: #000000;
  font-weight: bold;
}
.highlight .o {
  color: #000000;
  font-weight: bold;
}
.highlight .w {
  color: #bbbbbb;
}
.highlight {
  background-color: #f8f8f8;
}
    </style>
  </head>
  <body id="myopera" data-twttr-rendered="true">
    <!--[if IE 6]><div class="ie6"><![endif]-->
    <!--[if IE 7]><div class="ie7"><![endif]-->
    <!--[if IE 8]><div class="ie8"><![endif]-->
    <!--[if IE 9]><div class="ie9"><![endif]-->
    <div id="wrap0"><div id="wrap1"><div id="wrap2"><div id="wrap3"><div id="wrap4">

    <header id="top" class="top-blog">
      <div id="top2">
        <h1><a href="/" title="home"><span>Technote</span></a></h1>
        <p id="subtitle"><span>by sizuhiko</span></p>
      </div>
    </header>

    <main id="content" class="blogfront">
      <div id="mainwrap">
        <div id="main">

          <article>
  <h1 class="title"><a href="/2011/02/13/php-bdd-behat.html">PHPのBDDフレームワーク Behat について発表してきました</a></h1>
  <p class="postdate"><a href="/2011/02/13.html" title="Permanent link">Sunday, February 13, 2011 11:02:18 AM</a></p>
  <p class="tags">
      <a href="/tags/bdd.html" rel="tag">BDD</a>
      <a href="/tags/behat.html" rel="tag">Behat</a>
      <a href="/tags/php.html" rel="tag">PHP</a>
  </p>
  <div class="content">
    <!-- use article.summary(250) if you have Nokogiri available to show just
       the first 250 characters -->
    <!-- more -->

<h3>第55回PHP勉強会＠関東で発表してきました</h3>

<p>2011/2/10にPHP勉強会が約半年ぶりに開催されました。以前、発表するぜーと公言していたので、今回は万全を期してと思いきや最近の多忙に負けそうになりました。が、前日（というか当日朝４時）までバタバタしながら準備してました。。。  </p>

<p>今回は昨年のPHP祭りで日本語ハックしたBehatの入門編です。あのときはLTという形であまり詳細に触れられなかったので、30分という時間ですが実際に１からやってみました。
ここでは実際に「やってみよう」で実践した手順について解説します。  </p>

<h3>はじめに</h3>

<p>スライドの「1. インストール」でも書いていますが、まずBehat本体をインストールしてください。私がforkした日本語対応版をcloneすると「3. 日本語環境」の部分をスキップできます。
「2. テスト環境」に関しては、今回behat_webstepsを流用しました。それ以外にもGoutte-for-Behat（<a href="https://github.com/ThePixelDeveloper/Goutte-for-Behat">https://github.com/ThePixelDeveloper/Goutte-for-Behat</a>）というものもあります。どちらもHTMLクライアントのエンジンとして「Goutte」を使っています。前者はgoutte.pharが含まれていますが、後者は含まれていないので別途Goutteをcloneする必要があります。ただ後者の方がstepsのコードは流用しやすいかもしれません。  </p>

<h3>準備しよう</h3>

<p>まず初期状態のディレクトリを以下のようにしました。</p>
<div class="highlight"><pre class="highlight plaintext"><code>|-- Behat Behat本体のclone
|-- behat_websteps behat_webstepsのclone
</code></pre></div>
<h3>練習環境を作る</h3>

<p>behat_webstepsを土台にして、テスト環境を作ります。といっても、まずは単にコピーするだけです。</p>
<div class="highlight"><pre class="highlight plaintext"><code>cp -R behat_websteps sandbox
</code></pre></div>
<h3>フィーチャーファイルを作成する</h3>

<p>スライドでも引用したgihyo.jpでのcucumberについてとてもわかりやすい連載「<a href="http://gihyo.jp/dev/serial/01/ruby/0022">第22回　Railsアプリの受け入れテストをCucumberで書こう</a>」のフィーチャーを使用します。  </p>
<div class="highlight"><pre class="highlight plaintext"><code>vi sandbox/features/sample.feature
</code></pre></div>
<p>実際のコードは以下のとおりです。</p>
<div class="highlight"><pre class="highlight plaintext"><code># language: ja
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録
    前提 "ユーザ登録"ページを表示している
    もし "email"に"example@example.com"と入力する
    かつ "name"に"赤松 祐希"と入力する
    かつ "age"に"22"と入力する
    かつ "Create"ボタンをクリックする
    ならば "User was successfully created."と表示されていること
    かつ "example@example.com"と表示されていること
    かつ "赤松 祐希"と表示されていること
    かつ "22"と表示されていること
</code></pre></div>
<p>ここでcucumberと違うのは1行目（フェーチャの前）に言語指定をするところです。現時点のBehatではこれを書く事でja.xmlを利用してくれます。</p>

<h3>実行してみる</h3>

<p>フィーチャーはbin/behatコマンドでテストします。</p>
<div class="highlight"><pre class="highlight plaintext"><code>bash-3.2$ Behat/bin/behat sandbox/features/sample.feature 
</code></pre></div>
<p>画面には、以下のように出力されます。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;code&gt;
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録                                     # features/sample.feature:4

&lt;span style="color: goldenrod"&gt;
    前提 "ユーザ登録"ページを表示している
    もし "email"に"example@example.com"と入力する
    かつ "name"に"赤松 祐希"と入力する
    かつ "age"に"22"と入力する
    かつ "Create"ボタンをクリックする
    ならば "User was successfully created."と表示されていること
    かつ "example@example.com"と表示されていること
    かつ "赤松 祐希"と表示されていること
    かつ "22"と表示されていること
&lt;/span&gt;
1 scenario (&lt;span style="color: goldenrod"&gt;1 undefined&lt;/span&gt;)
9 steps (&lt;span style="color: goldenrod"&gt;9 undefined&lt;/span&gt;)
0.123s
&lt;span style="color: goldenrod"&gt;
You can implement step definitions for undefined steps with these snippets:

$steps-&gt;前提('/^"([^"]*)"ページを表示している$/', function($world, $arg1) {
    throw new EverzetBehatExceptionPending();
});

$steps-&gt;もし('/^"([^"]*)"に"([^"]*)"と入力する$/', function($world, $arg1, $arg2) {
    throw new EverzetBehatExceptionPending();
});

$steps-&gt;かつ('/^"([^"]*)"ボタンをクリックする$/', function($world, $arg1) {
    throw new EverzetBehatExceptionPending();
});

$steps-&gt;ならば('/^"([^"]*)"と表示されていること$/', function($world, $arg1) {
    throw new EverzetBehatExceptionPending();
});
&lt;/span&gt;
&lt;/code&gt;
</code></pre></div>
<p>ステップ（テストの定義）が記述されていないので、9つの未定義エラーが表示されています。その下にはスケルトンが表示されているので、まずこれをコピペしてstepファイルを作成します。</p>

<h3>ステップファイルの作成</h3>

<p>stepファイル「web<em>test</em>step.php」に前節のスケルトンを貼付けます。以下のようになるでしょう。</p>
<div class="highlight"><pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">前提</span><span class="p">(</span><span class="s1">'/^"([^"]*)"ページを表示している$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">EverzetBehatExceptionPending</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">もし</span><span class="p">(</span><span class="s1">'/^"([^"]*)"に"([^"]*)"と入力する$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">EverzetBehatExceptionPending</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">かつ</span><span class="p">(</span><span class="s1">'/^"([^"]*)"ボタンをクリックする$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">EverzetBehatExceptionPending</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">ならば</span><span class="p">(</span><span class="s1">'/^"([^"]*)"と表示されていること$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">EverzetBehatExceptionPending</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<p>また実行してみましょう。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;code&gt;
bash-3.2$ Behat/bin/behat sandbox/features/sample.feature 
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録                                     # features/sample.feature:4

&lt;span style="color: goldenrod"&gt;
    前提 "ユーザ登録"ページを表示している                           # features/steps/web_test_step.php:5
      TODO: write pending definition
&lt;/span&gt;&lt;span style="color: skyblue"&gt;
    もし "email"に"example@example.com"と入力する          # features/steps/web_test_step.php:9
    ...（** 省略 **）
&lt;/span&gt;

1 scenario (&lt;span style="color: goldenrod"&gt;1 pending&lt;/span&gt;)
9 steps (&lt;span style="color: skyblue"&gt;8 skipped&lt;/span&gt;, &lt;span style="color: goldenrod"&gt;1 pending&lt;/span&gt;)
0.089s
&lt;/code&gt;
</code></pre></div>
<p>未定義（undefined）から、ペンディングに変わりましたね。これは貼付けたコードが現時点でPending例外を投げているためです。</p>

<h3>ステップを記述する</h3>

<p>ステップの中身はbehat_webstepsのcommon.phpを流用しました。</p>
<div class="highlight"><pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">前提</span><span class="p">(</span><span class="s1">'/^"([^"]*)"ページを表示している$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$page</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$page</span> <span class="o">=</span> <span class="nv">$world</span><span class="o">-&gt;</span><span class="nf">__getPath</span><span class="p">(</span><span class="nv">$page</span><span class="p">);</span>

  <span class="nv">$world</span><span class="o">-&gt;</span><span class="n">client</span><span class="o">-&gt;</span><span class="nf">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="nv">$page</span><span class="p">);</span>
  <span class="nv">$world</span><span class="o">-&gt;</span><span class="nf">__getClientProperties</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">もし</span><span class="p">(</span><span class="s1">'/^"([^"]*)"に"([^"]*)"と入力する$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$field</span><span class="p">,</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">assertNotNull</span><span class="p">(</span><span class="nv">$world</span><span class="o">-&gt;</span><span class="n">page</span><span class="p">,</span><span class="s2">"No webpage loaded"</span><span class="p">);</span>
  <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$world</span><span class="o">-&gt;</span><span class="nf">__getForm</span><span class="p">(</span><span class="s1">'Create'</span><span class="p">);</span>
  <span class="nv">$form</span><span class="p">[</span><span class="nv">$field</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">setValue</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">かつ</span><span class="p">(</span><span class="s1">'/^"([^"]*)"ボタンをクリックする$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$button</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">assertNotNull</span><span class="p">(</span><span class="nv">$world</span><span class="o">-&gt;</span><span class="n">page</span><span class="p">,</span><span class="s2">"No webpage loaded"</span><span class="p">);</span>
  <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$world</span><span class="o">-&gt;</span><span class="nf">__getForm</span><span class="p">(</span><span class="s1">'Create'</span><span class="p">);</span>
  <span class="nv">$world</span><span class="o">-&gt;</span><span class="n">client</span><span class="o">-&gt;</span><span class="nf">submit</span><span class="p">(</span><span class="nv">$form</span><span class="p">);</span>
  <span class="nv">$world</span><span class="o">-&gt;</span><span class="nf">__getClientProperties</span><span class="p">();</span>
<span class="p">});</span>

<span class="nv">$steps</span><span class="o">-&gt;</span><span class="nf">ならば</span><span class="p">(</span><span class="s1">'/^"([^"]*)"と表示されていること$/'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$world</span><span class="p">,</span> <span class="nv">$text</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">assertNotNull</span><span class="p">(</span><span class="nv">$world</span><span class="o">-&gt;</span><span class="n">page</span><span class="p">,</span><span class="s2">"No webpage loaded"</span><span class="p">);</span>
  <span class="nf">assertContains</span><span class="p">(</span><span class="nv">$text</span><span class="p">,</span><span class="nv">$world</span><span class="o">-&gt;</span><span class="n">output</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<p>実行してみましょう。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;code&gt;
bash-3.2$ Behat/bin/behat sandbox/features/sample.feature 
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録                                     # features/sample.feature:4

&lt;span style="color: firebrick"&gt;    前提 "ユーザ登録"ページを表示している                           # features/steps/web_test_step.php:8
      Unknown path 'ユーザ登録'. You can define it in [features_folder]/support/paths.php
      Failed asserting that an array has the key &lt;string:ユーザ登録&gt;.
&lt;/span&gt;&lt;span style="color: skyblue"&gt;    もし "email"に"example@example.com"と入力する          # features/steps/web_test_step.php:14
    ...（** 省略 **）
&lt;/span&gt;

1 scenario (&lt;span style="color: firebrick"&gt;1 failed&lt;/span&gt;)
9 steps (&lt;span style="color: skyblue"&gt;8 skipped&lt;/span&gt;), &lt;span style="color: firebrick"&gt;1 failed&lt;/span&gt;)
0.355s
&lt;/code&gt;
</code></pre></div>
<p>すると「ユーザ登録」なんてURLは見つからないというエラーになります。まぁそうですね。URLに関しては画面名と実際のhttpリクエストするURLを関連づけておく必要があります。これはgoutte以外のHTTPクライアントを使っても同じことです。ベースとしたbehat_webstepsではsupport/paths.phpにそのマッピングを書くようにしていますので、追加します。</p>
<div class="highlight"><pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$world</span><span class="o">-&gt;</span><span class="n">paths</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$world</span><span class="o">-&gt;</span><span class="n">paths</span><span class="p">[</span><span class="s1">'ユーザ登録'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"http://localhost/user_regist.php"</span><span class="p">;</span>
</code></pre></div>
<h3>テストを失敗させる</h3>

<p>ここまでで、初期段階の準備は完了です。ではまたテストを実行してみましょう。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;code&gt;
bash-3.2$ Behat/bin/behat sandbox/features/sample.feature 
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録                                     # features/sample.feature:4

    &lt;span style="color: green"&gt;前提 "ユーザ登録"ページを表示している                           # features/steps/web_test_step.php:8&lt;/span&gt;
    &lt;span style="color: firebrick"&gt;もし "email"に"example@example.com"と入力する          # features/steps/web_test_step.php:14
      The current node list is empty.&lt;/span&gt;
    &lt;span style="color: skyblue"&gt;...（** 省略 **）&lt;/span&gt;

1 scenario (&lt;span style="color: firebrick"&gt;1 failed&lt;/span&gt;)
9 steps (&lt;span style="color: green"&gt;1 passed&lt;/span&gt;, &lt;span style="color: skyblue"&gt;7 skipped&lt;/span&gt;, &lt;span style="color: firebrick"&gt;1 failed&lt;/span&gt;)
0.114s
&lt;/code&gt;
</code></pre></div>
<p>テストを実行してみると、最初に入力フォームに値をセットしようとするところで失敗します。まだユーザ登録画面を表示するプログラムはありません。  </p>

<p>それでは実際に動作するコードを書いてみましょう。  </p>

<h3>実装する</h3>

<p>ここではあくまでテストを通過させる簡単なコードを書いてみます。画面の入力フォームから入力された値を表示するuser_regist.phpを書いてみましょう。</p>
<div class="highlight"><pre class="highlight html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
      <span class="nt">&lt;title&gt;</span>ユーザ登録<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?
            if ($_POST["submit"]) {
                echo "User was successfully created.". "&lt;br /&gt;";
                echo "name = "     . $_POST['name']  . "&lt;br /&gt;";
                echo "e-mail = "   . $_POST['email'] . "&lt;br /&gt;";
                echo "age = "      . $_POST['age']   . "&lt;br /&gt;";
            }
        ?&gt;</span><span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"user_regist.php"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label&gt;</span>名前:<span class="nt">&lt;/label&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label&gt;</span>e-mail:<span class="nt">&lt;/label&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;label&gt;</span>年齢:<span class="nt">&lt;/label&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"age"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Create"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>※まぁなんとも安直なコードですが、ご勘弁を・・・</p>

<p>作成したファイルをドキュメントルートに設置してテストを実行しましょう。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;code&gt;
bash-3.2$ Behat/bin/behat sandbox/features/sample.feature 
フィーチャ: ユーザを管理したい

  シナリオ: ユーザの登録                                     # features/sample.feature:4

&lt;span style="color: green"&gt;    前提 "ユーザ登録"ページを表示している                           # features/steps/web_test_step.php:8
    もし "email"に"example@example.com"と入力する          # features/steps/web_test_step.php:14
    かつ "name"に"赤松 祐希"と入力する                         # features/steps/web_test_step.php:14
    かつ "age"に"22"と入力する                             # features/steps/web_test_step.php:14
    かつ "Create"ボタンをクリックする                          # features/steps/web_test_step.php:21
    ならば "User was successfully created."と表示されていること # features/steps/web_test_step.php:26
    かつ "example@example.com"と表示されていること             # features/steps/web_test_step.php:26
    かつ "赤松 祐希"と表示されていること                           # features/steps/web_test_step.php:26
    かつ "22"と表示されていること                              # features/steps/web_test_step.php:26
&lt;/span&gt;
1 scenario (&lt;span style="color: green"&gt;1 passed&lt;/span&gt;)
9 steps (&lt;span style="color: green"&gt;9 passed&lt;/span&gt;)
0.389s
&lt;/code&gt;
</code></pre></div>
<p>やったー、グリーンでテスト成功です。  </p>

<h3>さいごに</h3>

<p>今回はbehat<em>webstepsをベースにしましたが、HTTPクライアントは何でも大丈夫です。今回goutteでしたが、BehatはPHPUnitを使うのでPHPUnitのPHPUnit</em>Extensions_SeleniumTestCaseを使うのも１つでしょう。Javascriptが使われているサイトなどでは、こちらの選択になりますね。  </p>

<p>大事なことはアジャイルでドキュメントを書く事と、無駄なドキュメントでなく実行可能なドキュメントである、ということですね。プレーンテキストなのでプログラマじゃなくても、お客さんでも読めるし、書いてもらう事も可能かもしれません。打ち合わせでフィーチャファイルを議事録的に書きながら進めることもできると思います。  </p>

<p>今後の展開としては、一般的なwebstepに関してはgoutteを使った日本語版を、私のgithubアカウントで公開予定です。4/2のPHPカンファレンス関西までには公開して何かしゃべりたいなーと思っていますが、ちょっとテーマと違うか。。LT狙いで何か。。  </p>

<p>Behat RC1も期待して待ちましょう！！  </p>

<div style="width:425px" id="__ss_6907127">
<strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/kishida4slideshare/behat" title="Behat入門" rel="nofollow">Behat入門</a></strong><object id="__sse6907127" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=phpstudy201102-110212212213-phpapp02&amp;stripped_title=behat&amp;userName=kishida4slideshare">
<param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="never">
<embed name="__sse6907127" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=phpstudy201102-110212212213-phpapp02&amp;stripped_title=behat&amp;userName=kishida4slideshare" type="application/x-shockwave-flash" allowfullscreen="true" width="425" height="355" allowscriptaccess="never"></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/" rel="nofollow">presentations</a> from <a href="http://www.slideshare.net/kishida4slideshare" rel="nofollow">kishida4slideshare</a>.</div>
</div>

<p>懇親会でも話題になったのですが、PHPSpecはどこへ行ってしまったのか・・・  </p>

<p>それと、pharファイルが使えないよ！という方（当日朝3時までのオレ）、は<a href="http://d.hatena.ne.jp/brtRiver/20101029/1288342181">こちらの「Pharは便利だけど <code>--enalbe-zend-multibyte</code>が有効だと文字化けしてしまう」</a>を参考にしてください！！</p>



    <div class="row">
      <div class="small-12 medium-5 large-5 small-centered columns blog-social">
        <div class="shareon" data-url="http://blog.open.tokyo.jp/2011/02/13/php-bdd-behat.html">
          <a class="twitter" data-title="PHPのBDDフレームワーク Behat について発表してきました"></a>
          <a class="facebook" data-title="PHPのBDDフレームワーク Behat について発表してきました"></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

  </div>
</article>
<article>
  <h1 class="title"><a href="/2010/12/06/plugin.html">バリデーションプラグインと組み合わせて使うと便利な、確認画面を出すjQueryプラグイン</a></h1>
  <p class="postdate"><a href="/2010/12/06.html" title="Permanent link">Monday, December 06, 2010 06:12:51 PM</a></p>
  <p class="tags">
      <a href="/tags/confirm.html" rel="tag">confirm</a>
      <a href="/tags/form.html" rel="tag">form</a>
      <a href="/tags/jquery.html" rel="tag">jQuery</a>
      <a href="/tags/plugin.html" rel="tag">plugin</a>
  </p>
  <div class="content">
    <!-- use article.summary(250) if you have Nokogiri available to show just
       the first 250 characters -->
    <p>&lt;!&ndash; more &ndash;&gt;これまで確認画面を出すだけのものや、入力チェックだけをするものはプラグインとして出ていたのですが、どうも組み合わせて使おうとすると不便なことが多かったので、プラグインを自作してみました。</p>

<h3>ダウンロード：</h3>

<p>ソースコードは以下のgithubで公開しています。  </p>

<p><a href="https://github.com/sizuhiko/confirmForm">https://github.com/sizuhiko/confirmForm</a></p>

<h3>デモ：</h3>

<p>まずどのような動作をするのか、デモページで確認したほうがわかりやすいと思います。以下のURLから操作してみてください。  </p>

<p><a href="/demo/confirmForm/demo/index.html">/demo/confirmForm/demo/index.html</a>  </p>

<p>デモサイトでは入力チェックに<a href="http://5509.me/log/exvalidation">ex-valudationプラグイン</a>を使っています。</p>

<h3>必須条件：</h3>

<ul>
<li><a href="http://jquery.com/">jQuery本体</a> (1.4.2以上を推奨）</li>
<li><a href="http://dev.iceburg.net/jquery/jqModal/">jqModal</a>プラグイン</li>
</ul>

<h3>特徴：</h3>

<ul>
<li>確認画面を出すかどうかは自分で判断します</li>
<li>確認画面でOKが選択されるまでフォームはSubmitされません</li>
<li>一般的なフォームの形式であれば、ほとんどカスタマイズ（オプションで指定する）の必要なし</li>
</ul>

<h3>一般的なフォームって？</h3>

<p>このプラグインでは以下のような構造のHTMLフォームが利用されることを想定しています。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;form action="posted.html" method="get" id="inputForm"&gt;
  &lt;div&gt;
    &lt;label for="user_id"&gt;ID:&lt;/label&gt;
    &lt;input type="text" name="id" id="user_id" value=""&gt;&lt;span class="required"&gt;*&lt;/span&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="user_name"&gt;Name:&lt;/label&gt;
    &lt;input type="text" name="name" id="user_name" value=""&gt;&lt;span class="required"&gt;*&lt;/span&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="user_sex"&gt;Sex:&lt;/label&gt;
    &lt;fieldset id="user_sex"&gt;
      &lt;input type="radio" name="sex" id="user_sex_male" value="1"&gt;&lt;label for="user_sex_male"&gt;Male&lt;/label&gt;
      &lt;input type="radio" name="sex" id="user_sex_female" value="2"&gt;&lt;label for="user_sex_female"&gt;Female&lt;/label&gt;
      &lt;span class="required"&gt;*&lt;/span&gt;
    &lt;/fieldset&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="user_lang"&gt;Language:&lt;/label&gt;
    &lt;select name="lang" id="user_lang"&gt;
      &lt;option value=""&gt;-- please select --&lt;/option&gt;&lt;option value="jp"&gt;Japanese&lt;/option&gt;&lt;option value="en"&gt;English&lt;/option&gt;
    &lt;/select&gt;&lt;span class="required"&gt;*&lt;/span&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="user_receive_news"&gt;Receive News Mail:&lt;/label&gt;
    &lt;fieldset id="user_receive_news"&gt;
      &lt;input type="checkbox" name="news" id="user_reveive_news_sports" value="1"&gt;&lt;label for="user_receive_news_sports"&gt;Sports&lt;/label&gt;
      &lt;input type="checkbox" name="news" id="user_reveive_news_music" value="2"&gt;&lt;label for="user_receive_news_music"&gt;Music&lt;/label&gt;
      &lt;input type="checkbox" name="news" id="user_reveive_news_computer" value="3"&gt;&lt;label for="user_receive_news_computer"&gt;Computer&lt;/label&gt;
    &lt;/fieldset&gt;
  &lt;/div&gt;
  &lt;div class="buttons"&gt;
    &lt;input type="submit" value="next" id="submit_ok"&gt;
  &lt;/div&gt;
&lt;/form&gt;
</code></pre></div>
<p>これはデモページのフォーム部分そのものなのですが、項目をdivタグで囲い、その中の項目名はlabelで入力フィールドはinputやselectを使うようなデザインです。</p>

<h3>プラグインで必要になる記述</h3>

<p>javascriptファイルをロードします。
jqModelプラグインを使っているので、jqModal、もちろんjqueryもロードしてください。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;script charset="utf-8" type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.js"&gt;&lt;/script&gt;
&lt;script charset="utf-8" type="text/javascript" src="http://dev.iceburg.net/jquery/jqModal/jqModal.js"&gt;&lt;/script&gt;
&lt;script src="../src/confirmform.js"&gt;&lt;/script&gt;
</code></pre></div>
<p>jqModalのスタイルシートが必要になります。また、jqModalのexampleで記述されているConfirmサンプルのスタイル定義を利用しているので、サンプルHTML上から切り出したスタイルシートをvendorディレクトリに用意しました。これを使うと簡単に利用を開始することができます。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;link charset="utf-8" href="../vendor/jqModal/jqmConfirm.css" type="text/css" rel="stylesheet"&gt;&lt;/link&gt;
&lt;link charset="utf-8" href="http://dev.iceburg.net/jquery/jqModal/jqModal.css" type="text/css" rel="stylesheet"&gt;&lt;/link&gt;
</code></pre></div>
<h3>プラグインの初期化</h3>

<p>プラグインを利用するためには、HTML上に１つ確認画面用の空エレメントを追加する必要があります。場所はbody内であればどこでもかまいません。</p>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;div id="confirmForm"&gt;&lt;/div&gt;
</code></pre></div>
<p>idの値も特に意味はありません。ここではconfirmFormという値にしておきます。  </p>

<p>プラグインのインスタンスを初期化するには、$(&ldquo;入力フォームのセレクタ&rdquo;).confirmForm(&ldquo;確認画面用のセレクタ&rdquo;, オプション) を使います。</p>
<div class="highlight"><pre class="highlight plaintext"><code>$(document).ready(function(){
  ...
  $("#inputForm").confirmForm("#confirmForm", {});
  ...
}
</code></pre></div>
<p>ひとまず、このようにシンプルな宣言で動作します。実際に利用する場面では、入力フォームでselectボックスやcheckbox,radioボタンなどを利用していると思います。デフォルトの挙動では値をinputのvalueから取り出して表示するだけなので、コード値を名前に変換する必要があるかもしれません。このあたりのカスタマイズは、オプション節で解説します。</p>

<h3>確認画面を表示する</h3>

<p>このプラグインでは確認画面は自分で表示する必要があります。たとえばバリデーションプラグインの成功時コールバックで呼び出すようなイメージです。</p>
<div class="highlight"><pre class="highlight plaintext"><code>$("#inputForm").confirmShow();
</code></pre></div>
<p>これはとてもシンプルで、confirmShow関数を呼び出すだけです。</p>

<h3>OKが押されたかどうかチェックする</h3>

<p>このプラグインでは、確認画面でOKが選択されたらもう一度入力フォームでSubmitを実行します。そのため入力チェックが再実行されて、コールバックが呼び出されるかもしれません。そのためにOKが既に選択されていたらそのままreturnするような実装にすることになると思います。</p>
<div class="highlight"><pre class="highlight plaintext"><code>validCallback:function() {
  if($("#inputForm").isConfirmed()) {
    return;
  }
  $("#inputForm").confirmShow();
}
</code></pre></div>
<p>確認済みかどうかはisConfirmed関数を呼び出すだけです。入力内容が問題ないときのコールバックがvalidCallbackだったとすると、上記のような実装になります。</p>

<h3>オプション</h3>

<p>実際に利用する場面では、必ずしもinputのvalue値が確認画面に出れば良い訳ではありません。また、タイトルを変更したりボタンのラベルを変更したりもしたいでしょう。そのためにプラグイン初期化時にオプションを指定できるようにしてあります。  </p>

<p>オプション一覧：</p>

<p>名前意味デフォルト値概要</p>

<p>title
タイトル
Are you sure?
確認画面上部に表示されるタイトルを文字列で指定</p>

<p>yes
はいボタンのラベル
Yes
文字列で指定</p>

<p>no
いいえボタンのラベル
no
文字列で指定</p>

<p>findLavel
ラベルを探索して文字列を返すためのコールバック
1つ前の要素のtext部分(一般的なフォームのtextボックスではlabelになる)
radioやcheckboxのようにラベルがfieldsetの外側にあるようなケースで独自にコールバック関数を実装する</p>

<p>formatValue
値をカスタマイズするためのコールバック
inputやselectのvalue値
value値がコードだが、確認画面では値（名前）で出したい場合に独自にコールバック関数を実装する</p>

<p>separator
複数選択値の区切り文字
,(コンマ）
同一nameがある場合に、値を区切る文字列</p>

<h4>ラベル文字列のコールバック</h4>

<p>デフォルトの挙動は以下のとおりです。</p>
<div class="highlight"><pre class="highlight plaintext"><code>'findLabel': function(inputField) {
    return $(inputField).prev().html();
}
</code></pre></div>
<p>textボックスは直前の要素がlabelであることを想定しているので、すべてが一般的なフォームのレイアウトで、textボックスしか利用していなければ、オプションの指定は必要ありません。しかし実際はlabelが右だったり１つ親の要素だったりすることがあります。
このような場面ではコールバックを実装してください。  </p>

<p>例えばデモページでは以下のようなコードになっています。</p>
<div class="highlight"><pre class="highlight plaintext"><code>'findLabel': function(field) {
    switch(field.name) {
    case 'sex':
        return 'Sex';
    case 'news':
        return 'Receive News Mail';
    default :
        str = $(field).prev().html();
        return str.substring(0, str.length-1);
    }
}
</code></pre></div>
<p>findLabelに関してはformatValurのように項目別ではなく、functionで受け取って独自にカスタマイズする方式を取っています。これは項目名は一括ルールで変換できる場合が想定できるためです。  </p>

<p>※このオプションに関しては、将来formatValueのようにhashでも指定できる（併用）方式に変更する予定です。</p>

<h4>値をカスタマイズするためのコールバック</h4>

<p>inputやselectのvalue値は必ずしも確認表示用には向いていないこともある（例えばコード値になっているなど）ので、このようなケースではコールバック関数を実装してください。  </p>

<p>例えばデモページでは以下のようなコードになっています。</p>
<div class="highlight"><pre class="highlight plaintext"><code>'formatValue':{
  'sex':function(field) {
    return {1:"Male", 2:"Female"}[$(field).val()];
  },
  'lang':function(field) {
    return {'jp':"Japanese", 'en':"English"}[$(field).val()];
  },
  'news':function(field) {
    return {1:"Sports", 2:"Music", 3:"Computer"}[$(field).val()];
  }
}
</code></pre></div>
<p>formatValue自体は各入力項目のname属性をキーにしたhashで定義します。</p>

<h3>さいごに</h3>

<p>今後以下の機能について、バージョンアップを予定しています。</p>

<ul>
<li>yes,noボタンの左右を逆に指定できるようにする</li>
<li>selectやcheckbox、radioなどタイプごとに推奨フォームを想定してラベル値を取得する</li>
<li>findLabelをhashでもオプション指定できるようにする</li>
</ul>

<p>その他カスタマイズ要望などあれば、機能追加していきたいな、と思っています。</p>



    <div class="row">
      <div class="small-12 medium-5 large-5 small-centered columns blog-social">
        <div class="shareon" data-url="http://blog.open.tokyo.jp/2010/12/06/plugin.html">
          <a class="twitter" data-title="バリデーションプラグインと組み合わせて使うと便利な、確認画面を出すjQueryプラグイン"></a>
          <a class="facebook" data-title="バリデーションプラグインと組み合わせて使うと便利な、確認画面を出すjQueryプラグイン"></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

  </div>
</article>
<article>
  <h1 class="title"><a href="/2010/10/05/phpmatsuri.html">PHPmatsuri was greatest event for PHP developer.</a></h1>
  <p class="postdate"><a href="/2010/10/05.html" title="Permanent link">Tuesday, October 05, 2010 11:10:28 PM</a></p>
  <p class="tags">
      <a href="/tags/bdd.html" rel="tag">BDD</a>
      <a href="/tags/behat.html" rel="tag">Behat</a>
      <a href="/tags/php.html" rel="tag">PHP</a>
      <a href="/tags/php-matsuri.html" rel="tag">PHP matsuri</a>
  </p>
  <div class="content">
    <!-- use article.summary(250) if you have Nokogiri available to show just
       the first 250 characters -->
    <p>&lt;!&ndash; more &ndash;&gt;I went <a href="http://2010.phpmatsuri.net/">PHPmatsuri</a> on last weekend. PHPmatsuri was great-full Hackathon style event about PHP in Japan. I had prepared about the event as staff.</p>

<blockquote>
<p>私は先週末PHP祭りに行ってきました。PHP祭りは、日本のPHP界隈では最大のハッカソン形式のイベントです。私はスタッフとして準備に携わってきました。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_1.jpg" alt="" /> </p>

<p>In 10/2 morning(8:00 am), staffs meets up hall of the event(Harumi Grand Hotel).
We were setting some desks, chairs, electronics line, audios and reception space.</p>

<blockquote>
<p>スタッフは10/2の朝8:00に晴海グランドホテルに集合して、会場のセッティングを行います。</p>
</blockquote>

<p>I wait participants of the event at front of the hotel, and I showed them to the room.
I could look for them easily, because any participants had iPhone and navigated by google-map.</p>

<blockquote>
<p>受付が始まる直前にホテルのフロント前に移動し、参加者を会場へ案内します。皆さんiPhoneを片手に地図を見ながら来るので、すぐに参加者とわかりました。</p>
</blockquote>

<p>At first, I started ice break for strained participants.
And I introduce to them Mr. Hiro Yoshioka, then started first session.
The session has be very important for Japanese developer.
Should check <a href="http://d.hatena.ne.jp/hyoshiok/20101003">his blog &amp; slides</a>.</p>

<blockquote>
<p>まず最初はアイスブレークから。皆さんの緊張を解きほぐします。会場が暖まったところで、よしおかさんに基調講演をしていただきました。このセッションはPHPに限らずに日本の開発者にとってぜひ聞いて欲しかったセッションとなりました。ぜひよしおかさんのブログをチェックしてください。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_2.jpg" alt="" /> 
The important thing is &ldquo;English or die&rdquo; for us.
Almost Japanese developer have satisfaction with only Japanese information.
Because some Japanese hacker translate English to Japanese with his effort.
But Yoshioka san says, &ldquo;should dispatch some information with English to world-wide&rdquo;.
I know it is very important.So, I wrote this post in English.
Some guys same thinks, time line on twitter about phpmatsuri filled with his impressive words.</p>

<blockquote>
<p>注目すべきキーワードは&ldquo;English or Die&quot;でした。日本ではみんな日本語訳のドキュメントを作るのが好きで、著名なブロガーやハッカーがやってくれていますね。でもそうではなくて各自が英語を使って海外に発信していくのが重要だと。僕もそう思うし（だから英語で書いてみた）、よしおかさんの講演中のtwitter TLを見ればみんな共感していたのがわかります。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_3.png" alt="" /> 
The second session was Practical PHP5.3 by Mr. Nate Abele.
He is developing lithium now. Before, he was CakePHP lead developer.
In 9/25, Mr. Rasmus Lerdorf talk about same keywords at PHP-conference.
Nate talked about some details more than Rasmus with using sample codes.For example PSR-0, closure&hellip;</p>

<blockquote>
<p>次のセッションはNateによる実践PHP5.3。１週間前のPHPカンファレンスでRasmusが講演した内容と似ていたけど、より詳細に踏み込んだ感じだった。特にPSR-0とかクロージャとかlithiumの例も交えて解説していました。</p>
</blockquote>

<p>Since afternoon, the room was separated to 2 space between conference and Hackathon.
On the conference space, talked about CakePHP2.0 by Graham Weldon, Lithium by Nate Abele &amp; Joel Perras and some sponsor&rsquo;s session.
On the Hackathon space, opened workshop about Symfony2, CakePHP and Lithium by the core developer.
I presided on conference space, but had very interesting to Hackathos space.</p>

<blockquote>
<p>午後からは会場を講演スペースと開発スペースに分割しました。講演スペースでは、コアデベロッパーから各フレームワークのセッションあり、スポンサーセッションあり。開発スペースではコアデベロッパーと一緒にワークショップができたり、各々のテーマで開発したりしていました。僕は司会進行だったので講演スペースに付きっきりでしたが、開発スペースがすごく気になっていました。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_4.jpg" alt="" /> 
After dinner, Mr. Kris Wallsmith talked about Symfony2 at confernce space.
Same time, Redbull&rsquo;s girls came to Hackathon space.</p>

<blockquote>
<p>夕食が終わると、KrisによるSymfony2のセッションが開始。ちょうどその頃レッドブルガールがキャンペーンにやってきてくれました。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_5.jpg" alt="" /> 
In that time, I was not able to be heard while preparing next surprise present.
I was waiting for 3 cakes.
When Symfony2 session ended, the cakes carried into the room.
Everybody crowded around cakes and take many photos.
So, the nice idea(real cake) was started by Japanese CakePHP community on 2 years ago. 
In this time, it added Lithium and symfony.
The cakes made by <a href="http://www.papermoon.cc/">Paper Moon</a>. I know the shop is very nice cafe. I recommend for you.</p>

<blockquote>
<p>僕はちょうど次のサプライズに向けて準備中でSymfony2のセッションはほとんど聞けませんでした。それは日本のCakePHPイベントでは恒例のリアルケーキです。今回は僕が担当だったのと、とにかくLithiumの出来映えがどうなのか心配だったのです。Symfony2セッションが終わるころホテルの人にケーキが運び入れてもらいました。みんな群がって来て写真を取りまくっていました。ケーキは南麻布のPaper Moonさんにお願いしました。良い店なのでお勧めです。</p>
</blockquote>

<p><img src="/images/blog/phpmatsuri_6.png" alt="" /> 
And sounds of StarWars heard, JIREI master entered. He look like Jedi master!
JIREI means the use-case.
2 teams of CakePHP and symfony competed presentation to get a degree of JIREI master.
So, @HIROCAST won competition and became JIREI master. He talked about Agile development by symfony.</p>

<blockquote>
<p>スターウォーズの曲と共にJIREI masterが入場。ここから事例紹介セッション「JIREI night」が始まります。CakePHPとsymfonyに別れ交互に事例発表を行い、勝ったのは@HIROCASTさんの「アジャイルな開発をチームでやってみた」(symfony)に決定しました。</p>
</blockquote>

<p>Time is over 23:00. But everyone continue to develop about themself theme.
I started myself theme too.
I tried OpenpearPEG for develop parser of Cucumber feature.</p>

<blockquote>
<p>事例紹介が終了したのが23時過ぎ。ここからようやく自分の開発時間です。OpenpearPEGでCucumberのパーサーを作ろうと思っていました。</p>
</blockquote>

<p>About 2 hours later, I saw some problem.
But file of feature don’t match PEG because it isn’t structured.
I started giving it up.
I was looking for difference theme.
So, I got destiny project.
It&rsquo;s <a href="http://everzet.com/Behat/">Behat</a>.
I had feeled very interesting about this project.
I decided this to be my theme.</p>

<p>Time is over 5:00. My challenge finished. I go back to my room.
What my room-mates was developing his theme in the room !</p>

<blockquote>
<p>2時間ぐらい頑張ったのですが、自然言語はPEGと相性が悪いように思い、諦めかけて違うテーマを探していたら、運命の出会いが待っていました。それが「Behat」です。これで行くぞ、と決めたのです。そして5時頃なんとか日本語フィーチャが通るようにハックして部屋に戻りました。合部屋の人はすっかり寝ているのかと思ったら、なんと部屋で開発していました！みんな頑張ってるなー</p>
</blockquote>

<p>I got up 7:00 on 10/3. After breakfast, I wrote presentation for demonstration on event room.
Everybody get up, but they were maybe very tired.
Afternoon 10/3,  demonstration about every theme started. The entries are 33.
Each presentation is 4 minutes, and the style is Japanese LT having &quot;Dora-Musume&rdquo;.
Whenever demonstration finished , the auditor posts the score from Google-Form.</p>

<blockquote>
<p>1時間半ぐらい寝て、7:00から朝食を取りイベント会場でデモ大会用のプレゼンを作成。みんな会場入りするけど、お疲れの様子です。どうも結構な人数が徹夜でやっていたようで。。10/3午後からデモ大会の開始です。発表は1人4分、日本のLT形式（もちろんドラ娘付き）です。なんと33人のエントリーがありました。各プレゼンが終わると事例発表と同じGoogleフォームから投票できるようになっています。そういえばドラ娘の写真がありません。どなたかプリーズ。</p>
</blockquote>

<p>My position is 8th in sector-1. But I started on 7th by few accidents.
Since sector-2, I presided.
All demonstration was finished 3 hour later. The talker and auditor was very tired. long long time LT had been first time for us.</p>

<blockquote>
<p>僕は最初の8番目の予定だったのですが、並び順を間違えて7番手でプレゼンとなりました。その後セクター2からは司会にバトンタッチ。全部のLTが終わったのが3時間後（1時間おきに休憩はありましたよ）。こんなに長いLTは初めてで、すごく疲れました。</p>
</blockquote>

<div style="width:425px" id="__ss_5362886">
<strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/kishida4slideshare/phpmatsuri2010" title="Phpmatsuri2010" rel="nofollow">Phpmatsuri2010</a></strong><object id="__sse5362886" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=phpmatsuri2010-101005095236-phpapp02&amp;stripped_title=phpmatsuri2010&amp;userName=kishida4slideshare">
<param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="never">
<embed name="__sse5362886" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=phpmatsuri2010-101005095236-phpapp02&amp;stripped_title=phpmatsuri2010&amp;userName=kishida4slideshare" type="application/x-shockwave-flash" allowfullscreen="true" width="425" height="355" allowscriptaccess="never"></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/" rel="nofollow">presentations</a> from <a href="http://www.slideshare.net/kishida4slideshare" rel="nofollow">kishida4slideshare</a>.</div>
</div>

<p><img src="/images/blog/phpmatsuri_7.png" alt="" /> 
And&hellip;&hellip;. I won Hacker Prize. It means best performance into these demonstrations.
I got new iPod-touch of prize. I&rsquo;m very happy !</p>

<blockquote>
<p>そして運命の結果発表。僕はハッカー賞に選ばれました。これは最高得点の賞なんです。賞品は新しいiPod Touchです！</p>
</blockquote>

<p>Long long time was spent, phpmatsuri finished.
I think almost participants and staffs were satisfaction.
And for Japanese PHP developer, it will become to trigger to publish some information positively. I think so.</p>

<p>At last, thanks for 2 days. @yando and staffs, everybody.</p>

<blockquote>
<p>長い時間が過ぎ、PHP祭りは終了しました。参加者／スタッフともに満足できる内容だったと思っています。また日本のPHP開発者にとって積極的に情報発信をするきっかけになるイベントになったんじゃないかと思いました。最後に、２日間ありがとうございました。特に@yandoさん、そしてスタッフ・参加者の皆様に感謝です。</p>
</blockquote>



    <div class="row">
      <div class="small-12 medium-5 large-5 small-centered columns blog-social">
        <div class="shareon" data-url="http://blog.open.tokyo.jp/2010/10/05/phpmatsuri.html">
          <a class="twitter" data-title="PHPmatsuri was greatest event for PHP developer."></a>
          <a class="facebook" data-title="PHPmatsuri was greatest event for PHP developer."></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

  </div>
</article>
<article>
  <h1 class="title"><a href="/2010/02/22/50-php.html">第50回PHP勉強会@関東に参加してきた</a></h1>
  <p class="postdate"><a href="/2010/02/23.html" title="Permanent link">Tuesday, February 23, 2010 12:02:04 AM</a></p>
  <p class="tags">
      <a href="/tags/php.html" rel="tag">PHP</a>
      <a href="/tags/phpstudy.html" rel="tag">phpstudy</a>
  </p>
  <div class="content">
    <!-- use article.summary(250) if you have Nokogiri available to show just
       the first 250 characters -->
    <p>&lt;!&ndash; more &ndash;&gt;第50回PHP勉強会@関東に参加してきました。  </p>

<p>とても豪華なメンバーが集まっていて、さすが５０回！！<br>
ネタも旬な内容でしたが、ustムリなセッションもあったりして、細かい内容のレポートは避けておきます。  </p>

<p>会場を貸していただいた<a href="http://www.contents-one.co.jp/">コンテンツワン</a>様ありがとうございました。<br>
広いしキレイだし言う事なしです。  </p>

<p>んで、その後最寄りの日比谷バーに移動したのですが、乾杯がいきなりオリジナルカクテル。<br>
@gusagiさんすごいよ！<br>
<img src="/images/blog/ST330049.JPG" alt="" />   </p>

<p>完全貸し切りのスペースで、立食パーティ。懇親会LTもあり（発表しました）、楽しい時間はあっという間に過ぎました。<br>
次の区切りはハードルが上がりますね。１００回はあと何年後？ですかね。<br>
最後には記念デザートもあり、記念尽くしな懇親会でした。<br>
<img src="/images/blog/ST330051.JPG" alt="" />   </p>

<p>LTでも言いましたが、永和システムマネジメントは「PHP x Agile も応援します」ので、お仕事ありましたら、連絡ください www。  </p>

<p>参加した皆様、発表者の皆様お疲れさまでしたー<br>
幹事の@gusagiさんに感謝です。</p>



    <div class="row">
      <div class="small-12 medium-5 large-5 small-centered columns blog-social">
        <div class="shareon" data-url="http://blog.open.tokyo.jp/2010/02/22/50-php.html">
          <a class="twitter" data-title="第50回PHP勉強会@関東に参加してきた"></a>
          <a class="facebook" data-title="第50回PHP勉強会@関東に参加してきた"></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

  </div>
</article>
<article>
  <h1 class="title"><a href="/2009/11/02/cakematsuri-2009-tokyo.html">CakeMatsuri 2009 TOKYO ふりかえり</a></h1>
  <p class="postdate"><a href="/2009/11/02.html" title="Permanent link">Monday, November 02, 2009 11:11:31 AM</a></p>
  <p class="tags">
      <a href="/tags/cakematsuri.html" rel="tag">cakematsuri</a>
      <a href="/tags/cakephp.html" rel="tag">CakePHP</a>
  </p>
  <div class="content">
    <!-- use article.summary(250) if you have Nokogiri available to show just
       the first 250 characters -->
    <p>&lt;!&ndash; more &ndash;&gt;昨年のCakePHPカンファレンスでは、一講演者としての参加だったのですが、今回は中の人として参加しました。<br>
Blogを書くまでがイベントです、ということで、一息ついたところでの思いをKPTでまとめてみました。<br>
イベント全般に関しては、スタッフで「ふりかえり」をしたので、当日の担当範囲中心に。  </p>

<p>Keep:<br>
二日間にわたり、かなり多くのかたと交流できたのが、今回のテーマ「交流」にマッチしていて、よかったのではないかと思います:yes:<br>
特にこれまで勉強会などで会ったことのない初対面のかたと、いろいろな話ができたので楽しかったです。<br>
コア開発者とも仲良くなれた気がしました！！:up:<br>
また１日目の懇親会でJoelに先日のPHP勉強会で発表した「WebTestCaseでfixtureを使う」について、プレゼンできたことが良かったです。後で英語に翻訳してBakelyにアップするぜ！と宣言した（自分を追い込んだ）ので、頑張ります。:star:   </p>

<p>Problem:<br>
ワークショップ（実務者編）のユニットテスト基礎・実践は、実質基礎しかできませんでした:ko: 。イベントごとという意味ではオブジェクト倶楽部などの経験もあったので大丈夫かな？と思っていたのですが、ちょっと上級内容だったのかな？と。。。ただ資料としては、後で十分振り返ってできる内容になっているので、持ち帰ってゆっくり確認してもらえると、理解が深まるかな？と思います。<br>
２日目の２次会は、grahamの向かいの席でがっつり英語談義だったのですが、途中から疲労:faint: とアルコール:beer: から頭の回転がおかしくなってきて、だんだんと聞き取りもできなくなってきてしまいました。  </p>

<p>Try:<br>
PHPerにはコマンドラインは難しい？というのもあったので、別の方式が良いのかな？とも思ったのですが、実務ではconsoleのテストを使ったりすることの方が多いので、やはりコマンドラインは捨てがたいのですよね。なので次回以降は、オブラブの合宿前にもやった「環境構築前夜祭」をできれば良いなと思います。地方からの参加で必ずしも前夜祭に参加できない（当日移動など）の方もいるので、資料は事前公開ということで。<br>
そういったことも含め、実務者コースのハンズオンの感触は、今回かなり掴めたので、進め方などもっと良い形でできるようにしたいと思っています。<br>
後は英会話ですなー、毎日仕事で使っていたときより明らかに落ちてるし（とは言っても元々たいしたこともないけど）。。。何か解決策を見つけて英会話力をアップしたいと思うのでした:) 。  </p>

<hr>

<p>最後に。<br>
参加者の皆様の温かい声援や、Blogでの感想に助けられました。ありがとうございます。<br>
ワークショップの持ち出し企画はやりたいなーと思いますが、ちょっとしばらくイベントは・・・と思ったりしてます:pが、来年には実施したいですね。<br>
また皆様にお会いできるのを楽しみにしています。  </p>



    <div class="row">
      <div class="small-12 medium-5 large-5 small-centered columns blog-social">
        <div class="shareon" data-url="http://blog.open.tokyo.jp/2009/11/02/cakematsuri-2009-tokyo.html">
          <a class="twitter" data-title="CakeMatsuri 2009 TOKYO ふりかえり"></a>
          <a class="facebook" data-title="CakeMatsuri 2009 TOKYO ふりかえり"></a>
        </div>
      </div>
      <div class="clearfix"></div>
    </div>

  </div>
</article>

<nav aria-label="ページング">
  <p class="pagenav">
      <a href="/page/37/">« Prev</a>
        <a href="/page/34/">34</a>
        <a href="/page/35/">35</a>
        <a href="/page/36/">36</a>
        <a href="/page/37/">37</a>
        <b>38</b>
        <a href="/page/39/">39</a>
        <a href="/page/40/">40</a>
        <a href="/page/41/">41</a>
        <a href="/page/42/">42</a>
      <a href="/page/39/">Next »</a>
  </p>
</nav>
<script type="text/javascript" src="/javascripts/image-resize-ie.js"></script>


        </div>
      </div>
    </main>

      <aside id="sidewrap">
        <div id="side">
          <section class="sidebox sidelinx">
            <h2>Recent Articles</h2>
            <div class="pad">
              <ul>
                  <li><a href="/2025/05/02/step-functions-connect-to-private-api-through-lattice.html">Step Functions の HTTP タスクでプライベート API にアクセスする</a> <span>2025/05/02</span></li>
                  <li><a href="/2025/04/22/deploy-lambda-function-from-zip-on-s3.html">S3 に設置した zip ファイルから Lambda 関数をデプロイする</a> <span>2025/04/22</span></li>
                  <li><a href="/2025/04/17/nested-step-functions-deploy-by-cdk.html">ネスト構造の Step Functions を CDK でデプロイする</a> <span>2025/04/17</span></li>
                  <li><a href="/2025/04/16/next-js-standalone-build-on-app-runner-with-x-ray-tracing.html">Next.js standalone ビルドしたアプリを App Runner で動かして X-Ray で計測する</a> <span>2025/04/16</span></li>
                  <li><a href="/2025/04/15/next-js-standalone-build-with-iast-agent.html">Next.js を standalone ビルドしたアプリで New Relic エージェントを動かす</a> <span>2025/04/15</span></li>
                  <li><a href="/2025/04/14/phpcon-odawara-2025.html">PHPカンファレンス小田原2025に参加しました</a> <span>2025/04/14</span></li>
                  <li><a href="/2025/04/11/next-js-deploy-to-apprunner.html">Next.js で作ったアプリケーションを AppRunner にデプロイする</a> <span>2025/04/11</span></li>
                  <li><a href="/2025/04/08/apprunner-deploy-from-cdk-is-easy-really.html">AppRunner へのデプロイは cdk でサクッとできるのか？</a> <span>2025/04/08</span></li>
                  <li><a href="/2024/06/23/php-conference-fukuoka-2024.html">PHP カンファレンス福岡2024に参加した</a> <span>2024/06/23</span></li>
                  <li><a href="/2024/06/03/get-started-with-graphql-api-server-with-appsync-js.html">APPSYNC_JS (AppSync JavaScript) で始める GraphQL API サーバー</a> <span>2024/06/03</span></li>
              </ul>
            </div>
          </section>
          <section class="sidebox" id="tagcloud">
            <h2>Tags</h2>
            <div class="pad">
              <ul class="nobullets clearfix">
                    <li class="size1">
                      <a href="/tags/aws.html" rel="tag">AWS</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/stepfunctions.html" rel="tag">StepFunctions</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/lambda.html" rel="tag">Lambda</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/cdk.html" rel="tag">CDK</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/apprunner.html" rel="tag">AppRunner</a>
                    </li>
                    <li class="size5">
                      <a href="/tags/php.html" rel="tag">PHP</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/phpcon.html" rel="tag">PHPcon</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/javascript.html" rel="tag">JavaScript</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/gae.html" rel="tag">GAE</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/toiletevolution.html" rel="tag">toiletevolution</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/phpkansai.html" rel="tag">phpkansai</a>
                    </li>
                    <li class="size2">
                      <a href="/tags/typescript.html" rel="tag">TypeScript</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/aws-sdk.html" rel="tag">aws-sdk</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/aws-sdk-v3.html" rel="tag">aws-sdk@v3</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/jest.html" rel="tag">Jest</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/import-maps.html" rel="tag">import maps</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/dependencies-management.html" rel="tag">Dependencies Management</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/dependabot.html" rel="tag">dependabot</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/gcp.html" rel="tag">GCP</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/asucon.html" rel="tag">asucon</a>
                    </li>
                    <li class="size3">
                      <a href="/tags/polymer.html" rel="tag">Polymer</a>
                    </li>
                    <li class="size2">
                      <a href="/tags/polymer-co-edo.html" rel="tag">Polymer.co-edo</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/chirimen.html" rel="tag">CHIRIMEN</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/iot.html" rel="tag">IoT</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/wot.html" rel="tag">WoT</a>
                    </li>
                    <li class="size4">
                      <a href="/tags/cakephp.html" rel="tag">CakePHP</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/cakefest.html" rel="tag">CakeFest</a>
                    </li>
                    <li class="size2">
                      <a href="/tags/webcomponents.html" rel="tag">WebComponents</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/toiletevolution.html" rel="tag">ToiletEvolution</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/web-components.html" rel="tag">Web Components</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/cakephp3.html" rel="tag">CakePHP3</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/bdd.html" rel="tag">BDD</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/behat.html" rel="tag">Behat</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/fixture.html" rel="tag">fixture</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/test.html" rel="tag">Test</a>
                    </li>
                    <li class="size0">
                      <a href="/tags/phpmatsuri.html" rel="tag">phpmatsuri</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/coverflow.html" rel="tag">CoverFlow</a>
                    </li>
                    <li class="size1">
                      <a href="/tags/flex.html" rel="tag">Flex</a>
                    </li>
              </ul>
            </div>
          </section>
          <section class="sidebox sidelinx">
            <h2>By Year</h2>
            <div class="pad">
              <ul>
                  <li><a href="/2025.html">2025</a> (8)</li>
                  <li><a href="/2024.html">2024</a> (10)</li>
                  <li><a href="/2023.html">2023</a> (12)</li>
                  <li><a href="/2022.html">2022</a> (14)</li>
                  <li><a href="/2021.html">2021</a> (1)</li>
                  <li><a href="/2020.html">2020</a> (6)</li>
                  <li><a href="/2019.html">2019</a> (41)</li>
                  <li><a href="/2018.html">2018</a> (31)</li>
                  <li><a href="/2017.html">2017</a> (7)</li>
                  <li><a href="/2016.html">2016</a> (5)</li>
                  <li><a href="/2015.html">2015</a> (13)</li>
                  <li><a href="/2014.html">2014</a> (14)</li>
                  <li><a href="/2013.html">2013</a> (6)</li>
                  <li><a href="/2012.html">2012</a> (7)</li>
                  <li><a href="/2011.html">2011</a> (11)</li>
                  <li><a href="/2010.html">2010</a> (3)</li>
                  <li><a href="/2009.html">2009</a> (10)</li>
                  <li><a href="/2008.html">2008</a> (16)</li>
              </ul>
            </div>
          </section>
          <section class="sidebox sidelinx">
            <h2>Twitter</h2>
            <a class="twitter-timeline" data-lang="ja" href="https://twitter.com/sizuhiko?ref_src=twsrc%5Etfw">Tweets by sizuhiko</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>            
          </section>
        </div>
      </aside>

      <footer id="footer">
        <div id="footer2">
          <div class="clear"></div>
        </div>
    </footer>
  </body>
</html>
