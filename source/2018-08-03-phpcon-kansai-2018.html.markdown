---
title: PHPカンファレンス関西2018に参加してGAEに継続的デプロイする方法について発表してきました
date: 2018-08-03 06:41 UTC
tags:
- PHP
- phpkansai
- GAE
- GoogleCloudContainerBuilder
---

2018/7/14 に行われた[PHPカンファレンス関西2018](https://2018.kphpug.jp/)に参加してきました。

### 今年も参加

昨年と同じく[GRAND FRONT OSAKA](http://www.gfo-sc.jp)で開催されました。

夜はスピーカーとスタッフの前夜祭から、コミュニティ前夜祭と合流しての2次会へと流れ、タクシーでホテルに戻りました。その後、3次会、4次会があったとかないとか...（これ毎年のコピペですwww）

### PHPカンファレンス関西2018

PHPカンファレンス関西は3トラック+スポンサーブースです。朝一番の講演に参加者が多いのも特徴ですね。
今年はあまりセッションは聞かずに参加者と話したり、アンカンファレンスでPHPの非同期処理について話を聞いていたりしました。

私の発表はGAEへの継続的デプロイだったのですが、なんとタイムテーブルを見ると、私の前に

- Amazonの中の人が `PHPアプリケーションのコンテナ化入門` というタイトルで CI/CD の話をするらしい
- Herokuの中の人が `HerokuでPHPアプリ開発速度を倍にする` というタイトルで 継続的デリバリー機能 の話をするらしい

ということでネタ丸かぶり？とか、私だけ中の人じゃないよ！とか心配になったので、この2つのセッションはしっかり前の席で聞きました。

### GAEにPHPアプリを継続的デプロイする方法について発表しました

昨年に引き続きPHPネタですが、主にはDockerとGoogle Cloud Container Builderの話でした。

<script async class="speakerdeck-embed" data-id="1bf79bdf3f264135868d28194fcab3a5" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

GAEを使っていて当然コードがPUSHされたらデプロイしたくなるのですが、何が良いのかよくわからない時期があって、調べて試した結果を発表するに至りました。
調べた過程で、まぁどんなツールを使っていても gcloud コマンドさえ動けば、あとはGAEと接続するための認証情報をそのCI/CDツールに最適な方法で管理するだけで、どんなものでも良いということがわかりました。
ただ、Cloud Container Builder使うとプライベートな空間を使えるわりには結構安いし、良いのではないかと思ったわけです。

デプロイのデモもギリギリ間に合って、ほっとしました。リポジトリの README に詳しい説明が書いてあるので、そちらを見ながらコードを動かしてみてください。

[PHPカンファレンス関西2018デモプログラム](https://github.com/sizuhiko/gccb-php-se-sample)

今回の発表をするのに[30分でできる(当社比) Google Cloud Container Builderを利用した AppEngine SE環境への自動デプロイ](https://qiita.com/ryutah/items/663f97feb87571f972cc)という記事が大変参考になったのですが、
GCPのコンソール（画面）から操作するのは、環境の再現性がなくて嫌だなーと思ったので、 gcloud コマンドを駆使して自動構築できるようにしました。
これは今回、かなり頑張ったところです。そしてデモ環境を何度も壊して作り直すことができたので、リハーサルも捗りました。

### 大阪を堪能

最終日は恒例の `ねぎ焼き やまもと` へ。
今年はPHPerを4人(昨年は3人)引き連れ、梅田エスト店にやってきました。
そのあと有志で明石焼き/たこ焼きを食べに行って、聖地タイガースショップで買い物をして帰京しました。

### さいごに

また来年も参加／発表したいので、1年の努力を惜しまずに...

