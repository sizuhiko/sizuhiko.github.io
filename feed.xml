<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog Name</title>
  <subtitle>Blog subtitle</subtitle>
  <id>http://blog.url.com/</id>
  <link href="http://blog.url.com/"/>
  <link href="http://blog.url.com/feed.xml" rel="self"/>
  <updated>2024-06-23T11:35:00+09:00</updated>
  <author>
    <name>Blog Author</name>
  </author>
  <entry>
    <title>PHP ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡2024ã«å‚åŠ ã—ãŸ</title>
    <link rel="alternate" href="http://blog.url.com/2024/06/23/php-conference-fukuoka-2024.html"/>
    <id>http://blog.url.com/2024/06/23/php-conference-fukuoka-2024.html</id>
    <published>2024-06-23T11:35:00+09:00</published>
    <updated>2024-06-23T14:18:27+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;a href="https://phpcon.fukuoka.jp/2024/"&gt;PHP ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡2024&lt;/a&gt;ã«å‚åŠ ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;2019å¹´ä»¥æ¥ã® PHP ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡ã€‚
ãã®ã¨ãã®è¨˜äº‹ãŒ&lt;a href="/2019/06/30/phpconfuk2019.html"&gt;PHPã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡2019ã§ã€ æ¨™æº–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ã¤ã„ã¦ç™ºè¡¨ã—ã¦ãã¾ã—ãŸ&lt;/a&gt;ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;æ˜¨å¹´ã¯ãƒã‚±ãƒƒãƒˆã‚’è³¼å…¥ã§ããšã€å…ˆã«äºˆç´„ã—ã¦ã„ãŸãƒ•ãƒ©ã‚¤ãƒˆã‚„ãƒ›ãƒ†ãƒ«ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã¨ã„ã†å½¢ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€ä»Šå¹´ã¯ã¡ã‚ƒã‚“ã¨ãƒã‚±ãƒƒãƒˆè³¼å…¥ã—ã¦ã‹ã‚‰ã€ãƒ•ãƒ©ã‚¤ãƒˆã¨ãƒ›ãƒ†ãƒ«ã‚’äºˆç´„ã—ã¾ã—ãŸã€‚æ˜¨å¹´ã®åçœãŒæ´»ã‹ã•ã‚Œã¦ã„ã‚‹ã€‚
æ˜¨å¹´ã®ç››ã‚Šä¸ŠãŒã‚Šã¯ X ã§ç¢ºèªã—ã¦ã„ã¦ã€ã†ã‚‰ã‚„ã¾ã—ãƒ¼ã¨æ€ã£ã¦ã¾ã—ãŸã€‚ãã“ã‹ã‚‰ä»Šå¹´ã®æœˆåˆŠ PHP con ãŒå§‹ã¾ã£ãŸã¨è¨€ã£ã¦ã‚‚éè¨€ã§ã¯ãªã„ã‚ã‘ã§ã€ã¨ã¦ã‚‚æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã¡ãªã¿ã«ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«ã¯ãƒ–ãƒ­ã‚°è¨˜äº‹ã«ã‚‚ã—ãŸ&lt;a href="/2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-1.html"&gt;GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜&lt;/a&gt;ã¨&lt;a href="/2024/06/03/get-started-with-graphql-api-server-with-appsync-js.html"&gt;APPSYNC_JS (AppSync JavaScript) ã§å§‹ã‚ã‚‹ GraphQL API ã‚µãƒ¼ãƒãƒ¼&lt;/a&gt;ã«ã¤ã„ã¦å‡ºã—ãŸã®ã§ã™ãŒã€ã©ã¡ã‚‰ã‚‚è½é¸ã—ã¾ã—ãŸã€‚
ãƒ—ãƒ­ãƒãƒ¼ã‚¶ãƒ«ã®å€ç‡ãŒã‚„ã°ã™ãã‚‹ï¼ˆåƒ•ãŒæ™®æ®µã®ä»•äº‹ PHP ã˜ã‚ƒãªã„ã®ã§ã€æ—¬ãªè©±é¡Œã˜ã‚ƒãªã„ã¨ã„ã†ã®ã¯å¦å®šã§ããªã„äº‹å®Ÿã§ã™ãŒwï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;2019å¹´ãŒ3å¹´ã¶ã‚Š2å›ç›®ã ã£ãŸã®ã§ã€ä»Šå›ã¯5å¹´ã¶ã‚Š3å›ç›®ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h2&gt;å‰æ—¥å…¥ã‚Š&lt;/h2&gt;

&lt;p&gt;ä»Šå›ã‚‚å‰æ—¥å…¥ã‚Šã—ã¾ã—ãŸãŒã€ã„ããªã‚Šé£›è¡Œæ©ŸãŒé…å»¶ã™ã‚‹ã¨ã„ã†ãƒˆãƒ©ãƒ–ãƒ«ã«ã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;ç¦å²¡è¡Œã®é£›è¡Œæ©ŸãŒ40åˆ†é…å»¶ã€‚ãƒ©ã‚¦ãƒ³ã‚¸ã§æš‡ã¤ã¶ã—&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1803936271016112448?ref_src=twsrc%5Etfw"&gt;June 20, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;ã“ã®æ™‚ç‚¹ã§ã¯ 9:00 ç™ºãŒ 9:40 ã«ãªã£ãŸã ã‘ã ã£ãŸã‘ã©ã€ã•ã‚‰ã« 15åˆ†é…å»¶ã¨ãªã£ã¦ 9:55 ç™ºã«ã€‚
æ¢…é›¨æ™‚æœŸã ã—é›¨ã®å½±éŸ¿ã‚‚ã‚ã‚‹ã®ã§ã—ã‹ãŸãŒãªã„ã§ã™ã­ã€‚å‰æ—¥å…¥ã‚Šã§ã‚ˆã‹ã£ãŸã¨ãƒã‚¸ãƒ†ã‚£ãƒ–ã«æ‰ãˆã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ç¦å²¡ã«åˆ°ç€ã—ãŸã‚‰ &lt;a href="https://wework.co.jp/location/fukuoka/daimyo"&gt;WeWork å¤§å&lt;/a&gt;ã¸ã€‚æ°¸å’Œã‚·ã‚¹ãƒ†ãƒ ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã§ã¯æ±äº¬æ”¯ç¤¾ãŒWeWorkäº¬æ©‹å†…ã«ãªã£ãŸãŸã‚ã€ä»Šå›ã®ã‚ˆã†ã«ç¦å²¡ã«å‰æ—¥å…¥ã‚Šã—ã¦ã‚‚WeWorkæ‹ ç‚¹ãŒã‚ã‚Œã°ä½œæ¥­ã§ãã‚‹ã®ã§ã¨ã¦ã‚‚ä¾¿åˆ©ã€‚å¤•æ–¹ã‹ã‚‰ã¯è¢‹è©°ã‚ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã«ç”³ã—è¾¼ã‚“ã§ã„ãŸã®ã§ã€ãã‚Œã¾ã§ä½œæ¥­ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŠæ˜¼ã¯WeWorkè¿‘ãã«ã‚ã£ãŸã‚¦ã‚§ã‚¹ãƒˆã¸ã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;&lt;a href="https://twitter.com/hashtag/phpconfuk?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#phpconfuk&lt;/a&gt;&lt;br&gt;ã¤ã‘å¿˜ã‚ŒãŸã€‚ã‚¦ã‚§ã‚¹ãƒˆå¤©ç¥ã«ã¦ &lt;a href="https://t.co/qEIf833QCB"&gt;https://t.co/qEIf833QCB&lt;/a&gt;&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1804015303929795068?ref_src=twsrc%5Etfw"&gt;June 21, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;å¤•æ–¹ãã‚‰ã„ã«ãªã£ãŸã‚‰WeWorkã«çŸ¥ã£ã¦ã„ã‚‹äººãŸã¡ãŒç¶šã€…æ¥ã¦ï¼Ÿï¼Ÿã£ã¦ãªã£ãŸã‚“ã§ã™ãŒ&lt;a href="https://prtimes.connpass.com/event/319375/"&gt;ã€éå…¬å¼ã€‘PHPã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡2024ãƒ»å‰æ—¥Meetup&lt;/a&gt; ãŒã‚ã£ãŸã‚ˆã†ã§ã™ã€‚æ°—ãŒä»˜ã„ã¦ãªã‹ã£ãŸ&amp;hellip;.&lt;/p&gt;

&lt;p&gt;ãã—ã¦è¢‹è©°ã‚ã‚’ã‚„ã£ã¦ãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="zxx" dir="ltr"&gt;&lt;a href="https://t.co/3yToNsWugm"&gt;pic.twitter.com/3yToNsWugm&lt;/a&gt;&lt;/p&gt;&amp;mdash; cakephper ichikawa (@cakephper) &lt;a href="https://twitter.com/cakephper/status/1804161620920406368?ref_src=twsrc%5Etfw"&gt;June 21, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;ãã®ã‚ã¨ã¯ç‰¹ã«äºˆå®šã‚‚ãªã‹ã£ãŸã®ã§ã€ã‚¨ãƒ¼ãƒ«ã‚ºã¸ã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;ã‚¦ã‚§ãƒ¼ã‚¤ &lt;a href="https://t.co/gvj1XTXZ5q"&gt;pic.twitter.com/gvj1XTXZ5q&lt;/a&gt;&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1804110592988582281?ref_src=twsrc%5Etfw"&gt;June 21, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;é‡ç”Ÿã®PHPerã«ã‚‚å‡ºä¼šãˆãŸã‚Šã€å¸°ã‚ã†ã‹ãªãƒ¼ã¨æ€ã£ãŸã‚‰åº—é•·ã‹ã‚‰å¸‚å·ã•ã‚“æ¥ã‚‹ã‚ˆã€ã£ã¦æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸã®ã§ãƒ“ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦åˆæµã€‚
ãã®ã‚ã¨ã¯ Rummy è¡Œã£ã¦ç¾å‘³ã—ã„ãƒ©ãƒ ã‚’ã„ãŸã ã„ã¦ã€ç· ã‚ã«ã‚„ã¾ã¡ã‚ƒã‚“ã§ãƒ©ãƒ¼ãƒ¡ãƒ³ã¨ãƒ“ãƒ¼ãƒ«ã‚’ï¼ˆ3æ™‚ã¡ã‚‡ã„ã«å¯ã¾ã—ãŸï¼‰ã€‚&lt;/p&gt;

&lt;h2&gt;å½“æ—¥&lt;/h2&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨æœèµ·ãã‚Œã¦ä¼šå ´ã¸ç§»å‹•ã—ã¦ã„ãŸã®ã§ã™ãŒã€2æ—¥ç¶šã‘ã¦æœã«ãƒˆãƒ©ãƒ–ãƒ«ãŒ&amp;hellip;&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;ç¥‡åœ’é§…ã§å‡ºã‚ˆã†ã¨æ€ã£ãŸã‚‰SUICAãŒç„¡ã„ã€‚ãŸã¶ã‚“å¤©ç¥ã®é§…ã§ãƒã‚±ãƒƒãƒˆã«å…¥ã‚Œã‚‹å‰ã«è½ã¨ã—ãŸã£ã½ã„&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1804311768019431566?ref_src=twsrc%5Etfw"&gt;June 22, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;100å††å‡ä¸€ã§å£²ã£ã¦ã‚‹ã“ã®æ‰‹ã®å®šæœŸå…¥ã‚Œã‚’ä½¿ã£ã¦ãŸã‚“ã§ã™ãŒã€åˆã‚ã¦ä¸­èº«ã ã‘è½ã¡ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="https://jp.daisonet.com/cdn/shop/products/4549131477177_10_d815145c-9bf2-4c6f-809e-0a7ae83867ef_130x.jpg?v=1619573190" alt="" /&gt;&lt;/p&gt;

&lt;p&gt;ç¥‡åœ’é§…ã§é§…å“¡ã•ã‚“ã«å¤©ç¥é§…ã¸é€£çµ¡ã—ã¦ã‚‚ã‚‰ã£ã¦ç¢ºèªã—ãŸã‚‰ã€ãã‚Œã£ã½ã„ã®ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§Uã‚¿ãƒ¼ãƒ³ã—ã¦ç„¡äº‹æˆ»ã£ã¦ãã¾ã—ãŸã€‚
æ—¥æœ¬ã§ã‚ˆã‹ã£ãŸã€‚æ”¹æœ­é€šéã—ã¦ã™ããƒã‚±ãƒƒãƒˆã«å…¥ã‚ŒãŸï¼ˆã„ã¤ã‚‚ãã†ï¼‰ã®ã§ã€æ”¹æœ­è¿‘ãã«è½ã¡ãŸã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚
ã‚®ãƒªã‚®ãƒªé–‹å§‹æ™‚é–“ã«ã¯é–“ã«åˆã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;éš”æœˆPHPã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³&lt;a href="https://twitter.com/hashtag/phpconfuk?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#phpconfuk&lt;/a&gt;&lt;br&gt;&lt;br&gt; &lt;a href="https://t.co/ObAL9Tbeuy"&gt;https://t.co/ObAL9Tbeuy&lt;/a&gt; &lt;a href="https://t.co/lTfGcPuNX2"&gt;pic.twitter.com/lTfGcPuNX2&lt;/a&gt;&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1804321244311150838?ref_src=twsrc%5Etfw"&gt;June 22, 2024&lt;/a&gt;&lt;/blockquote&gt; 

&lt;p&gt;ä»Šå›ã¯åˆå‰ä¸­ã¯ãƒ¡ã‚¤ãƒ³ä¼šå ´ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å‚åŠ ã—ã¦ã¾ã—ãŸã€‚PHPé¤Šåˆ†ãŒãŸãã•ã‚“è£œå……ã•ã‚Œã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://fortee.jp/phpcon-fukuoka-2024/proposal/559508e2-68c6-4b59-ab3a-3da6a6cccb0f"&gt;PHP ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œãƒ¢ãƒ‡ãƒ«ã‚’ç†è§£ã™ã‚‹ by æ–°åŸ é›…å¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://fortee.jp/phpcon-fukuoka-2024/proposal/7efe2276-f8e0-4610-8586-e3901230e231"&gt;Fat Controller ã¯æ‚ªã‹ï¼Ÿ ~å…‰ã®Fat Controllerãƒ»é—‡ã®ã‚¬ãƒªController~ by ã‚¹ã‚¿ãƒ°ãƒ«&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://fortee.jp/phpcon-fukuoka-2024/proposal/bdf2f1de-82f0-4468-989a-cb1fb70263c1"&gt;10ç¤¾ä»¥ä¸Šã®CTO/æŠ€è¡“é¡§å•ã‚’çµŒé¨“ã—ã¦è¦‹ãˆãŸã€æŠ€è¡“çµ„ç¹”ã«èµ·ã“ã‚‹èª²é¡Œã¨å¯¾ç­– by å¤§è°· ç¥å¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://fortee.jp/phpcon-fukuoka-2024/proposal/c2955129-264c-4807-b840-747c1ba23e08"&gt;æœ‰åŠ¹ãªä½¿ã„æ–¹ã‚’æ­£ã—ãç†è§£ã—ã¦å®Ÿè£…ã™ã‚‹PHP8.3ã®æœ€æ–°æ©Ÿèƒ½ by æ¸…å®¶å²éƒ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãŠæ˜¼ã¯ç¦å²¡ã®äººã¨é£Ÿã¹ãŸã„ãªãƒ¼ã¨æ€ã£ã¦ã€&lt;a href="https://x.com/nojimage"&gt;@nojimage&lt;/a&gt;ã•ã‚“ã«å£°ã‚’ã‹ã‘ã¦ã”ä¸€ç·’ã•ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;åˆå¾Œã¯ã‚¢ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ä¼šå ´ã€ã‚¹ãƒãƒ³ã‚µãƒ¼ãƒ–ãƒ¼ã‚¹ã€å»Šä¸‹ã§äº¤æµã—ã¦ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;æœ€æ–°ç‰ˆğŸ‘€&lt;br&gt; &lt;a href="https://twitter.com/hashtag/phpconfuk?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#phpconfuk&lt;/a&gt; &lt;a href="https://t.co/Ff4dSAI9jI"&gt;pic.twitter.com/Ff4dSAI9jI&lt;/a&gt;&lt;/p&gt;&amp;mdash; Kanon (@samurai_se) &lt;a href="https://twitter.com/samurai_se/status/1804393754780184724?ref_src=twsrc%5Etfw"&gt;June 22, 2024&lt;/a&gt;&lt;/blockquote&gt;

&lt;p&gt;16:00ã‹ã‚‰ã¯ã‚¢ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ä¼šå ´ã§ã€ä¼šç¤¾ã§ä»Šæœˆ2å›Webã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’ã‚„ã£ãŸã®ã‚’ç™ºè¡¨ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="ja" dir="ltr"&gt;ã•ãã»ã©ã‚¢ãƒ³ã‚«ãƒ³ã§è©±ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã§ã™ã€‚&lt;br&gt;Webã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’ç¤¾å†…ã§ã‚„ã£ã¦ã¿ãŸ&lt;a href="https://t.co/2jjPp9vFx2"&gt;https://t.co/2jjPp9vFx2&lt;/a&gt;&lt;a href="https://twitter.com/hashtag/phpconfuk?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#phpconfuk&lt;/a&gt;&lt;/p&gt;&amp;mdash; ã—ãšã²ã“ (@sizuhiko) &lt;a href="https://twitter.com/sizuhiko/status/1804416464855675307?ref_src=twsrc%5Etfw"&gt;June 22, 2024&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;å°‚é–€å®¶ã˜ã‚ƒãªãã¦ã‚‚è‰¯ã„æ•™æãŒã‚ã‚‹ã®ã§ã€Œã¿ã‚“ãªã§å‹‰å¼·ä¼šã¦ãã«ã‚„ã£ã¦ã¿ã‚‹ã¨è‰¯ã„ã‚ˆã€ã¨ã„ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒä¼ã‚ã£ãŸã‚‰è‰¯ã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã®ã‚ã¨ã¯æ‡‡è¦ªä¼šï¼ˆå½“æ—¥ãƒã‚±ãƒƒãƒˆã‚ã£ã¦å¬‰ã—ã‹ã£ãŸï¼‰â†’ éå…¬å¼2æ¬¡ä¼š â†’ ã‚„ã¾ã¡ã‚ƒã‚“ ã®æµã‚Œã§ã—ãŸã€‚
åˆã‚ã¾ã—ã¦ã®æ–¹ã€ãŠä¹…ã—ã¶ã‚Šã®æ–¹ã¨ãŸãã•ã‚“è©±ã›ã¾ã—ãŸã€‚æ¥½ã—ã‹ã£ãŸï¼&lt;/p&gt;

&lt;h2&gt;å¾Œæ—¥&lt;/h2&gt;

&lt;p&gt;å¸°äº¬ã¾ã§ã®æ™‚é–“ã¯&lt;a href="https://fusic.connpass.com/event/314905/"&gt;6/23(æ—¥)ã€Œï¼ˆéå…¬å¼ï¼‰PHP Conference Fukuoka After Hack!!ã€&lt;/a&gt;ã«å‚åŠ ã—ã¦ã€ã“ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;2019å¹´ã®è¨˜äº‹ã®æœ€å¾Œã¯&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;PHPã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ç¦å²¡ã€æ¥å¹´ã‚‚å‚åŠ ã§ãã‚‹ã¨è‰¯ã„ãªãƒ¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã§çµ‚ãˆã¦ã„ã¾ã—ãŸã€‚
ã—ã‹ã—ç¿Œå¹´ãã‚ŒãŒå½“ãŸã‚Šå‰ã®å…‰æ™¯ã§ãªã„ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã™ã€‚å½“æ™‚ã¯ãã‚“ãªã“ã¨ã«ãªã‚‹ã¨æ€ã£ã¦ã„ãªã‹ã£ãŸã§ã™ã‚ˆã­ã€‚
ã‚‚ã¡ã‚ã‚“ãã†ã„ã£ãŸã“ã¨ã ã‘ã§ãªãã€å½“ãŸã‚Šå‰ã«ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒã‚ã‚‹è¨³ã§ãªãã€å¤šãã®äººã®åŠªåŠ›ã«ã‚ˆã£ã¦é–‹å‚¬ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§æ„Ÿè¬ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã¯ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å…¥ã‚Œã¦ã‹ã‚‰å¸°ã‚Šã¾ã™ã€‚ãã—ã¦ã¾ãŸå‚åŠ ã§ãã‚‹ã‚ˆã†ã«é¡˜ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>APPSYNC_JS (AppSync JavaScript) ã§å§‹ã‚ã‚‹ GraphQL API ã‚µãƒ¼ãƒãƒ¼</title>
    <link rel="alternate" href="http://blog.url.com/2024/06/03/get-started-with-graphql-api-server-with-appsync-js.html"/>
    <id>http://blog.url.com/2024/06/03/get-started-with-graphql-api-server-with-appsync-js.html</id>
    <published>2024-06-03T14:32:00+09:00</published>
    <updated>2024-06-03T18:12:20+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;a href="https://aws.amazon.com/jp/appsync/"&gt;AppSync&lt;/a&gt; ã¯ã€AWSä¸Šã§ GraphQL API ã‚’ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã«æ§‹ç¯‰ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://aws.amazon.com/jp/amplify/"&gt;Amplify&lt;/a&gt; ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã‚‚æœ‰åã§ã™ã­ã€‚
Amplify ã‹ã‚‰ DynamoDB ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãã‚„ã€é€šå¸¸ã® CRUD ã ã‘ã§ãªãã‚¯ã‚¨ãƒªæ¡ä»¶ã‚’æŒ‡å®šã—ãŸã„å ´åˆãªã©ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ã™ã‚‹ã¨ãã¯ã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒªã‚¾ãƒ«ãƒãƒ¼ã‚’ä¿®æ­£ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
ã“ã®ã¨ãå¾“æ¥ã¯ &lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-mapping-template-reference.html"&gt;VTL&lt;/a&gt; ã¨ã„ã†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨€èªã‚’å­¦ã¶å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€ä»Šæ—¥ã§ã¯JavaScript(TypeScript)ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€æ–°ã® Amplify Gen2 ã§ã‚‚ TypeScript ã§ãƒªã‚¾ãƒ«ãƒã‚’æŒ‡å®šã§ãã¾ã™ã€‚&lt;a href="https://dev.classmethod.jp/articles/amplify-gen2-nextjs/"&gt;Amplify Gen2ã§NextJSã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆã¾ã§&lt;/a&gt; ã¨ã„ã†ã‚¯ãƒ©ãƒ¡ã‚½ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§å­¦ã¶&lt;/h3&gt;

&lt;p&gt;AWS ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã‚¬ã‚¤ãƒ‰ã«&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/tutorials-js.html"&gt;ãƒªã‚¾ãƒ«ãƒãƒ¼ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« (JavaScript)&lt;/a&gt;ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’èª­ã‚ã°ç†è§£ãŒé€²ã¿ã¾ã™ã€‚
ç‰¹ã«&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/tutorial-dynamodb-resolvers-js.html"&gt;ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«: DynamoDB JavaScript ãƒªã‚¾ãƒ«ãƒãƒ¼&lt;/a&gt;ã‚’èª­ã‚€ã¨ã€DynamoDB ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ GraphQL API ã®ä½œã‚Šæ–¹ãŒç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h4&gt;TypeScript ã‚’ä½¿ã†&lt;/h4&gt;

&lt;p&gt;Amplify Gen2 ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€ã™ã¹ã¦ TypeScript ã§è¨˜è¿°ã—ã¦ã„ã¦ Amplify ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ Lint ãƒ«ãƒ¼ãƒ«ãªã©ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚
ä¸€æ–¹ã§ AppSync ã‚’ç›´æ¥ä½¿ã†ï¼ˆãŸã¨ãˆã° Terraform ã‚„ CDK ãªã©ã‚’ä½¿ã£ã¦ AppSync ã® API ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ï¼‰å ´åˆã¯ã€JavaScript ãƒªã‚¾ãƒ«ãƒãƒ¼ã®æ¦‚è¦ã®ä¸­ã«ã‚ã‚‹&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-reference-overview-js.html#additional-utilities"&gt;ãƒãƒ³ãƒ‰ãƒ«ã€TypeScriptã€ã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—&lt;/a&gt;ã‚’èª­ã‚€ã¨è‰¯ã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã‚’èª­ã‚€ã¨ã€ä»¥ä¸‹ã®ç†è§£ãŒæ·±ã¾ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;esbuild ã‚’ä½¿ã£ã¦ TypeScript ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒ³ãƒ‰ãƒ«ã—ã¦ 1 ã¤ã® JavaScript ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹æ–¹æ³•&lt;/li&gt;
&lt;li&gt;ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã‚’ä½œã‚‹ã¨ãã® TypeScript è¨­å®šã‚„è¨˜è¿°æ–¹æ³•ï¼ˆä¸»ã«å‹å®šç¾©ï¼‰&lt;/li&gt;
&lt;li&gt;GraphQL ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã‹ã‚‰ TypeScript  å‹å®šç¾©ã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•&lt;/li&gt;
&lt;li&gt;Linter ã®è¨­å®š&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç‰¹ã« Linter ã®è¨­å®šã¯é‡è¦ã«ãªã‚Šã¾ã™ã€‚
è©³ã—ãã¯&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-reference-overview-js.html#utility-resolvers"&gt;ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£&lt;/a&gt;ã® &lt;code&gt;eslint ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®š&lt;/code&gt; ã§ç¢ºèªã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;APPSYNC_JS ã®åˆ¶ç´„&lt;/h4&gt;

&lt;p&gt;ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã‚’ JavaScript ã§è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã¯(VTLã‚’æ›¸ãã“ã¨ã«æ¯”ã¹)å¬‰ã—ã„ã“ã¨ãªã®ã§ã™ãŒã€ã‚ãã¾ã§ã‚‚ JavaScript ã®æ–‡æ³•ãŒä½¿ãˆã‚‹ç¨‹åº¦ã¨æ€ã£ã¦ã„ãŸæ–¹ãŒè‰¯ã„ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“å˜ä½“ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒæ›¸ãã‚„ã™ã„ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆã¯ã‚ã‚Šã¤ã¤ã‚‚ã€åˆ¶ç´„ãŒéå¸¸ã«å¤šã„ã“ã¨ã‚’ç†è§£ã—ãªãã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ã‚³ãƒ¼ãƒ‰ã‚µã‚¤ã‚º: 32,000æ–‡å­—&lt;/li&gt;
&lt;li&gt;å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«: npm ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã‚ˆã†ãªã‚‚ã®ã¯ã€é–‹ç™ºãƒ„ãƒ¼ãƒ«ã‚’é™¤ã„ã¦ã»ã¼ä½¿ãˆãªã„ã¨æ€ã£ã¦ã„ãŸã»ã†ãŒè‰¯ã„&lt;/li&gt;
&lt;li&gt;ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹: ã§ããªã„ã€‚ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦è¡Œã†&lt;/li&gt;
&lt;li&gt;ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹: ã§ããªã„&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒå‘ã„ã¦ã„ã‚‹ã‹ã¯ã€&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-reference-overview-js.html#choosing-data-source"&gt;ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¨ Lambda ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹çµŒç”±ã®ãƒ—ãƒ­ã‚­ã‚·ã®ã©ã¡ã‚‰ã‹ã‚’é¸æŠã™ã‚‹&lt;/a&gt;ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒ©ãƒ³ã‚¿ã‚¤ãƒ åˆ¶ç´„&lt;/h4&gt;

&lt;p&gt;æ¬¡ã®åˆ¶ç´„ã‚’ç†è§£ã™ã‚‹ã¨ãèª­ã‚€ã¹ãã¯&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/supported-features.html"&gt;ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ©Ÿèƒ½&lt;/a&gt;ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã•ãã»ã©&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ã‚ãã¾ã§ã‚‚ JavaScript ã®æ–‡æ³•ãŒä½¿ãˆã‚‹ç¨‹åº¦ã¨æ€ã£ã¦ã„ãŸæ–¹ãŒè‰¯ã„&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã¨æ›¸ãã¾ã—ãŸãŒã€ãã‚ŒãŒã“ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã‚’ç†è§£ã—ãŸä¸Šã§ã®æ„Ÿæƒ³ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚&lt;/p&gt;

&lt;h5&gt;ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;try / catch / finally&lt;/li&gt;
&lt;li&gt;throw

&lt;ul&gt;
&lt;li&gt;ä»£ã‚ã‚Šã« &lt;code&gt;util.error()&lt;/code&gt; é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;continue&lt;/li&gt;
&lt;li&gt;do-while&lt;/li&gt;
&lt;li&gt;for

&lt;ul&gt;
&lt;li&gt;ãŸã ã— for-in ãŠã‚ˆã³ for-of å¼ã¯ä¾‹å¤–ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;while&lt;/li&gt;
&lt;li&gt;ãƒ©ãƒ™ãƒ«ä»˜ãã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ&lt;/li&gt;
&lt;/ul&gt;

&lt;h5&gt;æ•°å­¦&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;æ¬¡ã® Math é–¢æ•°ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

&lt;ul&gt;
&lt;li&gt;Math.random()&lt;/li&gt;
&lt;li&gt;Math.min()&lt;/li&gt;
&lt;li&gt;Math.max()&lt;/li&gt;
&lt;li&gt;Math.round()&lt;/li&gt;
&lt;li&gt;Math.floor()&lt;/li&gt;
&lt;li&gt;Math.ceil()&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h5&gt;é–¢æ•°&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;applyã€bind call ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/li&gt;
&lt;li&gt;é–¢æ•°ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/li&gt;
&lt;li&gt;é–¢æ•°ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/li&gt;
&lt;li&gt;å†å¸°çš„ãªé–¢æ•°å‘¼ã³å‡ºã—ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h5&gt;promise&lt;/h5&gt;

&lt;p&gt;éåŒæœŸãƒ—ãƒ­ã‚»ã‚¹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚‰ãšã€Promise ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;h4&gt;åˆ¶ç´„ã‚’ç†è§£ã—ãŸä¸Šã§é€²ã‚ã‚‹&lt;/h4&gt;

&lt;p&gt;ã¨é€”ä¸­ã¾ã§ã§ã‚‚èª­ã‚“ã æ®µéšã§ã€ã“ã‚Œã¯ &lt;code&gt;JavaScript ã®æ–‡æ³•ãŒä½¿ãˆã‚‹ç¨‹åº¦&lt;/code&gt; ã«ãªã‚‹ã¨ã„ã†ã“ã¨ãŒç†è§£ã§ããŸã§ã—ã‚‡ã†ã€‚
å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã“ã‚Œã‚‰ã®è¨˜è¿°ã‚’ä½¿ã£ã¦ã„ãªã„ã‹ã¨ã„ã†ã¨ã€å¤§æŠµã©ã‚Œã‹1ã¤ãã‚‰ã„ã¯è©²å½“ã—ã¦ã—ã¾ã„ã¾ã™ã€‚
ã¤ã¾ã‚Šå®Ÿè³ªçš„ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’é™¤ã„ã¦ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã«ã¯ã€å¤–éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã†ã¨ã„ã†é¸æŠè‚¢ã¯ãªããªã‚Šã¾ã™ã€‚
ãŸã å®Ÿéš›ã«ã¯ãã‚Œã§ã¯å›°ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€çµ„ã¿è¾¼ã‚€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚„ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ãªã©ãŒæƒã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/resolver-util-reference-js.html"&gt;ãƒªã‚¾ãƒ«ãƒãƒ¼ãŠã‚ˆã³é–¢æ•°ã® JavaScript runtime æ©Ÿèƒ½&lt;/a&gt;ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€ãã‚Œã‚‰ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚„ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¸ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»ã§ãã‚‹ã®ã§ã€ç¢ºèªã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã ä¸€éƒ¨ VTL ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯æ›¸ã„ã¦ã‚ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚„ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ã†ã¡ã€ JavaScript ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¯è¨˜è¿°ã•ã‚Œã¦ã„ãªã„ã‘ã©ã€åˆ©ç”¨å¯èƒ½ãªã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒã‚°ã¨æ€ã„ã¾ã™ãŒã€TypeScript ã§ä½œã£ã¦ã„ã‚‹å ´åˆã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§åˆ©ç”¨ã™ã‚‹å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€VTLã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’çªãåˆã‚ã›ã¦ã¿ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã¨ãˆã°å¤šãã® Math é–¢æ•°ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ä»£ã‚ã‚Šã«ã€mathãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒã‚ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã¯ JavaScript å´ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã¯æ¼ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“åˆ©ç”¨å¯èƒ½ãªã®ã§ã€ã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã‹ã¯ VTL å´ã®&lt;a href="https://docs.aws.amazon.com/ja_jp/appsync/latest/devguide/math-helpers-in-util-math.html"&gt;$util.math ã® math ãƒ˜ãƒ«ãƒ‘ãƒ¼&lt;/a&gt;ã‚’èª­ã‚€ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;Lambda ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ã†ã¨ã„ã†é¸æŠ&lt;/h3&gt;

&lt;p&gt;ã‚‚ã¡ã‚ã‚“ã€ã“ã‚Œã¯ AppSync ã®ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã§ JavaScript ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã®åˆ¶ç´„ã§ã‚ã£ã¦ã€AppSync ã®ãƒªã‚¾ãƒ«ãƒã‹ã‚‰ Lambda ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’å‘¼ã³å‡ºã—ã¦ãã¡ã‚‰ã§å‡¦ç†ã™ã‚‹åˆ†ã«ã¯åˆ¶ç´„ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;AppSync ã®ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã®å®Ÿè¡Œã«é–¢ã™ã‚‹æ–™é‡‘ãŒ AppSync ã«å…¨ã¦å«ã¾ã‚Œã¦ã„ã‚‹ã®ã«å¯¾ã—ã€Lambda ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã¯åˆ¥é€” Lambda ã®æ–™é‡‘ãŒã‹ã‹ã‚‹ã®ã§ã€Lambda ã§ãªã„ã¨ã§ããªã„å ´åˆã ã‘ã¨ã—ã¦ãŠãã¨ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h3&gt;å›°ã£ã¦ã„ã‚‹ã“ã¨&lt;/h3&gt;

&lt;p&gt;AppSync ã® JavaScript ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã¯æ§˜ã€…ãªåˆ¶ç´„ãŒã‚ã‚‹ã®ã§ã€AWS ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åˆ¶ç´„é•åã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“æ‰‹å…ƒã®ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã£ã¦ã„ã¦ã‚‚ ESLint ã®ãƒ«ãƒ¼ãƒ«ã§ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ã¨ãã« TypeScript ã§è¨˜è¿°ã™ã‚‹ã¨ã€ã‚ˆã‚Šå³å¯†ã« ESLint ã®ãƒ«ãƒ¼ãƒ«ã§ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å¤šãã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã§ã¯ã€ã“ã“ã§æ›¸ãå›°ã‚Šã”ã¨ã«ã¯é­é‡ã—ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ã—ã‹ã—é‹è‰¯ãï¼Ÿãã®äº‹è±¡ã‚’å¼•ãå½“ã¦ãŸã®ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰&lt;/h4&gt;

&lt;p&gt;ä¾‹ã¨ã—ã¦ï¼ˆå®Ÿéš›ã®ã‚±ãƒ¼ã‚¹ã¨ã»ã¼ä¸€ç·’ã§ã™ãŒï¼‰ã€DynamoDB ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ã€è¤‡æ•°ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«è·¨ã£ãŸ TransactWriteItem ã‚„ BatchWriteItem ã‚’å®Ÿè¡Œã—ãŸã„ã¨ä»®å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦&lt;a href="https://github.com/aws-samples/amazon-dynamodb-item-tagging/"&gt;Amazon DynamoDB Item Tagging&lt;/a&gt;ã¨ã„ã†ã€aws-samples ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ©ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/aws-samples/amazon-dynamodb-item-tagging/blob/main/src/lambda/create.ts#L49"&gt;DynamoDBã«ä¿å­˜ã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹&lt;/a&gt; ã¯ Lambda ã®å®Ÿè£…ã§ã™ãŒã€ã“ã“ã§ã¯æ›¸ãè¾¼ã¿ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚
ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã‚¿ã‚¹ã‚¯ã‚’ä¿å­˜ã™ã‚‹ã¨ãã«ã‚¿ã‚°ä»˜ã‘ã•ã‚Œã¦ã„ãŸå ´åˆã¯ã€ã‚¿ã‚°ã® &lt;code&gt;WriteRequest&lt;/code&gt; ã‚’é…åˆ—ã«è¿½åŠ ã—ã¦ã„ã¾ã™ï¼ˆ&lt;a href="https://github.com/aws-samples/amazon-dynamodb-item-tagging/blob/main/src/lambda/create.ts#L88"&gt;L88&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç‰¹ã«ä½•ã®å¤‰å“²ã‚‚ç„¡ã„ã€DynamoDB ã§ TransactWriteItem ã‚„ BatchWriteItem ã‚’ä½¿ã†ã¨ãã«æ›¸ããã†ãªã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€ã“ã“ã«è½ã¨ã—ç©´ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ TypeScript ã§ã€é…åˆ—ã«è¿½åŠ ã™ã‚‹ã¨ã &lt;code&gt;WriteRequest&lt;/code&gt; å‹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚ã‚¿ã‚°ä»˜ã‘ã™ã‚‹ã¨ãã‚‚è¿½åŠ ã™ã‚‹å‹ã¯ &lt;code&gt;WriteRequest&lt;/code&gt; ãªã®ã§ã€é…åˆ—ã«è¿½åŠ ã•ã‚Œã‚‹å‹ãŒä¸€è‡´ã™ã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;h4&gt;åŒã˜ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ AppSync ã®ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã§æ›¸ãã¨ TS2322 ã«ãªã‚‹&lt;/h4&gt;

&lt;p&gt;ã§ã¯åŒã˜ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’ AppSync ã®ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã§æ›¸ã„ãŸã¨ã—ã¾ã™ã€‚
TypeScript ã§æ›¸ã„ã¦ã„ã¦ã€ AppSync ãŒæŒ‡å®šã™ã‚‹ ESLint ã®ãƒ«ãƒ¼ãƒ«ãªã©ãŒã‚ã£ã¦ã‚‚å•é¡Œãªãé€šéã™ã‚‹ã¨ã—ã¾ã™ã€‚
ã§ã¯çµæœã‚’ esbuild ã§ãƒãƒ³ãƒ‰ãƒ«ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ãªã‚“ã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã¨ &lt;code&gt;TS2322&lt;/code&gt; ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãˆã£ã€AppSync ã£ã¦ JavaScript ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‘ã©ã€ TypeScript ã¯ã‚µãƒãƒ¼ãƒˆã—ã¦ãªã„ã‚ˆã­ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã®ãŒã€æœ€åˆã®é©šãã§ã™ã€‚
ã¾ãŸã¾ãŸãƒ¼ã€ã¨æ€ã£ã¦å…ˆé ­è¡Œã« &lt;code&gt;// @ts-nocheck&lt;/code&gt; ã‚’æ›¸ãã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãµããã£ï¼ä½•ã ã¨ã€ &lt;code&gt;tsc&lt;/code&gt; ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã‹ï¼Ÿï¼ã¨ã„ã†ç–‘æƒ‘ãŒç”Ÿã¾ã‚Œã¦ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã„ãšã‚Œã«ã›ã‚ˆã€ã“ã®ã¾ã¾ã§ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããªã„ã®ã§ã€ç¥æ§˜/AWSã‚µãƒãƒ¼ãƒˆæ§˜ã«å•ã„åˆã‚ã›ã‚’è¡Œã„ã¾ã—ãŸã€‚
ã“ã®å•ã„åˆã‚ã›ã€ã‚ã£ã¡ã‚ƒæœ€çµ‚å›ç­”ã¾ã§æ™‚é–“ã‹ã‹ã£ãŸã®ã§ã™&amp;hellip;..&lt;/p&gt;

&lt;p&gt;ã§ã€ç¾æ™‚ç‚¹ã“ã‚Œã®å›é¿ç­–ã¯ã€å…ˆé ­è¡Œã« &lt;code&gt;// @ts-nocheck&lt;/code&gt; ã‚’æ›¸ãã€ãŒæ­£å¼å›ç­”ã«ãªã‚Šã¾ã™ã€‚ã¾ã˜ã‹ãƒ¼&amp;hellip;.&lt;/p&gt;

&lt;p&gt;ç¾æ™‚ç‚¹ AppSync ã§ã¯ JavaScript ã®åˆ¶ç´„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã« JavaScript ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ TypeScript ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ãã†ã§ã™ã€‚ã¾ã˜ã‹ãƒ¼&amp;hellip;.&lt;/p&gt;

&lt;p&gt;å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã‚’å†åº¦ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚TypeScript ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å‹æƒ…å ±ã‚’å–ã‚Šé™¤ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;taskDbItem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="na"&gt;PutRequest&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="na"&gt;Item&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="c1"&gt;// we set the pk and sk to the item id. we prefix both with `task#` to allow filtering by task items&lt;/span&gt;
          &lt;span class="na"&gt;pk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;`task#&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;id&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="na"&gt;sk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;`task#&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;id&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="c1"&gt;// we are using a gsi to allow listing all items of a certain type, which in this case is task items&lt;/span&gt;
          &lt;span class="c1"&gt;// task: GSI key sharding&lt;/span&gt;
          &lt;span class="na"&gt;siKey1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;task&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="na"&gt;description&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;description&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="c1"&gt;// tags are duplicated here to simplify retrieval&lt;/span&gt;
          &lt;span class="na"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tags&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;RequestItems&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tableName&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;taskDbItem&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// next we write all the tags as separate DynamoDB items. We use the tag name as the partition key, and the tag value and the TaskItem id as a composite sort key.&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;entries&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;forEach&lt;/span&gt;&lt;span class="p"&gt;(([&lt;/span&gt;&lt;span class="nx"&gt;tagName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;tagValue&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;tagDbItem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="na"&gt;PutRequest&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="na"&gt;Item&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
              &lt;span class="na"&gt;pk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;`tag#&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;tagName&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
              &lt;span class="na"&gt;sk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;tagValue&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;#task#&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;id&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
          &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;
        &lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;RequestItems&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tableName&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tagDbItem&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="p"&gt;});&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã„ã†ã¦ &lt;code&gt;DocumentClient.WriteRequest&lt;/code&gt; ã¨ã„ã†å‹æƒ…å ±ãŒæ¶ˆãˆã‚‹ç¨‹åº¦ã§ã™ãŒã€ã“ã‚ŒãŒè½ã¨ã—ç©´ã§ã™ã€‚
å‹æƒ…å ±ãŒãªããªã£ãŸ &lt;code&gt;params.RequestItems[this.tableName]&lt;/code&gt; ã®é…åˆ—ã¯ã€TypeScript ã®å‹æ¨è«–ãŒåƒããŸã‚ã«ã€æœ€åˆã® &lt;code&gt;taskDbItem&lt;/code&gt; æ§‹é€ ã®å‹ã®è¦ç´ ã‚’æŒã¤ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã« &lt;code&gt;item.tags&lt;/code&gt; ãŒã‚ã£ãŸã¨ãã«æ§‹é€ ãŒç•°ãªã‚‹ &lt;code&gt;taskDbItem&lt;/code&gt; ã‚’é…åˆ—ã«è¿½åŠ ã—ã‚ˆã†ã¨ã—ãŸã‚‰ã€ã©ã†ãªã‚‹ã‹ã‚ã‹ã‚Šã¾ã™ã­ã€‚ &lt;code&gt;TS2322&lt;/code&gt; ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãŠãã‚‰ã Amplify Gen2 ã§ãƒªã‚¾ãƒ«ãƒã‚’ä¸Šæ›¸ãã—ã¦æ›¸ã„ãŸã¨ãã‚‚ã€åŒã˜ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¨æ¨æ¸¬ã•ã‚Œã¾ã™(CDKãŒesbuildã—ãŸçµæœã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã§)ã€‚&lt;/p&gt;

&lt;h4&gt;å›é¿ç­–ã‚’å…¥ã‚Œã‚‹&lt;/h4&gt;

&lt;p&gt;å›é¿ç­–ã®ã€å…ˆé ­è¡Œã« &lt;code&gt;// @ts-nocheck&lt;/code&gt; ã‚’å…¥ã‚Œã‚‹æ–¹æ³•ã¨ã—ã¦ã€esbuild ã® &lt;code&gt;banner&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
ãƒãƒ³ãƒ‰ãƒ«ã®ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/* eslint-disable */&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;build&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;esbuild&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;eslint&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;esbuild-plugin-eslint&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;glob&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;glob&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;files&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;glob&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;src/**/*.ts&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;build&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
  &lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;esm&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;esnext&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;platform&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;node&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;@aws-appsync/utils&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
  &lt;span class="na"&gt;outdir&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;dist/&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;entryPoints&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;files&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;plugins&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;eslint&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="na"&gt;useEslintrc&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt; &lt;span class="p"&gt;})],&lt;/span&gt;
  &lt;span class="na"&gt;banner&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="na"&gt;js&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;// @ts-nocheck&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã®ä¾‹ã®ã¾ã¾ã ã¨ã€å…¨éƒ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã« &lt;code&gt;// @ts-nocheck&lt;/code&gt; ãŒå…¥ã£ã¦ã—ã¾ã†ã®ã§ã€ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã«ã—ãŸã„å ´åˆã¯ã€esbuild ã‚’2ã¤ã«åˆ†å‰²ã—ã¦ç‰¹å®šã®ãƒªã‚¾ãƒ«ãƒã‚„é–¢æ•°ã ã‘ã«è¿½åŠ ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ãªãŠã€AWSã‚µãƒãƒ¼ãƒˆã¸ã¯ TypeScript ã‹ã¤ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã‚¬ã‚¤ãƒ‰ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Š &lt;code&gt;eslint ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®š&lt;/code&gt;  ã‚’ã—ã¦ã‚ã‚Œã°ã€åŒã˜åŠ¹æœã‚’æœŸå¾…ã§ãã‚‹ãã†ãªã®ã§ã€å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¥ã£ã¦ã„ãŸã¨ã—ã¦ã‚‚å¤§ããªå•é¡Œã¯ãªã„ã®ã‹ãªï¼Ÿã¨ã‚‚æ€ã„ã¾ã™ã€‚ &lt;code&gt;// @ts-nocheck&lt;/code&gt; ã‚’å…¥ã‚ŒãŸAPIã«ã¤ã„ã¦ã¯å¿µå…¥ã‚Šã«å‹•ä½œç¢ºèªã‚’ã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¡ãƒ³ãƒˆãŒå…¥ã£ã¦ã„ãŸã“ã¨ã‚‚ãŠä¼ãˆã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã¾ã¨ã‚&lt;/h3&gt;

&lt;p&gt;AppSync ã®ãƒªã‚¾ãƒ«ãƒãƒ¼ã‚„é–¢æ•°ã‚’ JavaScript (TypeScript) ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã€VTL ã‚’æ›¸ãã‚ˆã‚Šã‚‚ç”Ÿç”£æ€§ãŒã‚ãŒã£ãŸã‚Šã€ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦å“è³ªã‚’ç¶­æŒã—ã‚„ã™ããªã‚‹ã¨ã„ã£ãŸåŠ¹æœãŒæœŸå¾…ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ–¹ã§ TS2322 ã«é­é‡ã™ã‚‹ã¨ã„ã£ãŸè½ã¨ã—ç©´ã‚‚ã‚ã£ãŸã‚Šã™ã‚‹ã®ã§ã€æ³¨æ„ã¯å¿…è¦ã§ã™ã­ã€‚&lt;/p&gt;

&lt;p&gt;APPSYNC_JS ã§ãã†ã„ã£ãŸãƒˆãƒ©ãƒ–ãƒ«ã«ãªã£ãŸè¨˜äº‹ã ã£ãŸã‚Š StackOverflow ã®æŠ•ç¨¿ã ã£ãŸã‚Šã¯ã¾ã å°‘ãªã„ã®ã§ã€å•é¡Œã‚„å›é¿ç­–ãŒã‚ã‹ã£ãŸã‚‰ç©æ¥µçš„ã«è¨˜äº‹ã«ã—ã¦ãŠãã¨è‰¯ã„ã‹ãªï¼Ÿã¨ã„ã†ã®ãŒä»Šå›ãƒ–ãƒ­ã‚°è¨˜äº‹ã«ã™ã‚‹ãã£ã‹ã‘ã«ã‚‚ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;åƒ•ã¯ JavaScript ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã™ã”ãå¬‰ã—ã„ã®ã§ã€ä»Šå¾Œã‚‚ä½¿ã£ã¦ã„ããŸã„ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>CodeCommit ã§ Renovate ã‚’ä½¿ã†</title>
    <link rel="alternate" href="http://blog.url.com/2024/05/30/renovate-on-codecommit.html"/>
    <id>http://blog.url.com/2024/05/30/renovate-on-codecommit.html</id>
    <published>2024-05-30T17:03:00+09:00</published>
    <updated>2024-06-06T11:05:19+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;a href="https://www.mend.io/renovate/"&gt;Renovate&lt;/a&gt;ã¯ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ã‚’è‡ªå‹•åŒ–ï¼ˆPRã‚’ç”Ÿæˆã—ã¦ãã‚ŒãŸã‚Šã€ãƒãƒ¼ã‚¸ã—ã¦ãã‚ŒãŸã‚Šï¼‰ ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã€dependabot ãªã©ã¨ä¸¦ã‚“ã§æœ‰åãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;CodeCommit ã§ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ã‚’å…¬å¼ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æ¢ã—ã¦ã„ãŸã®ã§ã™ãŒã€Renovate ã—ã‹è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€é¸æŠè‚¢ã‚’æ¤œè¨ã™ã‚‹ã“ã¨ã‚‚ãªãå°å…¥ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;å°å…¥æ–¹æ³•&lt;/h3&gt;

&lt;p&gt;&lt;a href="https://docs.renovatebot.com/modules/platform/codecommit/"&gt;CodeCommit ã«å°å…¥ã™ã‚‹ãŸã‚ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å‰å›ã®ãƒ–ãƒ­ã‚°&lt;a href="/2024/05/28/using-codecommit-codebuild-like-a-github-and-the-actions.html"&gt;CodeCommit ã¨ CodeBuild ã‚’ GitHub ã¨ Actions ã®çµ„ã¿åˆã‚ã›ã®ã‚ˆã†ã«ä½¿ã†&lt;/a&gt;ã§ CodeCommit ã¨ CodeBuild ã®ç’°å¢ƒã¯è¨­å®šæ¸ˆã¿ã§ã€ã‹ã¤ PR ã«å¯¾ã—ã¦ãƒ“ãƒ«ãƒ‰çµæœãŒé€£æºã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;Renovate ã‚’å°å…¥ã™ã‚‹ã¨ãã‚‚ã“ã®æ‰‹é †ã¯é‡è¦ã§ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã¨ãã«ãƒ“ãƒ«ãƒ‰ãŒé€šéã™ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ã‚‚ã®ã¯ãƒãƒ¼ã‚¸ã§ããªã„ã®ã§ã€ã¾ãšå°å…¥å‰ã«é€£æºã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h4&gt;AWS ç’°å¢ƒã®è¨­å®š&lt;/h4&gt;

&lt;p&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã©ãŠã‚Š IAM ã‚„ Role ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚
ã“ã“ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã‚„ã‚Šæ–¹ãŒã„ã‚ã„ã‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€çµæœã¨ã—ã¦ CodeBuild ã‹ã‚‰ CodeCommit ã« PR ãŒå‡ºã›ã‚‹æ§˜ãªè¨­å®šã«ãªã£ã¦ã„ã‚Œã°è‰¯ã„ã§ã™ã€‚
å¿…è¦ãªãƒãƒªã‚·ãƒ¼ãªã©ã‚‚åˆ—æŒ™ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚ˆãèª­ã‚“ã§é€²ã‚ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;AWS ç’°å¢ƒã§ã¯ã§ããªã„ã“ã¨&lt;/h4&gt;

&lt;p&gt;ã“ã‚Œã‚‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;PR ã¸ã®æ‹…å½“ã‚¢ã‚µã‚¤ãƒ³&lt;/li&gt;
&lt;li&gt;PRã®è‡ªå‹•ãƒãƒ¼ã‚¸&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rebaseLabel&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹åŒ–&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã™ã‚‹&lt;/h4&gt;

&lt;p&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ &lt;code&gt;config.js&lt;/code&gt; ã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒã€ &lt;code&gt;renovate.json&lt;/code&gt; ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚
ã“ã®ã‚ãŸã‚Šã¯ãŠå¥½ããª&lt;a href="https://docs.renovatebot.com/configuration-options/"&gt;è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼&lt;/a&gt;ã‚’åˆ©ç”¨ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"$schema"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"https://docs.renovatebot.com/renovate-schema.json"&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ«ãªã©ã‚’è¨­å®šã—ã¦ãŠãã¾ã™ã€‚
Renovate ã®å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;CodeBuild ã®è¨­å®š&lt;/h4&gt;

&lt;h5&gt;å°å…¥æ–¹æ³•ã®é¸æŠ&lt;/h5&gt;

&lt;p&gt;Renovate ã‚’å°å…¥ã™ã‚‹ã¨ãã®å˜ä½ã¨ã—ã¦ã€2ã¤ã®é¸æŠè‚¢ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Renovate ã‚’è¤‡æ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦å®Ÿè¡Œã™ã‚‹ç®¡ç†ãƒªãƒã‚¸ãƒˆãƒªã‚’1ã¤ã¨ã€å¯¾ã«ãªã‚‹ CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹&lt;/li&gt;
&lt;li&gt;Renovate ã®å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã« CodeBuild ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å‰è€…ã®è‰¯ã„ã¨ã“ã‚ã¯ã€Renovate ã®å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªãŒå¤šæ•°ã‚ã‚‹ã¨ãã€ç®¡ç†ãƒªãƒã‚¸ãƒˆãƒªã«è¨­å®šã—ã¦ã„ã‚‹ CodeBuild ã® buildspec ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒªãƒã‚¸ãƒˆãƒªåã‚’åˆ—æŒ™ã—ã¦ã„ãã€å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªå´ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥ã‚Œã¦ãŠãã ã‘ã§è‰¯ã„ã“ã¨ã§ã™ã€‚
ãŸã ã—ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã¯ã§ããªã„ã®ã§ã€ã™ã¹ã¦ã®å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦é †ç•ªã« PR ãŒä½œæˆã•ã‚Œã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å¾Œè€…ã®è‰¯ã„ã¨ã“ã‚ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŸ”è»Ÿã«å¤‰æ›´ã§ãã‚‹ã“ã¨ã§ã™ã€‚ãŸã ã—ãƒªãƒã‚¸ãƒˆãƒªæ•°ã¶ã‚“ã® CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ã«ãªã‚‹ã®ã§å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªæ•°ãŒå¤šããªã‚‹ã¨é¢å€’ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆIaC ã§æ§‹ç¯‰ã—ã¦ã„ã‚Œã°ãã†ã§ã‚‚ãªã„ã‹ã‚‚ï¼Ÿï¼‰ã€‚&lt;/p&gt;

&lt;h5&gt;buildspec ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­ç½®&lt;/h5&gt;

&lt;p&gt;ä»Šå›ã¯å°å…¥ãƒªãƒã‚¸ãƒˆãƒªæ•°ã‚‚å°‘ãªã‹ã£ãŸã®ã¨ã€å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«å¤‰æ›´ã—ãŸã„ã¨ã„ã†è¦æœ›ãŒã‚ã£ãŸã®ã§ã€å¾Œè€…ã®æ–¹å¼ã§å°å…¥ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã©ã¡ã‚‰ã®æ–¹æ³•ã§ã‚‚ CodeCommit / CodeBuild ã§ã¯å®Ÿç¾å¯èƒ½ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;å‰å›ã®è¨˜äº‹ã§ build.yml ã‚„ deploy.yml ã‚’ä½œã£ã¦ã„ã‚‹ã®ã§ã€ãã“ã« renovate.yml ã¨ã„ã£ãŸåå‰ã§ buildspec ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¿°ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ Docker ã‚’ä½¿ã†æ–¹æ³•ã¨ CLI ã‚’ä½¿ã†æ–¹æ³•ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ãŒã€ç§ãŸã¡ã¯ CLI ã®æ–¹å¼ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;&lt;span class="na"&gt;version&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="m"&gt;0.2&lt;/span&gt;
&lt;span class="na"&gt;env&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;shell&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;bash&lt;/span&gt;
  &lt;span class="na"&gt;git-credential-helper&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;yes&lt;/span&gt;
  &lt;span class="na"&gt;variables&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;RENOVATE_PLATFORM&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;codecommit'&lt;/span&gt;
    &lt;span class="na"&gt;RENOVATE_REPOSITORIES&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;["repoName1"]'&lt;/span&gt;
    &lt;span class="na"&gt;RENOVATE_CONFIG&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;{"extends":["config:recommended"]}'&lt;/span&gt;
    &lt;span class="na"&gt;LOG_LEVEL&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;debug'&lt;/span&gt;
    &lt;span class="na"&gt;AWS_REGION&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;ap-northeast-1'&lt;/span&gt;
&lt;span class="na"&gt;phases&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;install&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;runtime-version&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;nodejs&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="m"&gt;20&lt;/span&gt;
  &lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;on-failure&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;CONTINUE&lt;/span&gt;
    &lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;npm install -g renovate&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;renovate&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;RENOVATE_REPOSITORIES&lt;/code&gt; ãŒé•ã†ã ã‘ã§ã€å„ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;h5&gt;CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã—ã¦å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹&lt;/h5&gt;

&lt;p&gt;CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ–°è¦ä½œæˆã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã‚’ç´ã¥ã‘ã¦ãŠãã¾ã™ã€‚
ã‚ã¨ã¯å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ EventBridge ã«è¨­å®šã—ã¦ã€ä½œæˆã—ãŸ CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œ ( &lt;code&gt;StartBuild&lt;/code&gt; ) ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã¾ã§ã§å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¿œã˜ã¦ PR ãŒç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«å¯¾å¿œã™ã‚‹&lt;/h3&gt;

&lt;p&gt;Renovate ã¯æ¨™æº–ã§ã¯ CVE ãªã©ã«å¯¾å¿œã™ã‚‹ãƒ‘ãƒƒãƒã® PR ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚
ã“ã®æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯2ã¤ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.renovatebot.com/configuration-options/#vulnerabilityalerts"&gt;vulnerabilityAlerts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.renovatebot.com/configuration-options/#osvvulnerabilityalerts"&gt;osvVulnerabilityAlerts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å‰è€…ã¯ GitHub ã®ã¿ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Š CodeCommit ã§ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚
å¾Œè€…ã¯å®Ÿé¨“çš„ãªæ©Ÿèƒ½ã¨ã„ã†ä½ç½®ä»˜ã‘ã®ã‚ˆã†ã§ã™ãŒã€ã™ã¹ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œã™ã‚‹æ§˜ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;osvVulnerabilityAlerts ã‚’æœ‰åŠ¹ã«ã™ã‚‹&lt;/h4&gt;

&lt;p&gt;ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã“ã®è¨˜äº‹ã§ã¯ renovate.jsonï¼‰ã«è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"$schema"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"https://docs.renovatebot.com/renovate-schema.json"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"osvVulnerabilityAlerts"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;å®Ÿã¯ GitHub ãŒå¿…è¦ãªã‚“ã§ã™&lt;/h4&gt;

&lt;p&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ã¨ã“ã‚Œã ã‘ã§è‰¯ã„ã®ã‹ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€å®Ÿéš›ã« Renovate ã‚’å®Ÿè¡Œã—ã¦ã‚‚ CVE ã® PR ã¯ç”Ÿæˆã•ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ãŠã‚„ï¼Ÿã£ã¨æ€ã£ã¦ãƒ­ã‚°ã‚’ç¢ºèªã—ãŸã‚Šã—ãŸã®ã§ã™ãŒã€åŸå› ãŒã‚ã‹ã‚‰ãš Renovate ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è‡ªä½“ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã™ã‚‹ã¨ã€ãªã‚“ã¨ OSV ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãŒ GitHub ã«å›ºå®šã—ã¦ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã‚‹ã˜ã‚ƒãªã„ã§ã™ã‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/renovatebot/renovate/blob/main/lib/workers/repository/process/vulnerabilities.ts#L52"&gt;è©²å½“ã®ã‚³ãƒ¼ãƒ‰&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="kr"&gt;private&lt;/span&gt; &lt;span class="k"&gt;async&lt;/span&gt; &lt;span class="nx"&gt;initialize&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt; &lt;span class="nb"&gt;Promise&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;void&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// hard-coded logic to use authentication for github.com based on the githubToken for api.github.com&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;token&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;findGithubToken&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="nx"&gt;find&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
        &lt;span class="na"&gt;hostType&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;github&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;https://api.github.com/&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="p"&gt;}),&lt;/span&gt;
    &lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;osvOffline&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;OsvOffline&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;token&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹&lt;a href="https://github.com/renovatebot/renovate/discussions/20542"&gt;ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³&lt;/a&gt;ã«ã¯ã€&lt;a href="https://github.com/renovatebot/renovate/discussions/20542#discussioncomment-8889250"&gt;é•ã†ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½¿ã†å ´åˆã®æ›¸ãæ–¹&lt;/a&gt;ãŒã‚ã£ã¦ã€OSVã®ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ç‹¬è‡ªã«zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚„ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€ãã®ã¾ã¾ GitHub ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€GitHub ã® PAT ã‚’ç”Ÿæˆã—ã¦ï¼ˆæ¨©é™ã¯ &lt;code&gt;public_repo&lt;/code&gt; ãã‚‰ã„ã§okï¼‰ renovate.yml ã«è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;&lt;span class="na"&gt;env&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;secrets-manager&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;GITHUB_COM_TOKEN&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="s"&gt;[ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®åå‰]:[ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ã‚­ãƒ¼]"&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;CodeBuild ã® buildspec ã§ã¯ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã™ã‚‹å€¤ã‚’ SecretsManager ã‹ã‚‰å–å¾—ã§ãã‚‹ã®ã§ã€GitHub ã§ç”Ÿæˆã—ãŸ PAT ã¯ãã“ã«æ ¼ç´ã—ã¦ãŠã„ã¦ã€CodeBuild ã‹ã‚‰å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆéƒ½åˆã§ GitHub ä½¿ãˆãªã„ã‹ã‚‰ CodeCommit ä½¿ã£ã¦ã„ã‚‹ã®ã«ï¼ã¨ã„ã†å£°ã¯ã”ã‚‚ã£ã¨ã‚‚ã ã¨æ€ã†ã®ã§ã€ãã†ã„ã†å ´åˆã¯ zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œã™ã‚‹æ‰‹é †ã‚’è©¦ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;ã§ãã‚Œã° CodeCommit ã‚‚ GitHub ã¨ Dependabot ã®é–¢ä¿‚ã®ã‚ˆã†ã«æ¨™æº–ã§è„†å¼±æ€§ã® PR å¯¾å¿œã—ã¦æ¬²ã—ã„ã§ã™ã‚ˆã­ã€‚
ãƒ“ãƒ«ãƒ‰çµæœã®é€šçŸ¥ã¨ã‹è„†å¼±æ€§ã®å¯¾å¿œã¨ã‹ã€Codeå…„å¼Ÿã®æ©Ÿèƒ½ã¨ã—ã¦ä¸è¶³ã—ã¦ã„ã‚‹ãªãƒ¼ã¨ã„ã†éƒ¨åˆ†ã®å¼·åŒ–ã«æœŸå¾…ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>CodeCommit ã¨ CodeBuild ã‚’ GitHub ã¨ Actions ã®çµ„ã¿åˆã‚ã›ã®ã‚ˆã†ã«ä½¿ã†</title>
    <link rel="alternate" href="http://blog.url.com/2024/05/28/using-codecommit-codebuild-like-a-github-and-the-actions.html"/>
    <id>http://blog.url.com/2024/05/28/using-codecommit-codebuild-like-a-github-and-the-actions.html</id>
    <published>2024-05-28T15:44:00+09:00</published>
    <updated>2024-06-06T10:48:07+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;ã“ã®è¨˜äº‹ã¯ AWS ã® CodeCommit ã¨ CodeBuild ã‚’ä½¿ã£ã¦ã€Œ GitHub ã¨ Actions ã ã£ãŸã‚‰ç°¡å˜ã«ã§ãã‚‹ PR ã®ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã¨ãã ã‘ãƒãƒ¼ã‚¸å¯èƒ½ã«ãªã‚‹ã€ä»•çµ„ã¿ã‚’ä½œã£ã¦ã¿ãŸã®ã§ã€ãã®æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;ãã‚Œã£ã¦æ¨™æº–ã§ã§ããªã„ã®ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ã¯ã„ã€ AWS ã® Code å…„å¼Ÿã ã‘ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¦ã„ã‚‹å ´åˆã€CodeCommit ã«ã¯ PR ã®æ©Ÿèƒ½ã¨æ‰¿èªãƒ•ãƒ­ãƒ¼ã®åˆ¶å¾¡ã¯ã‚ã‚‹ã‘ã©ã€ãƒ“ãƒ«ãƒ‰çµæœã¨é€£å‹•ã—ãŸä»•çµ„ã¿ã¯ç”¨æ„ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
åƒ•ã‚‚æ‹…å½“ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã†ã¾ã§ã€ãã‚Œãã‚‰ã„ã‚ã‚‹ã‚„ã‚ãƒ¼ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€ç„¡ã„ã¨èã„ã¦è¡æ’ƒã‚’å—ã‘ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;å‰æ&lt;/h3&gt;

&lt;p&gt;CodeCommit ä¸Šã®ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¯ git-flow ã§é‹ç”¨ã—ã¦ã„ã¾ã™ã€‚
ãªã®ã§ã€ ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ–ãƒ©ãƒ³ãƒã‚„ã‚¿ã‚°ãŒå­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;master&lt;/li&gt;
&lt;li&gt;develop&lt;/li&gt;
&lt;li&gt;release/v9.9.9&lt;/li&gt;
&lt;li&gt;hotfix/v9.9.9&lt;/li&gt;
&lt;li&gt;feature/xxxx-xxx&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;CodeCommit ã¨ CodeBuild ã§ git-flow ã‚’å–ã‚Šæ‰±ã†&lt;/h3&gt;

&lt;p&gt;ã“ã®æ™‚ç‚¹ã§ã‹ãªã‚Šé¢å€’ãªã®ã§ã™ãŒã€ä»¥ä¸‹ã®Qiitaè¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qiita.com/yoshii0110/items/0eb427cb7331647f2c12"&gt;AWS Codeã‚·ãƒªãƒ¼ã‚ºã‚’AWS Step Functionsã§å®Ÿè¡Œã—ç¶™ç¶šçš„ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãªã‚“ã§ StepFunctions ã‚’ä½¿ã†ã‹ã¨ã„ã†ã¨ã€Codeå…„å¼Ÿã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã£ãŸã¨ãã€ &lt;code&gt;feature/*&lt;/code&gt; ã®ã‚ˆã†ãªå‹•çš„ãƒ–ãƒ©ãƒ³ãƒã® PR ã«å¯¾ã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã§ããªã„ã¨ã„ã£ãŸå•é¡ŒãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚ &lt;code&gt;feature/*&lt;/code&gt; ã« PUSH ã•ã‚ŒãŸã¨ãã« CodeBuild ãŒå‹•ãã¨ã‹ã¯ã§ãã‚‹ã‚“ã§ã™ã‘ã©ã€ãã†ã„ã†ã“ã¨ã˜ã‚ƒãªã„ã‚“ã ã‚ˆ Codeå…„å¼Ÿã‚ˆã€‚ã‚ã‹ã£ã¦ãªã„ãªã€ã¨ã„ã†ã¨ã“ã€‚&lt;/p&gt;

&lt;h4&gt;EventBridge -&amp;gt; StepFunctions ã¸ã®é€£æº&lt;/h4&gt;

&lt;p&gt;CodeCommit ã¸ã® PR ã‚„ PUSH ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ EventBridge ã§å—ã‘å–ã£ã¦ StepFunctions ã¸å—ã‘æµã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã¡ã‚‰ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qiita.com/isamuJazz/items/c8e4a4c27b46b87e01f3"&gt;AWS StepFunctionsã‚’ä½¿ã£ã¦ CodeCommitã§ãƒ—ãƒ«ãƒªã‚¯æ™‚ã«ãã®ãƒ–ãƒ©ãƒ³ãƒåã‚’è‡ªå‹•çš„ã«æ—¢å­˜ã®CodeBuildã®å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒã«ã—ã¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã™ã‚‹ã€‚&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://aws.amazon.com/jp/blogs/news/new-building-a-continuous-integration-workflow-with-step-functions-and-aws-codebuild/"&gt;æ–°æ©Ÿèƒ½ â€“ Step Functions ã¨ AWS CodeBuild ã‚’ä½¿ç”¨ã—ãŸç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ§‹ç¯‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CodeCommit ã® PR ã‚„ PUSH ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã‚‰ã€StepFunctions ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;åŸºæœ¬çš„ã«ã¯äº‹å‰å®šç¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚‚å•é¡Œãªã„ã¨æ€ã„ã¾ã™ãŒã€EventBridgeã®æ®µéšã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’çµã‚Šè¾¼ã¿ãŸã„å ´åˆã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã§çµã‚Šè¾¼ã‚“ã§ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
å¯¾è±¡ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã©ã†ã™ã‚‹ã‹ã¯ EventBridge ã§ã‚‚ StepFunctions ã§åˆ¤å®šã—ã¦ã‚‚ã©ã¡ã‚‰ã§ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚å®Ÿè¡Œã‚³ã‚¹ãƒˆã‚’æ©Ÿã«ã™ã‚‹ãªã‚‰ EventBridge ã§ãƒ•ã‚£ãƒ«ã‚¿ã—ãŸã»ã†ãŒè‰¯ã„ã§ã™ã­ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã¨ãˆã° PR ã®ä½œæˆã¨ã‚½ãƒ¼ã‚¹ã®æ›´æ–°æ™‚ã«ã ã‘å‹•ã‹ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªJSONã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"detail"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"event"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"pullRequestCreated"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"pullRequestSourceBranchUpdated"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"detail-type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"CodeCommit Pull Request State Change"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"resources"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"CodeCommitã®ARN"&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nl"&gt;"source"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"aws:codecommit"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;GitHub Actions ã«ç½®ãæ›ãˆã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªéƒ¨åˆ†ã‚’ EventBridge ã‚„ StepFunctions ã§è¨­å®šã™ã‚‹ã¨æ€ã£ã¦ã„ã‚Œã°é–“é•ã„ãªã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;&lt;span class="na"&gt;on&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;pull_request&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;types&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="pi"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;opened&lt;/span&gt;&lt;span class="pi"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;synchronize&lt;/span&gt;&lt;span class="pi"&gt;]&lt;/span&gt;
    &lt;span class="na"&gt;branches&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;feature/**'&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;release/**'&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;develop&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;master&lt;/span&gt;
  &lt;span class="na"&gt;push&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;branches&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;release/**'&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;develop&lt;/span&gt;
    &lt;span class="na"&gt;tags&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="s"&gt;v[0-9]+.[0-9]+.[0-9]+'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;StepFunctions ã®ãƒ•ãƒ­ãƒ¼&lt;/h4&gt;

&lt;p&gt;å‚è€ƒè¨˜äº‹ã« StepFunctions ã‹ã‚‰ CodeBuild ã‚’å®Ÿè¡Œã™ã‚‹ä¾‹ãŒå‡ºã¦ã„ã‚‹ã®ã§ã€ãã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ•ãƒ­ãƒ¼ã¨ã—ã¦ã¯ä»¥ä¸‹ã®æ§˜ãªæµã‚Œã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;PR ã‹ã©ã†ã‹åˆ¤å®šã™ã‚‹ &lt;code&gt;$.detail-type&lt;/code&gt; ã‚’ &lt;code&gt;Choise&lt;/code&gt; ã§åˆ¤å®šã—ã¦åˆ†å²

&lt;ol&gt;
&lt;li&gt;PR ã ã£ãŸã‚‰ CodeBuild ã® &lt;code&gt;build&lt;/code&gt; ã‚’å®Ÿè¡Œã—ã¦ã€ &lt;code&gt;ResultPath: $.BuildResult&lt;/code&gt; ã«çµæœã‚’æ ¼ç´&lt;/li&gt;
&lt;li&gt;ãƒ“ãƒ«ãƒ‰çµæœã‚’ CodeCommit ã«é€šçŸ¥ã™ã‚‹ Lambda ã‚’å®Ÿè¡Œ&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;1 ã® ELSE

&lt;ol&gt;
&lt;li&gt;PUSH ã«ãªã‚‹ã®ã§ã€ãƒ–ãƒ©ãƒ³ãƒ &lt;code&gt;$.detail.sourceReference&lt;/code&gt; ãŒ &lt;code&gt;refs/heads/develop&lt;/code&gt; ã‚„ &lt;code&gt;refs/heads/master&lt;/code&gt; , &lt;code&gt;refs/heads/release&lt;/code&gt; ã«ãƒãƒƒãƒã—ã¦ã„ãŸã‚‰ CodeBuild ã® &lt;code&gt;deploy&lt;/code&gt; ã‚’å®Ÿè¡Œã—ã¦ã€ &lt;code&gt;ResultPath: $.BuildResult&lt;/code&gt; ã«çµæœã‚’æ ¼ç´&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å®Ÿéš›ã¯ãƒãƒ£ãƒƒãƒˆã«ã‚‚ãƒ“ãƒ«ãƒ‰çµæœã‚’é€šçŸ¥ã—ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ã€ãƒ•ãƒ­ãƒ¼ã¯ã‚‚ã†å°‘ã—è¤‡é›‘ã§ã™ãŒã€å¤§ã¾ã‹ã«ã¯ä¸Šè¨˜ã®ã¨ãŠã‚Šã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;StepFunctions ã‹ã‚‰ CodeBuild ã‚’å‘¼ã³å‡ºã™æ™‚ã®è¨­å®šå¯èƒ½ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã©ã€‚AWSã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ï¼ˆç¿»è¨³ã®ã‚¿ã‚¤ãƒˆãƒ«å¤‰ã ã‘ã©wï¼‰&lt;/p&gt;

&lt;p&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/step-functions/latest/dg/connect-codebuild.html"&gt;Step AWS CodeBuild Functions ã«ã‚ˆã‚‹å‘¼ã³å‡ºã—&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;git-flow ã® CodeBuild ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¨­å®šã™ã‚‹ã¨ãã¯ã€ã‚½ãƒ¼ã‚¹ã®è¨­å®šã‚’æŒ‡å®šã›ãšã« PR ã®ã‚½ãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://aws.amazon.com/jp/blogs/news/new-building-a-continuous-integration-workflow-with-step-functions-and-aws-codebuild/"&gt;æ–°æ©Ÿèƒ½ â€“ Step Functions ã¨ AWS CodeBuild ã‚’ä½¿ç”¨ã—ãŸç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ§‹ç¯‰&lt;/a&gt;ã®è¨˜äº‹ã§ CodeBuild ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã® StepFunctions å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nl"&gt;"Trigger CodeBuild Build With Tests"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="nl"&gt;"Type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"Task"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="nl"&gt;"Resource"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"arn:${AWS::Partition}:states:::codebuild:startBuild.sync"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="nl"&gt;"Parameters"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
          &lt;/span&gt;&lt;span class="nl"&gt;"ProjectName"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"${projectName}"&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="w"&gt;
        &lt;/span&gt;&lt;span class="nl"&gt;"Next"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"Get Test Results"&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Parameters&lt;/code&gt; ã«ä»¥ä¸‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¦ã€ç‰¹å®šã®ã‚½ãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã«å¯¾ã—ã¦ãƒ“ãƒ«ãƒ‰ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;SouceTypeOverride: &amp;ldquo;CODECOMMIT&amp;rdquo;&lt;/li&gt;
&lt;li&gt;SourceLocationOverride: CodeCommit ã®URL&lt;/li&gt;
&lt;li&gt;BuildspecOverride: å®Ÿè¡Œã™ã‚‹ãƒ“ãƒ«ãƒ‰ã‚¹ãƒšãƒƒã‚¯ã®ãƒ‘ã‚¹&lt;/li&gt;
&lt;li&gt;SourceVersion: ãƒ–ãƒ©ãƒ³ãƒåï¼ˆevent.detail.sourceReferenceï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;CodeBuild ã§ã‚„ã‚‹ã“ã¨&lt;/h4&gt;

&lt;p&gt;CodeBuild ã§ã¯åˆ†å²å‡¦ç†ã‚’æ›¸ãã¨ã—ã¦ã‚‚ã‚·ã‚§ãƒ«ã® if æ–‡ã‚’ä½¿ã†ã“ã¨ã«ãªã‚‹ã®ã§ã€ãã†ã„ã£ãŸã‚±ãƒ¼ã‚¹åˆ†ã‘ã¯ StepFunctions ã§åˆ†å²ã—ã¦ã€buildspecfile ã‚’åˆ†ã‘ã¦ãŠã„ã¦ &lt;code&gt;BuildspecOverride&lt;/code&gt; ã§åˆ‡ã‚Šæ›¿ãˆã‚‹æ§˜ã«ã—ã¦ãŠã„ãŸæ–¹ãŒè‰¯ã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;GitHub Actions ã§ã„ã†ã¨ã€å˜ç´”ãªã‚¸ãƒ§ãƒ–ãŒ1ã¤æ›¸ã‘ã‚‹ã ã‘ã¨æ€ã£ã¦ã„ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;CodeCommit ã«ãƒ“ãƒ«ãƒ‰çµæœã‚’é€šçŸ¥ã™ã‚‹&lt;/h4&gt;

&lt;p&gt;ã§ã¯ CodeBuild ã®çµæœã‚’ CodeCommit ã«é€šçŸ¥ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã“ã“ã¯é€£æºã®ä»•çµ„ã¿ã¯ãªã„ã®ã§ã€ CodeCommit ã®ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã¨æ‰¿èªæ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšãƒ“ãƒ«ãƒ‰çµæœã‚’ CodeCommit ã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ã€ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ãŸã‚‰æ‰¿èªã™ã‚‹ Lambda ã‚’å®Ÿè£…ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;CodeCommitClient&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;PostCommentForPullRequestCommand&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;UpdatePullRequestApprovalStateCommand&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;@aws-sdk/client-codecommit&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;handler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;async&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;CodeCommitClient&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;buildResult&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;Error&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Cause&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;buildUrl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;`https://ãƒªãƒ¼ã‚¸ãƒ§ãƒ³.console.aws.amazon.com/codesuite/codebuild/ã‚³ãƒ¼ãƒ‰ãƒ“ãƒ«ãƒ‰ID/projects/&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;buildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Build&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ProjectName&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/build/&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;buildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Build&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Id&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;icon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;Error&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;âŒ&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;âœ…&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;`&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;icon&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; ãƒ“ãƒ«ãƒ‰ [&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;buildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Build&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Id&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;](&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;buildUrl&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;input&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="na"&gt;pullRequestId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pullRequestId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;repositoryName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;repositoryNames&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="na"&gt;beforeCommitId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;sourceCommit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;afterCommitId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;destinationCommit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nx"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;command&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;PostCommentForPullRequestCommandI&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;input&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;command&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;BuildResult&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;approvalInput&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="na"&gt;pullRequestId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;pullRequestId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;revisionId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;detail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;revisionId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;approvalState&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;APPROVE&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;approvalCommand&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;UpdatePullRequestApprovalStateCommand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;approvalInput&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;approvalCommand&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ¬å½“ã¯çµµæ–‡å­—ã˜ã‚ƒãªãã¦ã€ãƒãƒƒã‚¸ã‚’ä½¿ã„ãŸã‹ã£ãŸã®ã§ã™ã‘ã©ã€CodeCommit ã§ã¯åˆ©ç”¨ã§ãã‚‹ Markdown è¨˜æ³•ã«åˆ¶é™ãŒã‚ã£ã¦ã€å¤–éƒ¨ç”»åƒã¯åˆ©ç”¨ã§ããªã„ã‚ˆã†ã§ã™ã€‚
CodeBuild ã«ã‚‚ãƒãƒƒã‚¸æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã™ãŒã€ git-flow ã®ã‚ˆã†ã« &lt;code&gt;feature/*&lt;/code&gt; ã®ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ–ãƒ©ãƒ³ãƒã§ã€ StepFunctions ã‹ã‚‰ãƒ“ãƒ«ãƒ‰å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã™ã‚‹å ´åˆã«ã¯ãƒãƒƒã‚¸ãŒä½œã‚Œãªã„ã®ã§ã€ãã‚Œã‚‚ä½¿ãˆã¾ã›ã‚“ã€‚
ã“ã“ã¯çµµæ–‡å­—ä¸€æŠã§ã—ã‚‡ã†ã€‚
ã‚ã¨ã¯ã€ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ã¦ã‚‚å¤±æ•—ã—ã¦ã„ã¦ã‚‚ã€ãƒ“ãƒ«ãƒ‰çµæœã«é£›ã¹ã‚‹ãƒªãƒ³ã‚¯ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§ç¢ºèªã—ã‚„ã™ããªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã® Lambda ã‹ã‚‰ã¯ä»¥ä¸‹ã®2ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒãƒªã‚·ãƒ¼ãŒå¿…è¦ã«ãªã‚‹ã®ã§ã€å¿˜ã‚Œãšã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;PostCommentForPullRequest&lt;/li&gt;
&lt;li&gt;UpdatePullRequestApprovalState&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã¨ãã ã‘ãƒãƒ¼ã‚¸å¯èƒ½ã«ã™ã‚‹&lt;/h4&gt;

&lt;p&gt;ä¸Šè¨˜ã® Lambda ã§ãƒ“ãƒ«ãƒ‰ã«æˆåŠŸã—ãŸã¨ãã ã‘æ‰¿èªã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
CodeCommit ã§ã¯ã€Œæ‰¿èªãƒ«ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã‚’è¨­å®šã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’å‰æã¨ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CI ã§ã®ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;li&gt;PR ä½œæˆè€…ä»¥å¤–ã®äººãŒæ‰¿èªã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¾ãšå‰è€…ã®æ‰¿èªãƒ«ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¿…è¦ãªæ‰¿èªã®æ•°: 1&lt;/li&gt;
&lt;li&gt;æ‰¿èªãƒ—ãƒ¼ãƒ«ã®ãƒ¡ãƒ³ãƒãƒ¼

&lt;ul&gt;
&lt;li&gt;IAMãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯å¼•ãå—ã‘ãŸãƒ­ãƒ¼ãƒ«&lt;/li&gt;
&lt;li&gt;å€¤: ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ãŸã‚‰æ‰¿èªã™ã‚‹ Lambda ã®ãƒ­ãƒ¼ãƒ«å&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ãƒ–ãƒ©ãƒ³ãƒå: develop&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;git-flow ã§ã¯ &lt;code&gt;feature/*&lt;/code&gt; ã‹ã‚‰ &lt;code&gt;develop&lt;/code&gt; ã«å‘ã‘ã¦ PR ã‚’å‡ºã™ã®ã§ã€ãƒ–ãƒ©ãƒ³ãƒãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è¨­å®šã—ã¦ãŠãã¨è‰¯ã„ã§ã™ã€‚
ã¾ãŸã€Lambda ã‹ã‚‰ã®æ‰¿èªã§ã‚ã‚‹ã“ã¨ã‚’åˆ¤å®šã™ã‚‹ã«ã¯ã€Lambda ã«å‰²ã‚Šå½“ã¦ã¦ã„ã‚‹ãƒ­ãƒ¼ãƒ«åã§åˆ¤å®šã™ã‚‹ã®ãŒæ¥½ã ã¨æ€ã†ã®ã§ã€ãƒ­ãƒ¼ãƒ«åã§åˆ¤å®šã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;p&gt;ç¶šã„ã¦å¾Œè€…ã®æ‰¿èªãƒ«ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¿…è¦ãªæ‰¿èªã®æ•°: 2&lt;/li&gt;
&lt;li&gt;ãƒ–ãƒ©ãƒ³ãƒå: develop&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã“ã§ã¯æ‰¿èªè€…ã®çµã‚Šè¾¼ã¿ã¯ã—ã¦ãŠã‚‰ãšã€2ã¤ã®æ‰¿èªãŒã‚ã£ãŸã‚‰ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ã«ã—ã¦ã„ã¾ã™ã€‚
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã¯ç‰¹å®šã®äººã®æ‰¿èªã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã‹ã‚‰ã€ãã®ã‚å ´åˆã¯æ‰¿èªãƒ—ãƒ¼ãƒ«ã®ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¨­å®šã—ã¦å¿…è¦ãªæ‰¿èªæ•°ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
ã“ã“ã§ã¯èª°ã‹ã—ã‚‰1äººä»¥ä¸ŠãŒæ‰¿èªã—ã¦ãã‚ŒãŸã‚‰ã€ã¨ã„ã†å‰æã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã¯ãªãœå¿…è¦ãªæ‰¿èªã®æ•°ãŒ 2 ãªã®ã‹ï¼Ÿã¨ã„ã†ã¨ã€CIã§ã®æ‰¿èªæ•°1ã¨äººã®æ‰¿èªæ•°1ã‚’åˆã‚ã›ã¦2ä»¥ä¸Šã¨ã„ã†å½¢ã«ã—ã¦ã„ã¾ã™ã€‚
äººãŒ2äººä»¥ä¸Šæ‰¿èªã—ã¦ã„ã¦ã‚‚CIãŒå¤±æ•—ã—ã¦ã„ãŸå ´åˆã¯ã€å‰è€…ã®æ‰¿èªãƒ«ãƒ¼ãƒ«ã‚’æº€ãŸã—ã¦ã„ãªã„ã®ã§ãƒãƒ¼ã‚¸ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ“ãƒ«ãƒ‰æˆåŠŸã§1ã€äººã®æ‰¿èªãŒ1ã¤ä»¥ä¸Šã§ãƒ«ãƒ¼ãƒ«ãŒæº€ãŸã•ã‚Œã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;ã“ã‚Œã‚‰ã®æ‰‹é †ã§ CodeCommit / CodeBuild ã‚’ä½¿ã£ãŸã¨ãã« GitHub ã¨ Actions ã§ç°¡å˜ã«ã§ãã¦ã„ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;é¢å€’ã ã€é¢å€’ã™ãã‚‹ã€ã¨æ€ã„ã¾ã™ã‚ˆã­ã€‚&lt;/p&gt;

&lt;p&gt;ã§ãã‚Œã° Codeå…„å¼Ÿã‚’é¿ã‘ã¦ã„ããŸã„ã®ã§ã™ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäº‹æƒ…ã§ãã‚Œä»¥å¤–ã®é¸æŠè‚¢ãŒé¸ã¹ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚
ãã®ã‚ˆã†ãªã¨ãã«ã€ã“ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
ã“ã“ã¾ã§å…¨ä½“ã®æ‰‹é †ã‚’è§£èª¬ã—ã¦ãã‚Œã‚‹è¨˜äº‹ãŒè¦‹å½“ãŸã‚‰ãªã‹ã£ãŸã®ã§ã€ç´°ã‹ã„è¨­å®šã¯ç½®ã„ã¦ãŠã„ã¦å¤§ã¾ã‹ãªã‚‰æµã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«è§£èª¬ã—ã¾ã—ãŸã€‚
ãã‚Œãã‚Œã®éƒ¨åˆ†ï¼ˆãŸã¨ãˆã°StepFunctionsã¨CodeBuildã®é€£æºï¼‰ã¨ã„ã£ãŸè¨˜äº‹ã¯æ¤œç´¢ã™ã‚‹ã¨è¦‹ã¤ã‹ã‚‹ã®ã§ã€å…·ä½“çš„ãªå®Ÿè£…æ–¹æ³•ã¯ãã‚Œãã‚Œã®æœ€æ–°æƒ…å ±ã‚’ç¢ºèªãã ã•ã„ã€‚&lt;/p&gt;

&lt;p&gt;Codeå…„å¼Ÿã•ã‚“ã€ã‚‚ã£ã¨ä¾¿åˆ©ã«ãªã£ã¦ãã‚Œãªã„ã‹ãªã€ã¨é¡˜ã†æ—¥ã€…ã§ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 5</title>
    <link rel="alternate" href="http://blog.url.com/2024/05/01/story-for-migrate-hobby-web-service-while-a-year-part-5.html"/>
    <id>http://blog.url.com/2024/05/01/story-for-migrate-hobby-web-service-while-a-year-part-5.html</id>
    <published>2024-05-01T18:32:00+09:00</published>
    <updated>2024-05-01T19:19:25+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;ã“ã®è¨˜äº‹ã¯ &lt;a href="2024/04/30/story-for-migrate-hobby-web-service-while-a-year-part-4.html"&gt;GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 4&lt;/a&gt; ã®ç¶šç·¨ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;GAEã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦å‹•ä½œç¢ºèªã—ãªãŒã‚‰ä¿®æ­£&lt;/h3&gt;

&lt;p&gt;å‰å›ã§ Slim4 ã¸ç§»è¡Œã§ãã€å°‘ã—å‹•ãæ§˜ã«ãªã£ã¦ããŸã®ã§å‹•ä½œç¢ºèªã—ãªãŒã‚‰å¾®ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;GAE 2nd gen ç”¨ã®è¨­å®šå¤‰æ›´&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;app.yml&lt;/code&gt; ãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã—ã¦ã„ãŸãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡å¤–ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ &lt;code&gt;skip_files&lt;/code&gt; ã¯åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ« &lt;code&gt;.gcloudignore&lt;/code&gt; ã«è¨˜è¿°ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã«ãªã£ãŸã®ã§ã€å®šç¾©ã‚’ç§»è¡Œã—ã¾ã—ãŸã€‚ãã®&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/98ec0f6157778a1b37807664193d1ee0afc56ec1"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4&gt;Carbon ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—&lt;/h4&gt;

&lt;p&gt;8.2 ç’°å¢ƒã§å‹•ãã‚ˆã†ã« Carbon ã‚’ 1.21 ã‹ã‚‰ 2.72 ã«ã‚¢ãƒ—ãƒ‡ã—ã¾ã—ãŸã€‚ãã®&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/f33a78013a00996a30de76849abe76d40e404b1b"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4&gt;composer ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡ã«è¿½åŠ &lt;/h4&gt;

&lt;p&gt;GAE 2nd gen ã‹ã‚‰ã¯ composer ã§ã®ä¾å­˜é–¢ä¿‚ã¯GAEãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«è§£æ±ºã•ã‚Œã‚‹ã®ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã« composer.json ã¨ composer.lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚ãã®&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/33bfe6f232d1b4794a6a27cfc0ceed139159615b"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å®šç¾©ã‚’å¤‰æ›´&lt;/h4&gt;

&lt;p&gt;ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒã†ã¾ãå‹•ä½œã—ã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã€èª¿ã¹ã¦ã„ã‚‹ã¨æ›¸ãæ–¹ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ã™ã§ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¤‰æ›´ã—ã¦ã„ãŸã®ã§ã™ãŒã€å®Ÿè¡Œãƒ¡ã‚½ãƒƒãƒ‰åã‚‚å¤‰æ›´ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§t PHP5.5 ã®ã¨ãã¯ interface ã‚’å®Ÿè£…ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ãªã‹ã£ãŸã®ã§ã€ã¡ã‚ƒã‚“ã¨ &lt;code&gt;MiddlewareInterface&lt;/code&gt; ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ä¿®æ­£ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;Psr\Http\Server\MiddlewareInterface&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AllowedProvidersMiddleware&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AllowedProvidersMiddleware&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="nc"&gt;MiddlewareInterface&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ãã†ã™ã‚‹ã¨ã€ä»¥å‰ã¯ &lt;code&gt;__invoke&lt;/code&gt; ãƒ¡ã‚½ãƒƒãƒ‰ã§å®šç¾©ã—ã¦ã„ãŸã¨ã“ã‚ã‚’ &lt;code&gt;process&lt;/code&gt; ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ãã®ä¿®æ­£&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/6e737549267d4f231cc5894f88f00bd91cbf9862"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å‡¦ç†ã‚‚ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;ã•ãã»ã©ã®ã‚³ãƒŸãƒƒãƒˆã§ã¯ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒã® Memcache ãŒã†ã¾ãå‹•ä½œã—ã¦ã„ãªã‹ã£ãŸã®ã§ã€ã„ã£ãŸã‚“ &lt;code&gt;session_set_save_handler&lt;/code&gt; ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® tmp ç®¡ç†ã«ã—ã¦ã„ã¾ã™ã€‚ãŸã è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èµ·å‹•ã™ã‚‹ã¨ã†ã¾ãå‹•ä½œã—ãªããªã‚‹ã®ã§ã€ã„ã£ãŸã‚“å‹•ä½œç¢ºèªã‚’é€²ã‚ã‚‹ä¸Šã§ã®æš«å®šå¯¾å¿œã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚‚å…¨ä½“ã«å¯¾ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹ã®ã§ãªãã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªAPIï¼ˆã“ã“ã§ã„ã†ã¨ç®¡ç†ç”»é¢ã®ãƒ­ã‚°ã‚¤ãƒ³å‘¨è¾ºï¼‰ã«ã¤ã„ã¦ã ã‘æœ‰åŠ¹ã«ã™ã‚‹ã‚ˆã†ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã®å¾Œã€Google Cloud ã® Cloud Datastore ã« &lt;code&gt;DatastoreSessionHandler&lt;/code&gt; ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã®ãŒã‚ã‹ã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã‚’å¤‰æ›´ã—ã¾ã—ãŸã€‚ãã®&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/d85b82286d6ec844c6e73144cbcd889d3ae8ff52"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;Google\Cloud\Datastore\DatastoreClient&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;Google\Cloud\Datastore\DatastoreSessionHandler&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="nv"&gt;$datastore&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;DatastoreClient&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="nv"&gt;$handler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;DatastoreSessionHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$datastore&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nb"&gt;session_set_save_handler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$handler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nb"&gt;session_save_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'sessions'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;POST ã®ãƒœãƒ‡ã‚£ã« JSON ã‚’æ¸¡ã™å ´åˆã®å¯¾å¿œ&lt;/h4&gt;

&lt;p&gt;Slim4 ã§ã¯ &lt;code&gt;addBodyParsingMiddleware&lt;/code&gt; ã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã€ä¿®æ­£ã—ã¾ã—ãŸã€‚ãã®&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/376485104e1ac12a28b749dfc911506f57bcc27d"&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä½µã›ã¦ BASIC èªè¨¼æ™‚ã® before å‡¦ç†ã‚‚ä¸è¦ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;GAE ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã‚’ README ã«è¿½è¨˜&lt;/h3&gt;

&lt;p&gt;GAE 2nd gen ã‹ã‚‰ã¯ãƒ“ãƒ«ãƒ‰çµæœã‚’ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;gcloud app deploy --project toiletevolution --version 2 --no-promote --appyaml=app.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;version&lt;/code&gt; ã‚’æŒ‡å®šã—ã¦æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å‹•ä½œç¢ºèªã‚’å¯èƒ½ã«ã—ã¦ã€ &lt;code&gt;--no-promote&lt;/code&gt; ã‚’ã¤ã‘ã‚‹ã“ã¨ã§å¾“æ¥ã®URLã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æŒ¯ã‚Šåˆ†ã‘ã‚‰ã‚Œãªã„æ§˜ã«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ãã—ã¦ã©ã†ãªã£ãŸã‹&lt;/h3&gt;

&lt;p&gt;ã“ã®è¨˜äº‹ã¯ PHP ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’ãƒ¡ã‚¤ãƒ³ã«ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€å®Ÿéš›ã«ã¯ WebComponents å´ã‚‚ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã—ã¦ã‚·ãƒ¥ãƒŸãƒ¬ãƒ¼ã‚¿ã§ä¸€ãƒ¶æœˆãã‚‰ã„ã®ç¨¼åƒãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã—ã¦ã€å•é¡Œãªã•ãã†ã ã£ãŸã®ã§æŸæ—¥ã«æ­£å¼ãƒªãƒªãƒ¼ã‚¹ã‚’å®Ÿæ–½ã—ã¾ã—ãŸã€‚
ãã®å¾Œã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã®å•é¡Œã‚‚ç™ºç”Ÿã›ãšé †èª¿ã«å‹•ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã—ã°ã‚‰ãã¯è½ã¡ç€ãã®ã¨ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—è¿½å¾“ã‚‚ã©ã‚“ã©ã‚“ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãã®ã§å®‰å¿ƒã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ã«ã¾ã¨ã‚ã¦ã¿ã‚‹ã¨ã€ãã‚“ãªã«å¤§å¤‰ãªä¿®æ­£ã§ã‚‚ãªã‹ã£ãŸãªï¼Ÿã¨ã„ã†æ„Ÿã˜ã§ã™ãŒã€å½“æ™‚ã¯ä¹…ã€…ã« PHP è§¦ã£ãŸã‚Šã™ã‚‹ã®ã‚‚ã‚ã‚Šã€çµæ§‹å¤§å¤‰ã§ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¾Œã¯ phpstan ã¨ã‹å…¥ã‚ŒãŸã‚Šã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã®å“è³ªã‚‚ä¸Šã’ã¦ã„ã‘ã‚Œã°ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 4</title>
    <link rel="alternate" href="http://blog.url.com/2024/04/30/story-for-migrate-hobby-web-service-while-a-year-part-4.html"/>
    <id>http://blog.url.com/2024/04/30/story-for-migrate-hobby-web-service-while-a-year-part-4.html</id>
    <published>2024-04-30T13:52:00+09:00</published>
    <updated>2024-04-30T15:37:24+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;ã“ã®è¨˜äº‹ã¯ &lt;a href="2024/04/30/story-for-migrate-hobby-web-service-while-a-year-part-3.html"&gt;GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 3&lt;/a&gt; ã®ç¶šç·¨ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;PHP 8.2 ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã„ã&lt;/h3&gt;

&lt;p&gt;ã²ã¨ã¾ãšãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ 8.2 ç’°å¢ƒã§ PHPUnit ã§ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€CI ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦å‹•ãã®ã‹ã‚’è©¦ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;Memcache ã®æ®‹ã‚Šã‚’ç§»è¡Œã™ã‚‹&lt;/h4&gt;

&lt;p&gt;Memcache ã¯ Redis ã«ç§»è¡Œã—ãŸã®ã§ã™ãŒã€å˜ä½“ãƒ†ã‚¹ãƒˆå¤–ã®éƒ¨åˆ†ã«ã‚‚å°‘ã—æ®‹ã£ã¦ã„ãŸã®ã§ã€&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/febd6d51eea461b5aa44504102fcb10d1d746c29"&gt;ã“ã¡ã‚‰ã®ã‚³ãƒŸãƒƒãƒˆ&lt;/a&gt; ã§å¯¾å¿œã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ç§»è¡Œæ–¹æ³•ã¯ &lt;a href="2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-2.html"&gt;GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 2&lt;/a&gt; ã§ã‚‚å®Ÿæ–½ã—ãŸå†…å®¹ãªã®ã§ã™ãŒã€DI éƒ¨åˆ†ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã€READMEã®èª¬æ˜ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h4&gt;GAE ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ–°ã—ãè¨­å®šã™ã‚‹&lt;/h4&gt;

&lt;p&gt;GAE ã§ã¯é€šå¸¸ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸å‘ã‘ã¦ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦åˆ¥ã®URLã‹ã‚‰å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
dev_appserver.py ã§ã®å®Ÿè¡ŒãŒå›°é›£ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ GAE ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦å‹•ä½œã™ã‚‹ã®ã‹ã‚’æ¤œè¨¼ã—ã¦ã„ãã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³2ã¨ã—ã¦&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/6e8416cf0bf26c06bce2125e357b16d429bdec4e"&gt;ä¿®æ­£&lt;/a&gt;ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;GAE ã§å‹•ã‹ã™ã«ã‚ãŸã‚Š php.ini ã‚‚å¤‰æ›´ãŒå¿…è¦ã ã£ãŸã®ã§ã€æ‹¡å¼µã« redis ã‚’è¿½åŠ ã—ã¦&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/5b827d53174e8f3c87ea00afcda4e1a6ee21636d"&gt;ä¿®æ­£&lt;/a&gt;ã—ã¾ã—ãŸ&lt;/p&gt;

&lt;h4&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦å‹•ã‹ã—ã¦ã¿ã‚‹&lt;/h4&gt;

&lt;p&gt;å…¨ç„¶å‹•ãã¾ã›ã‚“ãª  (^^;;&lt;/p&gt;

&lt;p&gt;ã¾ãšå•é¡Œã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ãŸã‚ã«ã€ã¾ã ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«åˆ†å²ã§ãã¦ã„ãªã‹ã£ãŸãƒ‡ãƒã‚¤ã‚¹å€¤ã®å–å¾—å‡¦ç†ã‚’ Google Cloud Storage ã‹ã‚‰å–å¾—ã™ã‚‹å‡¦ç†ã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä¿å­˜å ´æ‰€ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ã€ã„ã£ãŸã‚“ &lt;code&gt;php.ini&lt;/code&gt; ã« &lt;code&gt;session.save_path=Google\AppEngine\Api\Memcache\Memcache&lt;/code&gt; ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä¾å­˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã„ãã¤ã‹ PHP 8.2 ç’°å¢ƒã ã¨å‹•ã‹ãªã„ã‚‚ã®ãŒã‚ã£ãŸã®ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã€‚&lt;/p&gt;

&lt;p&gt;ã„ã£ãŸã‚“ãã‚Œã‚‰ã®ä¿®æ­£ã‚³ãƒŸãƒƒãƒˆãŒ&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/ba9be14f65cc75fdc6604fde328192a3ec125b57"&gt;ã“ã¡ã‚‰&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€ã„ã‚ã„ã‚ã‚„ã£ã¦ã„ãã†ã¡ã«ã€ãã‚‚ãã‚‚ slim3 ã ã¨ PHP 8ç³»ã§å‹•ã‹ãªã„ãª&amp;hellip;ã¨ã„ã†åŸºæœ¬çš„ãªã¨ã“ã‚ã«æ°—ã¥ãã¾ã—ãŸï¼ˆã•ã„ã—ã‚‡ã‹ã‚‰è€ƒãˆã¦ãŠã‘ã‚ˆã¨ã„ã†è©±ï¼‰ã€‚&lt;/p&gt;

&lt;h3&gt;Slim3 ã‹ã‚‰ Slim4 ã«ç§»è¡Œã—ã¦ã„ã&lt;/h3&gt;

&lt;p&gt;å¹¸ã„ãªã“ã¨ã«ã“ã¡ã‚‰ã«é–¢ã—ã¦ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«ç§»è¡Œè¨˜äº‹ãŒãŸãã•ã‚“ã‚ã‚Šã€ã¨ã¦ã‚‚å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã®ç§»è¡Œã«é–¢ã™ã‚‹ã‚³ãƒŸãƒƒãƒˆãŒ&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/f0aed649629a24bad6f4dbbf4b0f724415569a33"&gt;ã“ã¡ã‚‰&lt;/a&gt;ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ä¾å­˜é–¢ä¿‚ã®æ›´æ–°&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;slim 3.1 ã‚’ 4.12 ã«&lt;/li&gt;
&lt;li&gt;monolog ã®ã‚¢ãƒ—ãƒ‡&lt;/li&gt;
&lt;li&gt;BASICèªè¨¼ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª &lt;code&gt;tuupola/slim-basic-auth&lt;/code&gt; ã®ã‚¢ãƒ—ãƒ‡&lt;/li&gt;
&lt;li&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ &lt;code&gt;akrabat/rka-slim-session-middleware&lt;/code&gt; ã®ã‚¢ãƒ—ãƒ‡&lt;/li&gt;
&lt;li&gt;PSR7å®Ÿè¡ŒãŒå¤–éƒ¨ä¾å­˜ã«ãªã£ãŸã®ã§ &lt;code&gt;slim/psr7&lt;/code&gt; ã®è¿½åŠ &lt;/li&gt;
&lt;li&gt;DI ãŒå¤–éƒ¨ä¾å­˜ã«ãªã£ãŸã®ã§ &lt;code&gt;php-di/php-di&lt;/code&gt; ã®è¿½åŠ &lt;/li&gt;
&lt;li&gt;Google Cloud Storage ãŒãƒ©ãƒ³ã‚¿ã‚¤ãƒ å¤–ã«ãªã£ãŸã®ã§ &lt;code&gt;google/cloud-storage&lt;/code&gt; ã®è¿½åŠ &lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;php-di ã¸ã®ç§»è¡Œ&lt;/h4&gt;

&lt;p&gt;ã‚‚ã¨ã‚‚ã¨ã¯ Slim3 ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã€ã“ã‚“ãªæ„Ÿã˜ã§ã‚„ã£ã¦ã„ãŸã®ã‚’&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// Instantiate the app&lt;/span&gt;
&lt;span class="nv"&gt;$settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/settings.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nf"&gt;Slim\App&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$settings&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;DI\Container&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nv"&gt;$settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/settings.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$container&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;Container&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="nv"&gt;$container&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'settings'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$settings&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'settings'&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç¶šã„ã¦DIã‚³ãƒ³ãƒ†ãƒŠã®åˆæœŸåŒ–å‡¦ç†åŒ–ã‚’&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/dependencies.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã®ã‚ˆã†ã«æŒ‡å®šã—ã¦ã„ãŸã®ã‚’&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;Slim\Factory\AppFactory&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nv"&gt;$dependencies&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/dependencies.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$container&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$dependencies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$container&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="nc"&gt;AppFactory&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nf"&gt;setContainer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$container&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nv"&gt;$app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nc"&gt;AppFactory&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nf"&gt;create&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚’åˆæœŸåŒ–&lt;/li&gt;
&lt;li&gt;ç’°å¢ƒè¨­å®šã®æ³¨å…¥ã‚„ã‚³ãƒ³ãƒ†ãƒŠã®åˆæœŸåŒ–ã‚’å®Ÿè¡Œ&lt;/li&gt;
&lt;li&gt;AppFactory ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã®ã‚ˆã†ãªå®Ÿè£…ã«å¤‰ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;Slim4 ã£ã½ã„æ›¸ãæ–¹ã«å¤‰æ›´&lt;/h4&gt;

&lt;p&gt;ã‚‚ã¨ã‚‚ã¨ã¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// Register middleware&lt;/span&gt;
&lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/middleware.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// Register routes&lt;/span&gt;
&lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/routes.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã‚“ãªæ„Ÿã˜ã§ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¨­å®šã‚’æ›¸ã„ã¦ã„ãŸã®ã§ã™ãŒã€&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// Register middleware&lt;/span&gt;
&lt;span class="nv"&gt;$middleware&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/middleware.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$middleware&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// Register routes&lt;/span&gt;
&lt;span class="nv"&gt;$routes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;require&lt;/span&gt; &lt;span class="k"&gt;__DIR__&lt;/span&gt; &lt;span class="mf"&gt;.&lt;/span&gt; &lt;span class="s1"&gt;'/src/routes.php'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nv"&gt;$routes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slim4ã‚¢ãƒ—ãƒªã‚’å¼•æ•°ã§æŒ‡å®šã—ã¦è¨­å®šã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
&lt;code&gt;$app&lt;/code&gt; ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§ã‹ã‚‰å¼•æ•°å‚ç…§ã™ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«å¤‰ã‚ã£ãŸãã‚‰ã„ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;Basicèªè¨¼ã®ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;ç™»éŒ²æ¸ˆã¿ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹APIã§ã¯ã€Basicèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’è¨­å®šã—ã¦ã„ã¦ã€ &lt;code&gt;callback&lt;/code&gt; ã¨ã„ã†å‡¦ç†ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;//&lt;/span&gt;
&lt;span class="c1"&gt;// For Registered Devices&lt;/span&gt;
&lt;span class="c1"&gt;//&lt;/span&gt;
&lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/api/devices/{id}/values'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'\ToiletEvolution\Controllers\DeviceValuesController:add'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nf"&gt;Slim\Middleware\HttpBasicAuthentication&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
        &lt;span class="s2"&gt;"authenticator"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;ToiletEvolution\Middlewares\HttpBasicAuthentication\DeviceAuthenticator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getContainer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'DeviceStore'&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
        &lt;span class="s2"&gt;"callback"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$arguments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="nv"&gt;$route&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getAttribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'route'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
          &lt;span class="nv"&gt;$id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$route&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getArgument&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'id'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$id&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="nv"&gt;$arguments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="s2"&gt;"secure"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
      &lt;span class="p"&gt;]));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slim4ã§ã®Basicèªè¨¼ã§ã¯ &lt;code&gt;before&lt;/code&gt; ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹æ§˜ã«å¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;  &lt;span class="c1"&gt;//&lt;/span&gt;
  &lt;span class="c1"&gt;// For Registered Devices&lt;/span&gt;
  &lt;span class="c1"&gt;//&lt;/span&gt;
  &lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/api/devices/{id}/values'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'\ToiletEvolution\Controllers\DeviceValuesController:add'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nf"&gt;Tuupola\Middleware\HttpBasicAuthentication&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;
          &lt;span class="s2"&gt;"authenticator"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;ToiletEvolution\Middlewares\HttpBasicAuthentication\DeviceAuthenticator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$app&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getContainer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'DeviceStore'&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
          &lt;span class="s2"&gt;"before"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$arguments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nv"&gt;$id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$arguments&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'id'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$id&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="nv"&gt;$arguments&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
          &lt;span class="p"&gt;},&lt;/span&gt;
          &lt;span class="s2"&gt;"secure"&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
        &lt;span class="p"&gt;]));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;APIã§JSONã‚’è¿”å´ã™ã‚‹ã¨ãã®å‡¦ç†ãŒæ¨™æº–ã§ã¯ãªããªã£ãŸã®ã§ã€JSONæ–‡å­—åˆ—ã‚’å‡ºåŠ›ã™ã‚‹ &lt;code&gt;JsonRenderer&lt;/code&gt; ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¹ã‚’ä½œã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kn"&gt;namespace&lt;/span&gt; &lt;span class="nn"&gt;ToiletEvolution\Renderer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;Psr\Http\Message\ResponseInterface&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;JsonRenderer&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cd"&gt;/**
     * Write JSON to the response body.
     *
     * This method prepares the response object to return an HTTP JSON
     * response to the client.
     *
     * @param ResponseInterface $response The response
     * @param mixed $data The data
     *
     * @return ResponseInterface The response
     */&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="kt"&gt;ResponseInterface&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="kt"&gt;mixed&lt;/span&gt; &lt;span class="nv"&gt;$data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="kt"&gt;ResponseInterface&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Content-Type'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'application/json'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getBody&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nb"&gt;json_encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="no"&gt;JSON_UNESCAPED_SLASHES&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="no"&gt;JSON_PARTIAL_OUTPUT_ON_ERROR&lt;/span&gt;
            &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã§ã€ãã‚Œã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§åˆæœŸåŒ–ã—ã¦ã€APIãƒ¡ã‚½ãƒƒãƒ‰ã§å‘¼ã³å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DevicesController&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;ContainerInterface&lt;/span&gt; &lt;span class="nv"&gt;$ci&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;JsonRenderer&lt;/span&gt; &lt;span class="nv"&gt;$renderer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;__construct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;ContainerInterface&lt;/span&gt; &lt;span class="nv"&gt;$ci&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$ci&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;renderer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;JsonRenderer&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;ServerRequestInterface&lt;/span&gt; &lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;ResponseInterface&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;array&lt;/span&gt; &lt;span class="nv"&gt;$args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;$deviceModel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;Device&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="nv"&gt;$data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;array_map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;toArrayWithoutSecret&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nv"&gt;$deviceModel&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;renderer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="mi"&gt;204&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slim3 ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ &lt;code&gt;$response-&amp;gt;withJson&lt;/code&gt; ã§ã‚ˆã‹ã£ãŸã¨ã“ã‚ãŒå¤‰æ›´ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;$deviceModel&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nc"&gt;Device&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="nv"&gt;$data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;array_map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;toArrayWithoutSecret&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="nv"&gt;$deviceModel&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withJson&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="mi"&gt;204&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;PSR ã®æ›¸ãæ–¹ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã«å¿œã˜ã¦ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RequireLoginMiddleware&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;__invoke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'current_user'&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;
        &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;302&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Location'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;redirectIfNotLogin&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã‚“ãªæ„Ÿã˜ã ã£ãŸã®ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RequireLoginMiddleware&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;__invoke&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Request&lt;/span&gt; &lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;RequestHandler&lt;/span&gt; &lt;span class="nv"&gt;$handler&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="kt"&gt;ResponseInterface&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nc"&gt;Response&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'current_user'&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;
        &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;302&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;withHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Location'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;redirectIfNotLogin&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nv"&gt;$response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$handler&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;handle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$request&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nv"&gt;$response&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¼•æ•°ãŒå¤‰æ›´ã«ãªã£ã¦ã„ã¦ã€ &lt;code&gt;$response&lt;/code&gt; ãŒãªããªã£ã¦ã€æ¬¡ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¸å‡¦ç†ã‚’å¼•ãç¶™ãã®ãŒ &lt;code&gt;$next&lt;/code&gt; ã‹ã‚‰ &lt;code&gt;$handler&lt;/code&gt;  ã«å¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;$response&lt;/code&gt; ã¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã”ã¨ã«ä½œæˆã—ã¦è¨­å®šã—ã¦ã„ãã¾ã™ã€‚
æ¬¡ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«å¼•ãç¶™ãã¨ãã¯ã€ &lt;code&gt;$handler-&amp;gt;handle&lt;/code&gt; ã§å‘¼ã³å‡ºã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;Slim3 ã‹ã‚‰ Slim4 ã¸ã®ç§»è¡Œæ‰‹é †ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«å¤šãã‚ã£ã¦åŠ©ã‹ã‚Šã¾ã—ãŸã€‚
ã¾ãŸ Slim é–¢é€£ã® OSS ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ 3 ã‹ã‚‰ 4 ã¸ã®ç§»è¡Œã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã—ã¦ãã‚Œã¦ã„ãŸã®ã§ã€æ¯”è¼ƒçš„ã‚¹ãƒ ãƒ¼ã‚ºã«ç§»è¡Œã§ããŸã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§ã¯ãã®ä¸€éƒ¨ã‚’ç´¹ä»‹ã™ã‚‹æ„Ÿã˜ã«ãªã‚Šã¾ã—ãŸãŒã€åŒã˜ã‚ˆã†ãªå¯¾å¿œã‚’ã™ã‚‹äººã«å½¹ç«‹ã¤å†…å®¹ã«ãªã£ã¦ã„ã‚Œã°å¬‰ã—ã„ã§ã™ã€‚&lt;/p&gt;
</content>
  </entry>
</feed>
