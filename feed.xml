<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Blog Name</title>
  <subtitle>Blog subtitle</subtitle>
  <id>http://blog.url.com/</id>
  <link href="http://blog.url.com/"/>
  <link href="http://blog.url.com/feed.xml" rel="self"/>
  <updated>2024-03-20T14:58:00+09:00</updated>
  <author>
    <name>Blog Author</name>
  </author>
  <entry>
    <title>GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 2</title>
    <link rel="alternate" href="http://blog.url.com/2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-2.html"/>
    <id>http://blog.url.com/2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-2.html</id>
    <published>2024-03-20T14:58:00+09:00</published>
    <updated>2024-03-20T16:13:12+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;ã“ã®è¨˜äº‹ã¯ &lt;a href="2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-1.html"&gt;GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 1&lt;/a&gt; ã®ç¶šç·¨ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;å˜ä½“ãƒ†ã‚¹ãƒˆã‚’é€šéã™ã‚‹ã‚ˆã†ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰&lt;/h3&gt;

&lt;p&gt;ã‚„ã‚‹ã“ã¨ã¯å¤šãã†ã ãªã¨ã„ã†ã®ã¯æƒ³åƒã—ã¦ã„ãŸã®ã§ã™ãŒã€ã„ã–å–ã‚Šæ›ã‹ã‚ã†ã¨ã—ãŸã¨ãé ¼ã‚Šã«ãªã‚‹ã®ã¯å˜ä½“ãƒ†ã‚¹ãƒˆã ãªã€ã¨ã„ã†ã“ã¨ã§PHPUnitã¨PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸Šã’ã¦ã€ãƒ†ã‚¹ãƒˆãŒé€šéã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ†ã‚¹ãƒˆãŒé€šéã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚³ãƒŸãƒƒãƒˆãŒ&lt;a href="https://github.com/toiletevolution/toiletevolution-server/pull/20/commits/0a73d2d12bd05bd4a67e80a60e9f64f682416529"&gt;ã“ã¡ã‚‰&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;h4&gt;composer ã®ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’8.2ä»¥ä¸Šã¸&lt;/li&gt;
&lt;li&gt;PHPUnitã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’10.1.3ï¼ˆå½“æ™‚æœ€æ–°ï¼‰ã¸&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãã®é–¢é€£ã§åˆã‚ã›ã¦ã‚ã’ãªã„ã¨ã„ã‘ãªã„ä¾å­˜ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³upã€‚&lt;/p&gt;

&lt;h4&gt;PHPUnit ã®å®Ÿè¡Œæ–¹æ³•ã‚’å¤‰æ›´&lt;/h4&gt;

&lt;p&gt;ä»¥å‰ã¯ GAE ã®å†…éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ä¾å­˜ã—ã¦ã„ãŸã®ã§ã€PHPUnitã‚’å®Ÿè¡Œã™ã‚‹ã®ã‚‚ dev_appserver.py ã‚’èµ·å‹•ã—ã¦ã‹ã‚‰ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†…ã® PHPUnit å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’çµŒç”±ã—ã¦å®Ÿè¡Œã—ã¦ã„ãŸã®ã§ã™ãŒã€GAE gen2 ã§ã¯PHPã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èµ·å‹•è‡ªä½“ãŒ &lt;code&gt;php -S&lt;/code&gt; ã«å¤‰ã‚ã£ãŸã‚Šã—ãŸã“ã¨ã‚‚ã‚ã‚Šã€PHPUnitã‚‚Composer ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ç›´æ¥å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»¥å‰ã¯ dev_appserver çµŒç”±ã§èµ·å‹•ã•ã‚Œã¦ã„ãŸãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã¤ã„ã¦ã¯ã€docker ã¨ gcloud emulator ã§èµ·å‹•ã—ã¦ã‹ã‚‰ PHPUnit ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿè¡Œæ‰‹é †ã‚’READMEã«ã‚‚è¨˜è¿°ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§ã€ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è„±å´ã®ãŸã‚ Memcache ã‚’ Redis ã«å¤‰æ›´ã™ã‚‹å¯¾å¿œã‚‚å…¥ã£ã¦ã„ã¾ã™ã€‚
å½“åˆã¯ Memcache ã‚’å¤‰æ›´ã›ãšã« PHPUnit ãŒé€šéã—ã¦ã‹ã‚‰ç§»è¡Œã™ã‚‹äºˆå®šã ã£ãŸã®ã§ã™ãŒã€ &lt;code&gt;GeckoPackages\MemcacheMock&lt;/code&gt; ãŒçµ‚äº†ã—ã¦ã„ã¦ã€æœ€æ–°ã®PHP/PHPUnitã§å‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä¸€ç·’ã«ç§»è¡Œã‚’æ±ºæ–­ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h4&gt;ç°¡å˜ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨æ—¢å­˜ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰&lt;/h4&gt;

&lt;p&gt;Toilet Evolution ã¯ PHP Slim Framework ã«ã€Google Datastore ã‚’ä½¿ç”¨ï¼ˆ&lt;a href="https://cloud.google.com/appengine/docs/standard/using-firestore-in-datastore-mode?hl=ja&amp;amp;tab=php"&gt;Datastoreãƒ¢ãƒ¼ãƒ‰ã®Firestoreã‚’ä½¿ç”¨&lt;/a&gt;ï¼‰ã—ã¦ã„ã¾ã™ã€‚
REST API ã‚’é€šã˜ã¦ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ãƒˆã‚¤ãƒ¬ã®åˆ©ç”¨çŠ¶æ³ã‚’ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«æ ¼ç´ã—ãŸã‚Šã€Webã‚¢ãƒ—ãƒªã‹ã‚‰åˆ©ç”¨çŠ¶æ³ã‚’é–²è¦§ã§ãã‚‹API ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®I/Oã€PSRã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢éƒ¨åˆ†ã«ã‚ã£ã¦ã€ä¸»ãªãƒ­ã‚¸ãƒƒã‚¯ã¯ã“ã®ã‚ãŸã‚Šã«é›†ä¸­ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°ã‚’ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;PHPUnit ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ï¼ˆã‚¯ãƒ©ã‚¹ï¼‰ã®å®£è¨€ã‚’ä¿®æ­£&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// PHP5.5 / PHPUnit 4.8&lt;/span&gt;
&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DeviceTest&lt;/span&gt; &lt;span class="k"&gt;extends&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;PHPUnit_Framework_TestCase&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;

&lt;span class="c1"&gt;// PHP8.2 / PHPUnit 10.1.3&lt;/span&gt;
&lt;span class="kn"&gt;use&lt;/span&gt; &lt;span class="nc"&gt;PHPUnit\Framework\TestCase&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DeviceTest&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="nc"&gt;TestCase&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;setUp ã‚’ before ã«å¤‰æ›´&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// PHP5.5 / PHPUnit 4.8&lt;/span&gt;
&lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;setUp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;// PHP8.2 / PHPUnit 10.1.3&lt;/span&gt;
&lt;span class="cd"&gt;/**
 * @before
 */&lt;/span&gt;
&lt;span class="kt"&gt;public&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;before&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;assert ã‚’ &lt;code&gt;$this&lt;/code&gt; çµŒç”±ã§å‘¼ã³å‡ºã™ã‚ˆã†ã«å¤‰æ›´&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// PHP5.5 / PHPUnit 4.8&lt;/span&gt;
&lt;span class="nf"&gt;assertEquals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$results&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// PHP8.2 / PHPUnit 10.1.3&lt;/span&gt;
&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;assertEquals&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'username'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$results&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Memcache ã‹ã‚‰ Redis ã¸ã®è¨˜è¿°ã‚’ä¿®æ­£&lt;/h4&gt;

&lt;p&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯DIã—ã¦ã„ã‚‹ã®ã§ã€å¤‰æ•°åã‚’ memcache ã‹ã‚‰ redis ã«å¤‰æ›´ã—ãŸã€‚
ãƒ¡ã‚½ãƒƒãƒ‰ã¯ get / set ã§åŒã˜ã«ãªã‚‹ã‘ã©ã€ãƒ‡ãƒ¼ã‚¿ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã‹ã‚‰æ–‡å­—åˆ—ã«å¤‰ã‚ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ãªå¯¾å¿œã¨ãªã£ãŸ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight php"&gt;&lt;code&gt;&lt;span class="c1"&gt;// GAE gen1&lt;/span&gt;
&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;memcache&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"device:id:&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getKeyId&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// GAE gen2&lt;/span&gt;
&lt;span class="nv"&gt;$this&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"device:id:&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nf"&gt;getKeyId&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;serialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;$device&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã‚’ set ã™ã‚‹ã¨ãã¯ &lt;code&gt;serialize&lt;/code&gt; ã—ã¦ã€ get ã™ã‚‹ã¨ãã¯ &lt;code&gt;unserialize&lt;/code&gt; ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;h4&gt;ã“ã®ãã‚‰ã„ã§ PHPUnit ãŒã†ã”ãã‚ˆã†ã«ãªã£ãŸ&lt;/h4&gt;

&lt;p&gt;Warining ã¯å‡ºã¦ã‚‹ã‚“ã§ã™ãŒã€PHPUnit ãŒã‚¨ãƒ©ãƒ¼ã§è½ã¡ã‚‹ã“ã¨ã¯ãªããªã‚Šã¾ã—ãŸã€‚
ã“ã‚Œã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—æ„å¤–ã¨æ¥½ãƒãƒ³ãªã®ã§ã¯ï¼Ÿï¼ã¨å‹˜é•ã„ã—ãŸã®ã¯è¨€ã†ã¾ã§ã‚‚ãªãã€ã“ã®é€£è¼‰ã‚‚ã¾ã ç¶šãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§å‹˜é•ã„ã—ãŸã®ã§ã€å¿ƒã‚‚æŠ˜ã‚Œãšç¶šã‘ã‚‰ã‚ŒãŸã¨ã„ã†ã®ã¯ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã¨æŒ¯ã‚Šè¿”ã‚Šæ€ã†ã®ã§ã—ãŸã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>GAE gen1 ã§å‹•ã„ã¦ã„ã‚‹ PHP5.5 ã§ä½œã£ãŸå€‹äººé–‹ç™ºã‚µãƒ¼ãƒ“ã‚¹ã‚’ gen2 PHP8.2 ã¸ç§»è¡Œã—ãŸ1å¹´è¨˜ ã€œ ãã® 1</title>
    <link rel="alternate" href="http://blog.url.com/2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-1.html"/>
    <id>http://blog.url.com/2024/03/20/story-for-migrate-hobby-web-service-while-a-year-part-1.html</id>
    <published>2024-03-20T12:34:00+09:00</published>
    <updated>2024-03-20T14:34:07+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;2023å¹´2æœˆ3æ—¥ã«Google Cloudã‹ã‚‰ãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="/images/blog/gae-gen1-support-mail.png" alt="" /&gt;&lt;/p&gt;

&lt;p&gt;ã“ã“ã§ä½œã£ã¦ã„ãŸå€‹äººé–‹ç™ºã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã¯ &lt;a href="https://toiletevolution.space/#/about"&gt;Toilet Evolution&lt;/a&gt; ã§ã™ã€‚ä¸€æ™‚æœŸã«æµè¡Œã£ãŸãƒˆã‚¤ãƒ¬åˆ©ç”¨çŠ¶æ³å¯è¦–åŒ–ã®IoTã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;PHP + Web Components ã® SPA æ§‹æˆã§ã§ãã¦ã„ã¦ã€Google App Engineï¼ˆä»¥ä¸‹GAEï¼‰ã®ç¬¬ä¸€ä¸–ä»£ã§å‹•ã„ã¦ã„ã¾ã™ã€‚
å½“æ™‚ã»ã¼ç„¡æ–™ã§å‹•ã‹ã›ã‚‹PaaSã¨ã„ã†ã®ã¯ã‚ã¾ã‚Šãªãã¦ã€GAEã°ã‹ã‚Šã‚’é¸æŠã—ã¦ã„ãŸã¨è¨˜æ†¶ã—ã¦ã„ã¾ã™ã€‚
ãã®å¾Œ Heroku ã¨ã‹å‡ºã¾ã—ãŸã‘ã©ã€å®Ÿè³ªãã‚Œãªã‚Šã®åˆ©ç”¨ã§æœˆ100å††ã‚‚ã‹ã‹ã‚‰ãšã«é‹ç”¨ã—ã¤ã¥ã‘ã‚‰ã‚Œã¦ã„ã‚‹çŠ¶æ³ãªã®ã§ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://cloud.google.com/appengine/docs/standard/lifecycle/support-schedule?hl=ja"&gt;GAEã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  ã‚µãƒãƒ¼ãƒˆ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«&lt;/a&gt; ã«ã‚ˆã‚‹ã¨ PHP5.5 ã¯ 2024å¹´1æœˆ30æ—¥ã«ã‚µãƒãƒ¼ãƒˆã®çµ‚äº†ã§ã€éæ¨å¥¨ãŒ2026å¹´1æœˆ31æ—¥ã¨ã„ã†ã“ã¨ã€‚å»ƒæ­¢ã¯æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;ã¨åŒæ™‚ã«ã¾ã ä½¿ã£ã¦ã„ã‚‹äººã‚‚ã„ã‚‹ã®ã§ã€ç°¡å˜ã«ãƒ¡ãƒ³ãƒ†å¤§å¤‰ãªã‚“ã§ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã™ã¨ã„ã†ã®ã‚‚é•ã„ã¾ã™ã­ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼å¤§äº‹ã€‚ã‚ã‚ŠãŒãŸã‚„ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ã€ã‚µãƒãƒ¼ãƒˆçµ‚äº†çŠ¶æ…‹ã§ãšã£ã¨å‹•ã‹ã™ã®ã‚‚ãªã¨æ€ã„ã€æœ€æ–°ç‰ˆã®PHPã¸ã®ç§»è¡Œã‚’æ¤œè¨ã—å§‹ã‚ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;ä¸€ç•ªæœ€å¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹&lt;/h3&gt;

&lt;p&gt;ã“ã®Webã‚µãƒ¼ãƒ“ã‚¹ã¯é•·ã„ã“ã¨ã‚„ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€ç›´è¿‘ã§è¨˜äº‹ã«ã—ãŸã®ã¯ &lt;a href="/2019/04/28/toilet-evolution-polymer3-vol4.html"&gt;Toilet Evolutionã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’Polymer3å¯¾å¿œã™ã‚‹(4)&lt;/a&gt; ã§ã€2019å¹´4æœˆã€‚ã‚ã®ã‚ã¨ã‚³ãƒ­ãƒŠãŒã‚ã£ã¦ã®5å¹´ã¶ã‚Šã®ãƒ¡ãƒ³ãƒ†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ç§»è¡Œå‰ã® composer.json&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ãªä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã—ãŸã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"php"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"&amp;gt;=5.5.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"slim/slim"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^3.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"monolog/monolog"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.17"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"tomwalder/php-gds"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^2.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"tuupola/slim-basic-auth"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^2.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"nesbot/carbon"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.21"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"league/oauth2-client"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.4"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"league/oauth2-google"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"akrabat/rka-slim-session-middleware"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"2.0.0-RC1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"sizuhiko/slim3-csrf-utilities"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"dev-master"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"justinrainbow/json-schema"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^2.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"phpunit/phpunit"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^4.8"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"helmich/phpunit-psr7-assert"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"gecko-packages/gecko-memcache-mock"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^2.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
    &lt;/span&gt;&lt;span class="nl"&gt;"google/appengine-php-sdk"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"^1.9"&lt;/span&gt;&lt;span class="w"&gt;    
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ­´å²ã‚’æ„Ÿã˜ã¾ã™ã­ã€‚&lt;/p&gt;

&lt;h3&gt;GAE gen1 ã‹ã‚‰ gen2 ã§ä½•ãŒå¤‰ã‚ã‚‹ã®ã‹&lt;/h3&gt;

&lt;p&gt;GAEã§ã®ç§»è¡Œã‚¬ã‚¤ãƒ‰ãŒå‡ºã¦ã„ã¦ã€PHPã ã¨ &lt;a href="https://cloud.google.com/appengine/migration-center/standard/migrate-to-second-gen/php-differences?hl=ja"&gt;PHP 5.5 ã¨ PHP 7 / 8 ã®é•ã„&lt;/a&gt; ã¨ã„ã†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;PHPå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç§»è¡Œã‚¬ã‚¤ãƒ‰ã¸ã®ãƒªãƒ³ã‚¯ã¨ã€GAEç‰¹æœ‰ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
ã‚¿ã‚¤ãƒˆãƒ«ã ã‘æ‹¾ã†ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç§»è¡ŒãŒå¿…è¦ã«ãªã‚‹ã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;app.yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»è¡Œã™ã‚‹&lt;/li&gt;
&lt;li&gt;ãƒ©ãƒ³ã‚¿ã‚¤ãƒ åˆ¶é™ã®ç·©å’Œ&lt;/li&gt;
&lt;li&gt;App Engine ã® PHP SDK ã‹ã‚‰ç§»è¡Œã™ã‚‹ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ãƒãƒ³ãƒ‰ãƒ«ã‚µãƒ¼ãƒ“ã‚¹APIåˆ©ç”¨æ–¹æ³•ï¼‰&lt;/li&gt;
&lt;li&gt;ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å®Ÿè¡Œæ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ãƒ¬ã‚¬ã‚·ãƒ¼ãƒãƒ³ãƒ‰ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ã¨ã¯ &lt;a href="https://cloud.google.com/appengine/docs/standard/php-gen2/services/access?hl=ja"&gt;PHP 7 / 8 ç”¨ã®ä»¥å‰ã®ãƒãƒ³ãƒ‰ãƒ« ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹&lt;/a&gt; ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã€ä»Šå›ã®ã‚µãƒ¼ãƒ“ã‚¹ã§è¨€ã†ã¨ Memcache ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€ã“ã‚Œã‚‰ã¯ä½¿ãˆã‚‹ã®ã§ã€ä½¿ã„ç¶šã‘ã¦è‰¯ã„ã®ã‹ï¼Ÿã¨ã„ã†é¸æŠã‚’è¿«ã‚‰ã‚Œã¾ã™ã€‚
ã‚‚ã†å°‘ã—é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã¿ã¾ã—ã‚‡ã†ã€‚
&lt;a href="https://cloud.google.com/appengine/docs/standard/bundled-services-overview?hl=ja"&gt;ä»¥å‰ã®ãƒãƒ³ãƒ‰ãƒ« ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦&lt;/a&gt; ã«ã‚ˆã‚‹ã¨&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ãƒ¬ã‚¬ã‚·ãƒ¼ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ä¸€éƒ¨ã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ç®¡ç†ã•ã‚Œãªããªã£ãŸãŸã‚ã€App Engine ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã¯ã€æ–°ã—ã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ç§»è¡Œã™ã¹ãã‹ã©ã†ã‹é›£ã—ã„åˆ¤æ–­ã«è¿«ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã†ã—ãŸç§»è¡Œã«ã¯æ™‚é–“ã¨åŠ´åŠ›ãŒã‹ã‹ã‚Šã¾ã™ãŒã€ãƒ¬ã‚¬ã‚·ãƒ¼ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ä½¿ç”¨ã‚’ç¶™ç¶šã™ã‚Œã°ã€ã‚¢ãƒ—ãƒªã®ç¶­æŒã‚³ã‚¹ãƒˆãŒå¢—å¤§ã™ã‚‹çµæœã«ãªã‚Šã¾ã™ã€‚
ã“ã†ã—ãŸèª²é¡Œã‚’è¸ã¾ãˆã€Google Cloud ã§ã¯æ–°ã—ã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®ç§»è¡Œãƒ‘ã‚¹ã‚’æ®µéšçš„ã«æä¾›ã—ã¦ã„ãäºˆå®šã§ã™ã€‚Google Cloud ã§ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç§»è¡Œã®è¤‡é›‘ã•ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã«ã€Python 3ã€Java 11ã€Go 1.12 ä»¥é™ã€PHP 7 / 8 ãªã©ã®ç¬¬ 2 ä¸–ä»£ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ App Engine ã®å¾“æ¥ã®ãƒãƒ³ãƒ‰ãƒ« ã‚µãƒ¼ãƒ“ã‚¹ã¨ãã®é–¢é€£ API ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç§»è¡Œå¤§å¤‰ãªã‚“ã§æ®µéšçš„ãªç§»è¡Œãƒ‘ã‚¹ã‚’ç”¨æ„ã™ã‚‹ã‚ˆã£ã¦ã“ã¨ã§ã™ã­ã€‚
Memcache ã¯ã“ã®ç§»è¡Œãƒã‚¹ã«å…¥ã£ãŸã‚ˆã†ã§ãã®ã¾ã¾ã§ã‚‚åˆ©ç”¨ã§ããŸã‚“ã§ã™ãŒã€ã‚ã¨ã§ã¾ãŸç§»è¡Œã™ã‚‹ã®ãŒé¢å€’ãã†ãªã‚“ã§ã€ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚„ã£ã¦ãŠããŸã„ã¨è€ƒãˆã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‹ã‚‰ã®ç§»è¡Œã«é–¢ã—ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ &lt;a href="https://cloud.google.com/appengine/migration-center/standard/services/migrating-services?hl=ja&amp;amp;tab=php"&gt;ãƒ¬ã‚¬ã‚·ãƒ¼ ãƒãƒ³ãƒ‰ãƒ« ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ç§»è¡Œ&lt;/a&gt; ã«ã‚ã£ã¦ã€å‚è€ƒã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;å®Ÿè¡Œç›®æ¨™&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;PHPã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æœ€æ–°åŒ–ã™ã‚‹&lt;/li&gt;
&lt;li&gt;GAEã®ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‹ã‚‰ã®è„±å´&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨ã„ã†ã®ã‚’æ²ã’ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‘ã©ã€PHPè‡ªä½“ã‚ã‚“ã¾ã‚Šè§¦ã£ã¦ãªã„ï¼ˆãŸã¶ã‚“7ã‚’å°‘ã—ã‚„ã£ãŸãã‚‰ã„ã§ã€å®Ÿè³ª5ç³»ã®çŸ¥è­˜ã§æ­¢ã¾ã£ã¦ã„ã‚‹ï¼‰ãŸã‚ã€é•·æœŸæˆ¦ã¯äºˆæƒ³ã—ã¦ã„ã¾ã—ãŸã€‚å½“æ™‚ã¯ã¾ã 1å¹´ãã‚‰ã„ã‚ã‚‹ã‹ã‚‰ä½•ã¨ã‹ãªã‚‹ã‚„ã‚ã€ãã‚‰ã„ã«æ€ã£ã¦ã„ãŸè‡ªåˆ†ãŒã„ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãã—ã¦ã€ãã®å¾Œã®1å¹´ãã‚‰ã„ã§ç§»è¡Œã‚’å®Œäº†ã•ã›ã¦ã€ç¾åœ¨ã¯ GAE gen2 ã® PHP8.2 ã§ç¨¼åƒã—ã¦ã„ã¾ã™ã€‚ğŸ‘ğŸ‘&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚ã¨æ•°å›ã«ã‚ãŸã£ã¦ã€ã©ã†ã‚„ã£ã¦ç§»è¡Œã—ã¦ããŸã‹ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã¨å…±ã«ãµã‚Šã‹ãˆã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
å°‘ã—ã§ã‚‚ PHP ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚„ GAE gen2 ã¸ç§»è¡Œã™ã‚‹äººã®åŠ©ã‘ã«ãªã‚Œã°ãªã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>ãƒãƒ«ãƒãƒ—ãƒ«ãƒ¬ãƒã‚’ãƒ¢ãƒãƒ¬ãƒã¸ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã‚’æ®‹ã—ãªãŒã‚‰ç§»è¡Œã™ã‚‹</title>
    <link rel="alternate" href="http://blog.url.com/2023/09/27/converting-multiple-repos-into-a-monorepo.html"/>
    <id>http://blog.url.com/2023/09/27/converting-multiple-repos-into-a-monorepo.html</id>
    <published>2023-09-27T17:25:00+09:00</published>
    <updated>2023-09-28T16:16:47+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;h3&gt;èƒŒæ™¯&lt;/h3&gt;

&lt;p&gt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è¤‡æ•°ã®APIã‚µãƒ¼ãƒãƒ¼ã‚„ã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãªã©ã‚’å±•é–‹ã™ã‚‹ã®ã«ã€OpenAPI ã®å®šç¾©ã‚’ç½®ããƒªãƒã‚¸ãƒˆãƒªã‚’å€‹ã€…ã«ä½œã£ã¦ã„ãŸã®ã§ã™ãŒã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’è€ƒãˆã¦ãƒãƒ«ãƒãƒ—ãƒ«ãƒ¬ãƒã‹ã‚‰ãƒ¢ãƒãƒ¬ãƒã¸ç§»è¡Œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;åŸºæœ¬çš„ã« OpenAPI ã®å®šç¾©ï¼ˆyamlãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã®å†…å®¹ã¨ã€ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆï¼ˆAWS S3ã®Webãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°å…ˆãƒã‚±ãƒƒãƒˆï¼‰ãŒé•ã†ãã‚‰ã„ã§ã€ãã‚Œä»¥å¤–ã®å†…å®¹ã¯ã¾ã£ãŸãä¸€ç·’ã§ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªãŒè¤‡æ•°ã‚ã‚‹æ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;app-a-apidoc&lt;/li&gt;
&lt;li&gt;app-b-apidoc&lt;/li&gt;
&lt;li&gt;service-account-apidoc&lt;/li&gt;
&lt;li&gt;service-payment-apidoc&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¿ãŸã„ãªãƒãƒ«ãƒãƒ—ãƒ«ãƒ¬ãƒã‚’ &lt;code&gt;apidoc&lt;/code&gt; ãƒ¢ãƒãƒ¬ãƒã¸ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;å„ apidoc ã¯ &lt;a href="https://www.npmjs.com/package/swagger-ui-dist"&gt;swagger-ui-dist&lt;/a&gt; ã« yaml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¥ã‚Œã¦ã€Webãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ S3 ãƒã‚±ãƒƒãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ã¾ã™ã€‚
ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ gulp ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ serverless framework ã« serverless-s3-sync ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ãƒªãƒã‚¸ãƒˆãƒªã®ç§»è¡Œã®æº–å‚™&lt;/h3&gt;

&lt;p&gt;ãƒªãƒã‚¸ãƒˆãƒªã‚’ç§»è¡Œã™ã‚‹ã«ã‚ãŸã‚Š &lt;a href="https://medium.com/@chris_72272/keeping-git-history-when-converting-multiple-repos-into-a-monorepo-97641744d928"&gt;Keeping git history when converting multiple repos into a monorepo&lt;/a&gt; ã¨ã„ã†è¨˜äº‹ãŒã¨ã¦ã‚‚å½¹ã«ãŸã£ãŸã®ã§ã€ã“ã¡ã‚‰ã®æ‰‹é †ã‚’å‚è€ƒã«ã—ã¦ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æ±ºå®š&lt;/h4&gt;

&lt;p&gt;ã¾ãšæœ€åˆã«ãƒ¢ãƒãƒ¬ãƒç§»è¡Œå¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ¤œè¨ã—ã¾ã™ã€‚
ã‚ˆãã‚ã‚‹ npm ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ¢ãƒãƒ¬ãƒã«ã—ã¦ã„ã‚‹å ´åˆã ã¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;packages
  +-- package-a
  +-- package-b
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã¿ãŸã„ãªéšå±¤ã«ã™ã‚‹ã“ã¨ãŒå¤šã„ã‚“ã˜ã‚ƒãªã„ã‹ãªï¼Ÿã¨æ€ã„ã¾ã™ã€‚
å‚è€ƒè¨˜äº‹ã ã¨ &lt;code&gt;projects/*&lt;/code&gt; ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã­ã€‚
aws-sdk v3 ã ã¨ clients ã‚„ lib, packages ãªã©ç›®çš„åˆ¥ã«ã„ã‚ã„ã‚åˆ†ã‘ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ä»Šå›ç§ãŸã¡ã¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;apps
  +-- a
  +-- b
services
  +-- account
  +-- payment
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã¿ãŸã„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œã¯ãã‚Œãã‚Œã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã€ã¾ã¨ã‚ãŸã„ãƒªãƒã‚¸ãƒˆãƒªã«ã‚‚ã‚ˆã‚‹ã®ã§ã€å€‹åˆ¥ã«æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h4&gt;æ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´&lt;/h4&gt;

&lt;p&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãŒæ±ºã¾ã£ãŸã‚‰ã€æ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã‚’ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«åˆã‚ã›ã¦éšå±¤ã‚’å¤‰æ›´ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;cd app-a-apidoc
mkdir -p apps/a
git mv -k * apps/a
git mv -k .* apps/a
git commit -m "chore: move all files into apps/a"
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;æ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•&lt;/li&gt;
&lt;li&gt;ãƒ¢ãƒãƒ¬ãƒã«ã—ãŸã¨ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ„ãƒªãƒ¼ã‚’ä½œæˆ&lt;/li&gt;
&lt;li&gt;2ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸‹ã«ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•ã€‚ç§»å‹•ã«ã¯ &lt;code&gt;git mv&lt;/code&gt; ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†&lt;/li&gt;
&lt;li&gt;ã‚³ãƒŸãƒƒãƒˆ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ã“ã®ä½œæ¥­ã‚’ç§»è¡Œå¯¾è±¡ã®ã™ã¹ã¦ã®æ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã§å®Ÿæ–½ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒ¢ãƒãƒ¬ãƒã®ä½œæˆ&lt;/h4&gt;

&lt;p&gt;GitHubä¸Šã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã£ã¦ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ã‹ã€ &lt;code&gt;git init&lt;/code&gt; ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«ãƒ¢ãƒãƒ¬ãƒã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’æº–å‚™ã—ã¾ã™ã€‚
ç¶šã„ã¦ã€ãƒ¢ãƒãƒ¬ãƒãƒªãƒã‚¸ãƒˆãƒªã«ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;mkdir apps
mkdir services
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;git remote add&lt;/code&gt; ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒªãƒã‚¸ãƒˆãƒªï¼ˆæ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤‰æ›´ã—ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸã‚‚ã®ï¼‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git remote add -f app-a-apidoc ../app-a-apidoc
git remote add -f app-b-apidoc ../app-b-apidoc
git remote add -f service-account-apidoc ../service-account-apidoc
git remote add -f service-payment-apidoc ../service-payment-apidoc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã§ã€ãã‚Œã‚‰ã‚’ãƒ¢ãƒãƒ¬ãƒã®ä¸­ã«ãƒãƒ¼ã‚¸ã—ã¦ã„ãã¾ã™ã€‚ãƒãƒ¼ã‚¸ã™ã‚‹ãƒ–ãƒ©ãƒ³ãƒãŒ &lt;code&gt;main&lt;/code&gt; ã§ã‚ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git merge app-a-apidoc/main --allow-unrelated-histories
git merge app-b-apidoc/main --allow-unrelated-histories
git merge service-account-apidoc/main --allow-unrelated-histories
git merge service-payment-apidoc/main --allow-unrelated-histories
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ€å¾Œã«ãƒªãƒ¢ãƒ¼ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git remote remove app-a-apidoc
git remote remove app-b-apidoc
git remote remove service-account-apidoc
git remote remove service-payment-apidoc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;ãƒ¢ãƒãƒ¬ãƒã®è¨­å®š&lt;/h3&gt;

&lt;p&gt;ã“ã“ã¾ã§ã§æ—¢å­˜ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’1ã¤ã®ãƒ¢ãƒãƒ¬ãƒã«ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ä»˜ãã§åˆä½“ã§ãã¾ã—ãŸã€‚
ç¶šã„ã¦ã€ãƒ¢ãƒãƒ¬ãƒã§é–‹ç™ºä½œæ¥­ãŒã§ãã‚‹ã‚ˆã†ã«ç’°å¢ƒæ•´å‚™ã‚’ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h4&gt;ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¨­å®šã™ã‚‹&lt;/h4&gt;

&lt;p&gt;ãƒ¢ãƒãƒ¬ãƒã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ &lt;code&gt;npm init&lt;/code&gt; ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ &lt;code&gt;package.json&lt;/code&gt; ã‚’ä½œã‚Šã¾ã™ã€‚
ä½œæˆã—ãŸ &lt;code&gt;package.json&lt;/code&gt; ã«ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«é–¢ã™ã‚‹è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;private&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;workspaces&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
    &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;apps/*&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;services/*&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;
  &lt;span class="p"&gt;],&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;ä¾å­˜é–¢ä¿‚ã®è¨­å®š&lt;/h4&gt;

&lt;p&gt;ç¶šã„ã¦ã€å„ãƒªãƒã‚¸ãƒˆãƒªã§ä½¿ã£ã¦ã„ãŸ &lt;code&gt;devDependencies&lt;/code&gt; ã‚„ &lt;code&gt;dependencies&lt;/code&gt; ã®ä¾å­˜é–¢ä¿‚ã‚’ãƒ¢ãƒãƒ¬ãƒã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ &lt;code&gt;package.json&lt;/code&gt; ã«ç§»å‹•ã—ã¾ã™ã€‚
é€šå¸¸ã¯å„ãƒªãƒã‚¸ãƒˆãƒªå…±é€šã®ã‚‚ã®ã ã‘ã§ã™ãŒã€ä»Šå›ã® apidoc ã§ã¯ã™ã¹ã¦å…±é€šã ã£ãŸã®ã§ã€ãã®ã¾ã¾ã‚³ãƒ”ãƒšã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆapps ã‚„ servicesï¼‰ã«ã‚ã‚‹ &lt;code&gt;package.json&lt;/code&gt; ã® &lt;code&gt;devDependencies&lt;/code&gt; ã‚„ &lt;code&gt;dependencies&lt;/code&gt; ã‚’å‰Šé™¤ã—ã€ &lt;code&gt;package-lock.json&lt;/code&gt; ã‚‚å‰Šé™¤ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å¾Œã«ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ &lt;code&gt;npm i&lt;/code&gt; ã‚’å®Ÿè¡Œã—ã¦ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚&lt;/p&gt;

&lt;h4&gt;å„ apidoc ã®æ•´ç†&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;.npmrc&lt;/code&gt; ã‚„ &lt;code&gt;.gitignore&lt;/code&gt; , &lt;code&gt;.editorconfig&lt;/code&gt; ãªã©å¿…è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã®ä»–å…±é€šã«ãªã£ãŸã‚‚ã®ã¯ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸‹ã«ç§»å‹•ã—ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚&lt;/p&gt;

&lt;h4&gt;GitHub Actions ã®çµ±åˆ&lt;/h4&gt;

&lt;p&gt;ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆapps ã‚„ servicesï¼‰ã«ã‚ã‚‹ &lt;code&gt;.github&lt;/code&gt; ã‚’ã©ã‚Œã‹ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã€ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å´ã‹ã‚‰ã¯å‰Šé™¤ã—ã¾ã™ã€‚
å˜ã«å…¨éƒ¨ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸã‚Šãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ãªã‚‰ &lt;code&gt;-ws&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã¨ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;    &lt;span class="na"&gt;steps&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;uses&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;actions/checkout@v3&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm ci&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -ws build&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -ws deploy&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã¾ãã§ã‚‚é€šå¸¸ã¯ãã‚“ãªã“ã¨ãªãã€ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® package.json ã§å®šç¾©ã—ã¦ã„ã‚‹ä¾å­˜é–¢ä¿‚ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã‚ã£ãŸï¼ˆdependabotãªã©ï¼‰&lt;/li&gt;
&lt;li&gt;ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿®æ­£ã•ã‚ŒãŸ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å‰è€…ã¯ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾ã—ã¦ Action ã‚’å®Ÿè¡Œã—ãŸã»ã†ãŒè‰¯ã„ã®ã§ã™ãŒã€å¾Œè€…ã¯å¤‰æ›´ãŒã‚ã£ãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã ã‘ã®å®Ÿè¡Œã«çµã‚Šè¾¼ã¿ãŸã„ã¨ã“ã‚ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§åˆ©ç”¨ã§ãã‚‹ã®ãŒ &lt;a href="https://github.com/AlexShukel/get-changed-workspaces-action"&gt;Get changed workspaces action&lt;/a&gt; ã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;&lt;span class="na"&gt;jobs&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;get-changed-workspaces&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;outputs&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;packages&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;${{ steps.changed-packages.outputs.packages }}&lt;/span&gt;
      &lt;span class="na"&gt;empty&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;${{ steps.changed-packages.outputs.empty }}&lt;/span&gt;
    &lt;span class="na"&gt;steps&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;Check out repository code&lt;/span&gt;
        &lt;span class="na"&gt;uses&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;actions/checkout@v3&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;Find changed workspaces&lt;/span&gt;
        &lt;span class="na"&gt;uses&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;AlexShukel/get-changed-workspaces-action@v2.0.0&lt;/span&gt;
        &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;changed-packages&lt;/span&gt;
  &lt;span class="na"&gt;deploy&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;needs&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="pi"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;get-changed-workspaces&lt;/span&gt;&lt;span class="pi"&gt;]&lt;/span&gt;
    &lt;span class="na"&gt;if&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;${{ !fromJson(needs.get-changed-workspaces.outputs.empty) }}&lt;/span&gt;
    &lt;span class="na"&gt;strategy&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;matrix&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
        &lt;span class="na"&gt;package&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;${{ fromJson(needs.get-changed-workspaces.outputs.packages) }}&lt;/span&gt;  
    &lt;span class="na"&gt;steps&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;uses&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;actions/checkout@v3&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm ci&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -w ${{ matrix.package.name }} build&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -w ${{ matrix.package.name }} deploy&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã® Action ã‚’ä½¿ã†ã¨å¤‰æ›´ãŒã‚ã£ãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®åå‰ã‚’é…åˆ—å‹å¼ã§å–å¾—ã§ãã¾ã™ã€‚
ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›´ãŒãªã„ã¨ãã¯ &lt;code&gt;empty&lt;/code&gt; ã§ã‚ã‹ã‚‹ã®ã§ã€ &lt;code&gt;if&lt;/code&gt; æ–‡ã§åˆ¶å¾¡ã—ã¦ä½•ã‚‚ã—ãªã„ã‚ˆã†ã«è¨­å®šã‚‚å¯èƒ½ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€ç‰¹å®šã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å¯¾ã—ã¦ npm ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã¯ &lt;code&gt;-w ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã“ã§ã€ &lt;code&gt;.github/workflows&lt;/code&gt; ã«ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;build-all.yml&lt;/li&gt;
&lt;li&gt;build.yml&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å‰è€…ã¯ &lt;code&gt;ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® package.json ã§å®šç¾©ã—ã¦ã„ã‚‹ä¾å­˜é–¢ä¿‚ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã‚ã£ãŸï¼ˆdependabotãªã©ï¼‰&lt;/code&gt; ã‚’æƒ³å®šã—ã¦ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ¡ä»¶ã§èµ·å‹•ã—ãŸã‚‰ã€ &lt;code&gt;-ws&lt;/code&gt; ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;&lt;span class="na"&gt;on&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;workflow_dispatch&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;push&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;paths&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;package.json&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;package-lock.json&lt;/span&gt;
    &lt;span class="na"&gt;branches&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;master&lt;/span&gt;
&lt;span class="na"&gt;jobs&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
  &lt;span class="na"&gt;deploy&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
    &lt;span class="na"&gt;steps&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;uses&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;actions/checkout@v3&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm ci&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -ws build&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm run -ws deploy&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¾Œè€…ã¯ &lt;code&gt;Get changed workspaces action&lt;/code&gt; ã‚’ä½¿ã£ã¦å€‹åˆ¥ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;ãƒãƒ«ãƒãƒ—ãƒ«ãƒ¬ãƒã€ãƒ¢ãƒãƒ¬ãƒã€ãã‚Œãã‚Œã«è‰¯ã„ã¨ã“ã‚ã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
å¿…ãšãƒ¢ãƒãƒ¬ãƒãŒè‰¯ã„ã¨ã„ã†ã‚‚ã®ã§ã‚‚ãªã„ã§ã—ã‚‡ã†ã€‚
ãã‚Œãã‚Œã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒªãƒã‚¸ãƒˆãƒªã®é‹ç”¨ã‚’è¦‹æ¥µã‚ã¦é¸æŠã—ã¦ã„ããŸã„ã§ã™ã­ã€‚&lt;/p&gt;

&lt;p&gt;ãƒãƒ«ãƒãƒ—ãƒ«ãƒ¬ãƒã‹ã‚‰ãƒ¢ãƒãƒ¬ãƒã¸ç§»è¡Œã™ã‚‹ã¨ãã«ã€æœ¬è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>tsyringe ã‚’ TypeScript 5 ã§ä½¿ã†æ–¹æ³•</title>
    <link rel="alternate" href="http://blog.url.com/2023/05/02/tsyringe-with-typescript-5.html"/>
    <id>http://blog.url.com/2023/05/02/tsyringe-with-typescript-5.html</id>
    <published>2023-05-02T15:00:00+09:00</published>
    <updated>2023-05-02T15:17:42+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;a href="https://github.com/microsoft/tsyringe"&gt;tsyringe&lt;/a&gt; ã¯ã€Microsoft ã®ã‚ªãƒ¼ã‚¬ãƒŠã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹ã€JavaScript/TypeScriptç”¨ã®DIã‚³ãƒ³ãƒ†ãƒŠã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;Microsoft ã¯ TypeScript ã®è¦ªã ã—ã€DIã‚³ãƒ³ãƒ†ãƒŠã‚ã‚‹ã‚“ã ã£ãŸã‚‰ä½¿ã†ã‚ˆãªãƒ¼ã¨ã„ã†ãã‚‰ã„ã®ç†ç”±ã§ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€ã“ã“æ•°å¹´ã¯ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®ãƒªãƒªãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã®è¨˜äº‹ã‚’æ›¸ã„ã¦ã„ã‚‹æ™‚ç‚¹ã§ã®æœ€æ–°ç‰ˆã¯ã€2020/11/9 ã«å‡ºãŸ &lt;a href="https://github.com/microsoft/tsyringe/releases/tag/v4.4.0"&gt;v4.4.0&lt;/a&gt; ã§ã™ã€‚&lt;/p&gt;

&lt;h3&gt;TypeScript 5 ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹&lt;/h3&gt;

&lt;p&gt;tsyringe ã‚’ TypeScript 5 ã§åˆ©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
ã§ã€ã•ã™ãŒã«åˆ©ç”¨è€…ãŒå¤šã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã‘ã‚ã£ã¦ã€ã™ã issue &lt;a href="https://github.com/microsoft/tsyringe/issues/221"&gt;TypeScript 5.0 Support of tighter parameter decorator checking&lt;/a&gt; ãŒå‡ºã¾ã—ãŸã€‚
ã—ã°ã‚‰ãã—ãŸã‚‰ PR &lt;a href="https://github.com/microsoft/tsyringe/pull/226"&gt;fix: allow propertyKey to be undefined&lt;/a&gt; ã‚‚å‡ºã¾ã—ãŸã€‚PRãŒ 2023/3/26 ã«å‡ºã¦ã€ãƒãƒ¼ã‚¸ã•ã‚ŒãŸã®ã¯ 2023/4/17 ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ãã‚Œã‹ã‚‰2é€±é–“ãã‚‰ã„çµŒéã—ã¾ã—ãŸãŒã€ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹æ°—é…ã¯ã‚ã‚Šã¾ã›ã‚“&amp;hellip;.&lt;/p&gt;

&lt;h3&gt;ã§ã‚‚ TypeScript 5 ã‚’ä½¿ã„ãŸã„ã‚“ã‚„&lt;/h3&gt;

&lt;p&gt;ã¾ããã†æ€ã„ã¾ã™ã‚ˆã­ã€‚
åƒ•ã‚‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚ãã†æ€ã£ãŸã‚“ã§ã€ãƒ‘ãƒƒãƒã‚’ä½œã‚Šã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ(package.json ã¨ã‹ç½®ã„ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)ã« &lt;code&gt;tsyringe.d.ts&lt;/code&gt; ã‚’ç½®ã„ã¦ã€å‹å®šç¾©ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹æ„Ÿã˜ã§ã™ã€‚
ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;tsyringe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;tsyringe/dist/typings/index&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="nx"&gt;declare&lt;/span&gt; &lt;span class="nx"&gt;namespace&lt;/span&gt; &lt;span class="nx"&gt;t&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;inject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="nx"&gt;token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;tsyringe&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;InjectionToken&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;propertyKey&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;string&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;symbol&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="kc"&gt;undefined&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;parameterIndex&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;number&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;any&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;injectable&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;typeof&lt;/span&gt; &lt;span class="nx"&gt;tsyringe&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;injectable&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;container&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;typeof&lt;/span&gt; &lt;span class="nx"&gt;tsyringe&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;container&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="nx"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;DependencyContainer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;typeof&lt;/span&gt; &lt;span class="nx"&gt;tsyringe&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;container&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã¾ãšã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã¯ &lt;code&gt;inject&lt;/code&gt; é–¢æ•°ãªã®ã§ã€ãã‚Œã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã™ã€‚
æ¬¡ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ import ã—ã¦ã„ã‚‹é–¢æ•°ã‚„å‹ãŒã‚ã‚Œã°ã€ãã‚Œãã‚Œ &lt;code&gt;const&lt;/code&gt; ã‚„ &lt;code&gt;type&lt;/code&gt; ã§å®£è¨€ã—ã¦ require ã—ãŸå†…å®¹ã‹ã‚‰ãã®ã¾ã¾ export ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ PR ãŒå‹å®šç¾©ãã‚‰ã„ã—ã‹ä¿®æ­£ã—ã¦ãŠã‚‰ãšã€å®Ÿè£…ã«é–¢ã—ã¦ã¯ä½•ã‚‚ä¿®æ­£ã•ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€å•é¡Œãªã—ã¨åˆ¤æ–­ã—ã¦å‹å®šç¾©ã ã‘ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ãŸãƒ‘ãƒƒãƒã‚’ä½œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;h3&gt;ã§ã€ã©ã†ãªã®ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;ç¾æ™‚ç‚¹å‹•ä½œã«å•é¡Œã¯ãªãã€æ™®é€šã« TypeScript 5 ã§ tsyringe ãŒä½¿ãˆã¦ã„ã¾ã™ã€‚
PRãŒãƒãƒ¼ã‚¸ã•ã‚Œã¦ã€ã™ããƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ï¼Ÿã¨æ€ã£ãŸã®ã§ã€ã“ã®å†…å®¹ã‚’è¨˜äº‹ã«ã™ã‚‹å¿…è¦ã‚‚ãªã„ã‹ãªï¼Ÿã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€
ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹æ°—é…ã‚’æ„Ÿã˜ãªã„ã®ã§ã€åƒ•ã‚‰ã®ã‚„ã£ã¦ã„ã‚‹æ–¹æ³•ãŒå°‘ã—ã§ã‚‚å½¹ã«ç«‹ã¦ã°ã¨æ€ã„ã€è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚
ã¯ã‚„ã TypeScript 5 å¯¾å¿œãŒæ­£å¼ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦æ¬²ã—ã„ã§ã™ã­ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>LocalStack ã‚’ä½¿ã£ã¦ aws-sdk ã® Integration Test ã‚’å®Ÿè¡Œã™ã‚‹</title>
    <link rel="alternate" href="http://blog.url.com/2023/04/19/integration-test-using-localstack.html"/>
    <id>http://blog.url.com/2023/04/19/integration-test-using-localstack.html</id>
    <published>2023-04-19T16:12:00+09:00</published>
    <updated>2023-04-19T16:38:55+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;&lt;a href="/2023/01/04/migrate-aws-sdk-node-js-v2-to-v3.html"&gt;AWS Lambda ã® Node.js 14 ã‚’ 18 ã«ç§»è¡Œã™ã‚‹ï¼ˆaws-sdk v3 ç§»è¡Œç·¨ï¼‰&lt;/a&gt; ã®ä¸­ã§ã‚‚æ›¸ã„ãŸã‚ˆã†ã«ã€aws-sdk v3 ã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’ UnitTest ã™ã‚‹ã«ã¯ &lt;a href="https://github.com/m-radzikowski/aws-sdk-client-mock"&gt;AWS SDK v3 Client mock&lt;/a&gt; ã‚’åˆ©ç”¨ã—ã¦ãƒ¢ãƒƒã‚¯ã—ãŸæ–¹ãŒç°¡å˜ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ–¹ã§å°‘ã— IntegrationTest ã‚’ã—ãŸã„ã¨æ€ã†ã“ã¨ã‚‚ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚ãã†ã—ãŸã¨ãã¯ LocalStack ã®åˆ©ç”¨ãŒä¾¿åˆ©ã§ã™ã€‚
æ‰‹å…ƒã‚‚ç’°å¢ƒãªã‚‰ Docker ã® Extension ã§å‹•ãã¾ã™ã€‚
CI ç’°å¢ƒã€ãŸã¨ãˆã° GitHub Actions ãªã‚‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã™ã‚Œã°å¤§ä¸ˆå¤«ã§ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã§ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ&lt;/h3&gt;

&lt;p&gt;ã“ã‚“ãªæ„Ÿã˜ã§ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§ endpoint ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¨ãƒ­ãƒ¼ã‚«ãƒ«ã¨CIç’°å¢ƒã®ã©ã¡ã‚‰ã§ã‚‚ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="na"&gt;credentials&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="na"&gt;accessKeyId&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;dummy&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="na"&gt;secretAccessKey&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;summy&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="na"&gt;endpoint&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;`http://&lt;/span&gt;&lt;span class="p"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;process&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;env&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;TEST_AWS_HOSTNAME&lt;/span&gt; &lt;span class="o"&gt;??&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;localhost&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;:4566`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;region&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="s1"&gt;ap-northeast-1&lt;/span&gt;&lt;span class="dl"&gt;'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;stepFunctions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;SFNClient&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;options&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰‹å…ƒã§ã¯ localhost ã§è‰¯ã„ã—ã€CIç’°å¢ƒï¼ˆãŸã¨ãˆã° GitHub Actions ï¼‰ ãªã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ãŠãã¨è‰¯ã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;    &lt;span class="na"&gt;container&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;node:18&lt;/span&gt;
    &lt;span class="na"&gt;services&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;localstack&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
        &lt;span class="na"&gt;image&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;localstack/localstack&lt;/span&gt;
    &lt;span class="na"&gt;env&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;TEST_AWS_HOSTNAME&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;localstack&lt;/span&gt;
    &lt;span class="na"&gt;steps&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;npm t&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;LocalStack v2.0 ä»¥é™ã§ã®å¤‰æ›´ç‚¹&lt;/h3&gt;

&lt;p&gt;æœ€è¿‘ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ 2.0 ã«ãªã£ãŸ LocalStack ã§ã™ãŒ Lambda é–¢é€£ã§å¤§ããªå¤‰æ›´ãŒã‚ã‚Šã¾ã—ãŸã€‚
åŸºæœ¬çš„ã« Lambda ã‚’åˆ©ç”¨ã—ãªã‘ã‚Œã°å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ç‰¹ã«å•é¡Œãªã‘ã‚Œã° localstack ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight yaml"&gt;&lt;code&gt;    &lt;span class="na"&gt;container&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;node:18&lt;/span&gt;
    &lt;span class="na"&gt;services&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
      &lt;span class="na"&gt;localstack&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
        &lt;span class="na"&gt;image&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="s"&gt;localstack/localstack&lt;/span&gt;
        &lt;span class="na"&gt;env&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
          &lt;span class="na"&gt;LAMBDA_SYNCHRONOUS_CREATE&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
        &lt;span class="na"&gt;volumes&lt;/span&gt;&lt;span class="pi"&gt;:&lt;/span&gt;
          &lt;span class="pi"&gt;-&lt;/span&gt; &lt;span class="s"&gt;/var/run/docker.sock:/var/run/docker.sock&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Actions ã®ãƒ›ã‚¹ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã® docker.sock ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã“ã¨ã§ LocalStack ã®ä¸­ã§ Lambda ãŒèµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;è©³ã—ãã¯&lt;a href="https://github.com/localstack/localstack/releases/tag/v2.0.0"&gt;å…¬å¼ã® v2.0.0 ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ&lt;/a&gt; ã® &lt;code&gt;Lambda&lt;/code&gt; éƒ¨åˆ†ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã®ã§ã€èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;å˜ä½“ãƒ†ã‚¹ãƒˆã§ LocalStack ä½¿ã†ã®ã¯ã‚„ã‚Šã™ãã ã¨æ€ã„ã¾ã™ãŒã€éƒ¨åˆ†çš„ã«ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã—ãŸã„ã€ã¨ã„ã£ãŸå ´åˆã«ã¯æœ‰ç”¨ãªæ–¹æ³•ã‹ãªã€ã¨æ€ã„ã¾ã™ã®ã§ã€ç”¨é€”ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã¨è‰¯ã„ã§ã™ã­ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>AWS SDK v3 ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨åˆ©ç”¨æ–¹æ³•</title>
    <link rel="alternate" href="http://blog.url.com/2023/04/18/generation-code-aws-sdk-v3.html"/>
    <id>http://blog.url.com/2023/04/18/generation-code-aws-sdk-v3.html</id>
    <published>2023-04-18T12:21:00+09:00</published>
    <updated>2023-04-18T15:01:28+09:00</updated>
    <author>
      <name>Article Author</name>
    </author>
    <content type="html">&lt;p&gt;ã“ã®ã¨ã“ã‚ä½•åº¦ã‹ aws-sdk v3 ã«ã¤ã„ã¦è¨˜äº‹ã‚’æ›¸ã„ã¦ãã¾ã—ãŸãŒã€ã“ã¡ã‚‰ã¯ç¾æ™‚ç‚¹ã§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã„ã†ã‹ã€è¿½è¨˜ã‚’å«ã‚€ã¾ã¨ã‚è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å«ã¾ã‚Œãªã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;aws-sdk ã‚’ä½¿ã£ã¦ Lambda ã‹ã‚‰ Lambda ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã®ã‚³ãƒ¼ãƒ‰ã¯ã€å…¬å¼ã®Exampleã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javascriptv3/example_code/lambda/actions/invoke.js"&gt;https://github.com/awsdocs/aws-doc-sdk-examples/blob/main/javascriptv3/example_code/lambda/actions/invoke.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/**
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;InvokeCommand&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;LambdaClient&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;LogType&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;@aws-sdk/client-lambda&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;createClientForDefaultRegion&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;../../libs/utils/util-aws-sdk.js&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** snippet-start:[javascript.v3.lambda.actions.Invoke] */&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;invoke&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;async&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;funcName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;createClientForDefaultRegion&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;LambdaClient&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;command&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;InvokeCommand&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="na"&gt;FunctionName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;funcName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="na"&gt;Payload&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;stringify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="na"&gt;LogType&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;LogType&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Tail&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;

  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;Payload&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;LogResult&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;client&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;command&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Buffer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;Payload&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;logs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Buffer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;LogResult&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;base64&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;logs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="cm"&gt;/** snippet-end:[javascript.v3.lambda.actions.Invoke] */&lt;/span&gt;

&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;invoke&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã“ã§æ³¨ç›®ã—ã¦æ¬²ã—ã„ã®ã¯&lt;/p&gt;

&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight plaintext"&gt;&lt;code&gt;Payload: JSON.stringify(payload),
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;ã®éƒ¨åˆ†ãªã®ã§ã™ãŒã€ã“ã‚Œã¯ TypeScript ã§è¨˜è¿°ã™ã‚‹ã¨å‹é•åã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;    &lt;span class="cm"&gt;/**
     * &amp;lt;p&amp;gt;The JSON that you want to provide to your Lambda function as input.&amp;lt;/p&amp;gt;
     *          &amp;lt;p&amp;gt;You can enter the JSON directly. For example, &amp;lt;code&amp;gt;--payload '\{ "key": "value" \}'&amp;lt;/code&amp;gt;. You can also
     *       specify a file path. For example, &amp;lt;code&amp;gt;--payload file://payload.json&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;
     */&lt;/span&gt;
    &lt;span class="nx"&gt;Payload&lt;/span&gt;&lt;span class="p"&gt;?:&lt;/span&gt; &lt;span class="nb"&gt;Uint8Array&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…¬å¼ Example ã®ã‚³ãƒ¼ãƒ‰ã®æ„å‘³ã¨ã¯&amp;hellip; ã¨ã„ã†ã¨ã“ã‚ã§ã™ãŒã€&lt;/p&gt;

&lt;p&gt;ã§ã€ãã†ã„ã† issue ã‚„ã‚‰ SlackOverflow ãŒã‚ã£ã¦&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/aws/aws-sdk-js-v3/issues/4623"&gt;https://github.com/aws/aws-sdk-js-v3/issues/4623&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;InvocationType&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;InvokeCommand&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;LambdaClient&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;@aws-sdk/client-lambda&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;toUint8Array&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="s2"&gt;@aws-sdk/util-utf8&lt;/span&gt;&lt;span class="dl"&gt;"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;lambda&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;LambdaClient&lt;/span&gt;&lt;span class="p"&gt;({});&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;lambda&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;InvokeCommand&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
      &lt;span class="na"&gt;FunctionName&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;env&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;LAMBDA_ARN&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;string&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="na"&gt;InvocationType&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;InvocationType&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;RequestResponse&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="na"&gt;Payload&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;toUint8Array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="p"&gt;}),&lt;/span&gt;
  &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã“ã‚“ãªæ„Ÿã˜ã§ &lt;code&gt;Uint8Array&lt;/code&gt; ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã“ã§ &lt;code&gt;@aws-sdk/util-utf8&lt;/code&gt; ã‚’ä½¿ã£ãŸã®ã§ã™ãŒã€ã“ã‚ŒãŒ Node.js v18 ã® Lambda ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã¨è¦‹ã¤ã‹ã‚‰ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;åŸ·ç­†æ™‚ç‚¹ã§ã® Lambda ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® sdk ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ 3.188.0&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ç¾åœ¨ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å…¥ã£ã¦ã„ã‚‹ sdk ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/lambda-runtimes.html"&gt;https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/lambda-runtimes.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åŸ·ç­†æ™‚ç‚¹ã§ã¯ 3.188.0 ãªã®ã§ã€ GitHub ãƒªãƒã‚¸ãƒˆãƒªã§ãã®ã‚¿ã‚°ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ç¢ºã‹ã«ãã‚“ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãã‚Œã©ã“ã‚ã‹ã€ &lt;code&gt;@aws-sdk/util-utf8-node&lt;/code&gt; ã¨ &lt;code&gt;@aws-sdk/util-utf8-browser&lt;/code&gt; ã¨ã„ã†2ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã—ãŸã€‚
ã©ã†ã‚‚ã€3.300.0 ã‚ãŸã‚Šã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’çµ±åˆã—ãŸã‚ˆã†ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;NPMã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’ã¿ã‚‹ã¨ã€&lt;/p&gt;

&lt;p&gt;&lt;a href="https://www.npmjs.com/package/@aws-sdk/util-utf8-node"&gt;https://www.npmjs.com/package/@aws-sdk/util-utf8-node&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Deprecated package&lt;/p&gt;

&lt;p&gt;This internal package is deprecated in favor of @aws-sdk/util-utf8.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã®ã‚ˆã†ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã¡ãªã¿ã«ã€æœ€æ–°ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã¯ã€ &lt;code&gt;util-utf8-node&lt;/code&gt; ãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;çŠ¶æ³ã‚’æ•´ç†ã—ã€ã“ã‚Œã‹ã‚‰ç™ºç”Ÿã™ã‚‹ã“ã¨ã‚’æ•´ç†&lt;/h3&gt;

&lt;p&gt;ã¤ã¾ã‚Šã€ 3.188.0 ã§ &lt;code&gt;@aws-sdk/util-utf8-node&lt;/code&gt; ã‚’ä½¿ã£ã¦ã„ã¦ã€Lambda ã® zip ã« sdk ã‚’å«ã‚ã¦ã„ãªã„äººã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§çªç„¶ Lambda ãŒå‹•ã‹ãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¨ã—ã¦ã¯ç ´å£Šçš„å¤‰æ›´ãªã®ã§ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ç›¸å½“ã§ã™ãŒã€ãã‚‚ãã‚‚ aws-sdk ãŒã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ï¼ˆãŸã¶ã‚“ã•ã‚Œã¦ã„ãªã„ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åƒ•ã¯é•·ã„é–“ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€Œ.zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ Node.js Lambda é–¢æ•°ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€ã«æ›¸ã„ã¦ã‚ã‚‹&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;é–¢æ•°ãŒæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ãŸã¯ AWS SDK ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã®ã¿ä¾å­˜ã™ã‚‹å ´åˆã¯ã€ã“ã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ .zip ãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/nodejs-package.html"&gt;https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/nodejs-package.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ãƒãƒªã‚·ãƒ¼ã‚’ä¿¡ã˜ã¦ã„ã¾ã—ãŸã€‚
è‘—åãª Serverless Framework ã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã§ã¯ zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã¨ãã« aws-sdk ã‚’é™¤å¤–ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;é“ã‚’é–“é•ãˆã‚‹å‰ã« AWS ã•ã‚“ã«ç¢ºèªã—ã¦ã¿ãŸ&lt;/h3&gt;

&lt;p&gt;åƒ•ã®æ‡¸å¿µã¯&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;aws-sdk ã¯ zip ã«å«ã‚ã‚‹ã¹ãã‹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¾Œæ–¹äº’æ›æ€§ãŒãªããªã‚‹å¤‰æ›´ãŒã‚ã‚‹ã‘ã©ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®æ–¹é‡ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã‹ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã¨ã„ã†ã‚ãŸã‚Šã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;aws-sdk ã¯ zip ã«å«ã‚ã‚‹ã¹ãã‹ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;ã“ã¡ã‚‰ã¯ã€Œã¯ã„ã€ãŒæ­£è§£ã¨ã„ã†ã“ã¨ã§ã™ã€‚
&lt;a href="https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/best-practices.html"&gt;AWS Lambda é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹&lt;/a&gt; ã« &lt;code&gt;é–¢æ•°ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§ä¾å­˜é–¢ä¿‚ã‚’åˆ¶å¾¡ã—ã¾ã™&lt;/code&gt; ã¨ã„ã†éƒ¨åˆ†ãŒã‚ã‚Šã€zip ã«å«ã‚ãŸæ–¹ãŒè‰¯ã„ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã—ã‹ã— aws-sdk ã®ã‚µã‚¤ã‚ºã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚Œã¦ã„ã‚‹ã¨ã¯ã„ãˆã€Lambdaã®ä¸Šé™ã‚µã‚¤ã‚ºã‚’è€ƒãˆã‚‹ã¨ã‹ãªã‚Šã®å‰²åˆã‚’å ã‚ã¦ã—ã¾ã†ã®ã§ã€ã§ãã‚Œã°ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’ä½¿ã„ãŸã„ã¨ã“ã¨ã§ã™ã€‚&lt;/p&gt;

&lt;h4&gt;å¾Œæ–¹äº’æ›æ€§ãŒãªããªã‚‹å¤‰æ›´ãŒã‚ã‚‹ã‘ã©ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®æ–¹é‡ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã‹ï¼Ÿ&lt;/h4&gt;

&lt;p&gt;ã“ã¡ã‚‰ã®å›ç­”ã‚’ãµã‚Šã‹ãˆã‚‹å‰ã«ã€aws-sdk v3 ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ ã«ã¤ã„ã¦è£œè¶³ã—ã¦ãŠãã¾ã™ã€‚
GitHub ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ README &lt;a href="https://github.com/aws/aws-sdk-js-v3#generated-code"&gt;Generated Code&lt;/a&gt;] ã«ã‚ˆã‚‹ã¨ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚ã–ã£ãã‚Šè¦ç´„ã—ã¾ã—ãŸã€‚&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;v3 ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã¯ã€AWSã‚µãƒ¼ãƒ“ã‚¹ãŒå…¬é–‹ã—ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚
smithy-typescript ã§ &lt;code&gt;/clients&lt;/code&gt; ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ @aws-sdk/client-XXXX ã®ã‚ˆã†ãªåå‰ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã€ &lt;code&gt;/packages&lt;/code&gt; ã«ã‚ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã«ä¾å­˜ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ã‚³ãƒ¼ãƒ‰ã¯æ‰‹å‹•ã§è¨˜è¿°ã•ã‚Œã¦ã„ã¦ã€é€šå¸¸ã‚ã¾ã‚Šå½¹ã«ç«‹ã¡ã¾ã›ã‚“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;/lib&lt;/code&gt; ã«ã¯é«˜ãƒ¬ãƒ™ãƒ«ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ã€‚ client ã‚’ãƒ©ãƒƒãƒ—ã—ã¦æ“ä½œã—ã‚„ã™ãã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ã‚ˆãã‚ã‚‹ä¾‹ã¯ &lt;code&gt;@aws-sdk/lib-dynamodb&lt;/code&gt; ã§ Amazon DynamoDB ã®ã‚¢ã‚¤ãƒ†ãƒ ã®æ“ä½œã‚’ç°¡ç´ åŒ–ã™ã‚‹ã‚‚ã®ã‚„ã€ &lt;code&gt;@aws-sdk/lib-storage&lt;/code&gt; ã§ S3 ã® multipartUpload ã§ã®ä¸¦åˆ—ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã‚‚ã®ã§ã™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç¶šã‘ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚‚æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;/packages æ‰‹å‹•ã§ã‚³ãƒ¼ãƒ‰æ›´æ–°ãŒè¡Œã‚ã‚Œã‚‹å ´æ‰€ã§ã€ NPM ã« @aws-sdk/XXXX ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹åˆ¥ãªãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/li&gt;
&lt;li&gt;/clients  ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚³ãƒ¼ãƒ‰ã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã€ /packages ã«ä¾å­˜ã—ã¾ã™ã€‚AWS ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ 1 å¯¾ 1 ã§ã™ã€‚é€šå¸¸ã€æ‰‹å‹•ç·¨é›†ã¯ã“ã“ã§ã¯è¡Œã‚ãªã„ã§ãã ã•ã„ã€‚@aws-sdk/client-XXXX ã§ NPM ã«å…¬é–‹ã•ã‚Œã¾ã™ã€‚&lt;/li&gt;
&lt;li&gt;/lib ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€ /clients ã«ä¾å­˜ã—ã¾ã™ã€‚æ—¢å­˜ã® AWS ã‚µãƒ¼ãƒ“ã‚¹ã¨æ“ä½œã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã€Javascript ã§ã®ä½œæ¥­ã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚@aws-sdk/lib-XXXX ã§ NPM ã«å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸Šè¨˜ä»¥å¤–ã«ã‚‚ private ã¨ã„ã†ã®ã‚‚ã‚ã£ãŸã‚Šã—ã¾ã™ãŒã€ã“ã‚Œã¯åå‰ã‹ã‚‰ã‚‚æ˜ã‚‰ã‹ã«éå…¬é–‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã ã¨ã‚ã‹ã‚Šã¾ã™ã€‚
NPM å…¬é–‹ã•ã‚Œã¦ã„ã¦ã€åƒ•ã‚‰ãŒåˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ãŒ client / packages / lib ã«ã‚ã‚‹ã¨ã„ã£ãŸæ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šè¨˜3ã¤ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¤ã„ã¦ã® AWS ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãƒãƒªã‚·ãƒ¼ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã«ãªã‚‹ãã†ã§ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;client ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ã™ã‚‹æƒ³å®šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚Šã€ç ´å£Šçš„å¤‰æ›´ã¯è¡Œã‚ã‚Œãªã„&lt;/li&gt;
&lt;li&gt;lib ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ã™ã‚‹æƒ³å®šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚Šã€ç ´å£Šçš„å¤‰æ›´ã¯è¡Œã‚ã‚Œãªã„&lt;/li&gt;
&lt;li&gt;package client ã‹ã‚‰ã®åˆ©ç”¨ã‚’æƒ³å®šã—ã¦ã„ã‚‹å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã®ã§ç ´å£Šçš„å¤‰æ›´ã®å¯èƒ½æ€§ãŒã‚ã‚‹ï¼ˆãŸã ã—ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ˜ç¤ºã•ã‚Œã¦ã„ãªã„ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;package ã«å…¥ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã€README ã«åˆ©ç”¨æ–¹æ³•ãŒè§£èª¬ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã€ãŸã¨ãˆã° S3 ã®ç½²åä»˜ãURLã‚’ç™ºè¡Œã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª &lt;a href="https://github.com/aws/aws-sdk-js-v3/tree/main/packages/s3-request-presigner"&gt;@aws-sdk/s3-request-presigner&lt;/a&gt; ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®åˆ©ç”¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã¦ã€ç ´å£Šçš„å¤‰æ›´ã¯è¡Œã‚ã‚Œãªã„ã‚ˆã†ã§ã™ã€‚
ã—ã‹ã—ã€README ã«APIã®è§£èª¬ãŒãªã„ã‚‚ã®ã«ã¤ã„ã¦ã¯å†…éƒ¨åˆ©ç”¨ã‚’æƒ³å®šã—ã¦ã„ã‚‹ãŸã‚ã€ç ´å£Šçš„å¤‰æ›´ã‚‚ã‚ã‚Šãˆã‚‹ã¨ã€‚&lt;/p&gt;

&lt;p&gt;å¾Œè€…ã¯ private ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã‚ŒãŸæ–¹ãŒè‰¯ã„ã®ã§ã¯ï¼Ÿã¨æ€ã‚ãªãã¯ãªã„ã§ã™ãŒã€ä½•ã‹ç†ç”±ãŒã‚ã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ã­ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã®ã‚ˆã†ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¿°ãŒãªã„ &lt;code&gt;@aws-sdk/util-utf8-node&lt;/code&gt; ã‚’ä½¿ã„ãŸã„å ´åˆã¯ zip ã«å¿…ãšå«ã‚€ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
ãã‚Œä»¥å¤–ã¯ zip ã®å®¹é‡ãŒå³ã—ã‘ã‚Œã° v2 ã®ã¨ãã¨åŒã˜ã‚ˆã†ã«ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ä¾å­˜ã™ã‚‹æ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚aws-sdk ã®æ›´æ–°é »åº¦ãŒã‹ãªã‚Šå¤šã„ã®ã§ã€ã©ã‚ŒãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒã‹ã‚ã‹ã‚‰ãªã„ã—ã€ã§ãã‚Œã°ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ã®æ›´æ–°ã«æœŸå¾…ã—ãŸã„ã¨ã„ã†æ€ã„ã‚‚ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;

&lt;h3&gt;ã•ã„ã”ã«&lt;/h3&gt;

&lt;p&gt;ã“ã‚Œã¾ã§ã® aws-sdk v3 / Node.js v18 ã¸ã®ç§»è¡Œè¨˜äº‹ã‚’ä¸€è¦§ã«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="/2022/12/30/migrate-aws-lambda-node-js-14-to-18.html"&gt;AWS Lambda ã® Node.js 14 ã‚’ 18 ã«ç§»è¡Œã™ã‚‹ï¼ˆCI/CDç’°å¢ƒç§»è¡Œç·¨ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/2023/01/04/migrate-aws-sdk-node-js-v2-to-v3.html"&gt;AWS Lambda ã® Node.js 14 ã‚’ 18 ã«ç§»è¡Œã™ã‚‹ï¼ˆaws-sdk v3 ç§»è¡Œç·¨ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/2023/04/03/aws-sdk-v3-ts2345.html"&gt;aws-sdk v3 ã§ TS2345 ãŒå‡ºã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/2023/04/04/aws-sdk-v3-compile-error-2.html"&gt;aws-sdk v3 ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ - ãã®ï¼’&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/2023/04/05/aws-sdk-v3-changed-enum-to-const.html"&gt;Node.js v18 / aws-sdk v3 ã® Lambda ã‚¢ãƒ—ãƒªãŒçªç„¶å‹•ã‹ãªããªã‚‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="/2023/04/11/aws-sdk-v3-to-peer-for-your-library.html"&gt;aws-sdk v3 ã‚’ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸã¨ãã¯ã€ãªã‚‹ã¹ã peerDependencies ã«è¨­å®šã—ã‚ˆã†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æœ¬è¨˜äº‹&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;ç§ã®æ€ã†ç¾æ™‚ç‚¹ã§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;CIã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯å…¬å¼ã® Lambda Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä¾¿åˆ©&lt;/li&gt;
&lt;li&gt;aws-sdk v3 ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã«ã¯ aws-sdk-client-mock ãŒè‰¯ã„&lt;/li&gt;
&lt;li&gt;aws-sdk ã®å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æƒãˆã¦ã€ãªã‚‹ã¹ãæœ€æ–°ã‚’ä½¿ãŠã†&lt;/li&gt;
&lt;li&gt;aws-sdk é–¢æ•°/ã‚¯ãƒ©ã‚¹ä»¥å¤–ã€ãŸã¨ãˆã° enum ã®å€¤ãªã©ã¯åŸºæœ¬çš„ã«åˆ©ç”¨ã—ãªã„&lt;/li&gt;
&lt;li&gt;peerDependencies ã«æ›¸ã„ã¦ã‚ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æƒãˆã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†&lt;/li&gt;
&lt;li&gt;packages ã«ã‚ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã—ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã†å ´åˆã¯ã€zip ã«å«ã‚ã‚‹

&lt;ul&gt;
&lt;li&gt;zip ã®å®¹é‡ã«ä½™è£•ãŒã‚ã‚Œã° aws-sdk ã¯ã™ã¹ã¦å«ã‚ãŸæ–¹ãŒè‰¯ã„&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¾æ™‚ç‚¹ã¯ã‹ãªã‚Šã‚¯ã‚»ãŒã‚ã‚‹ã¨ã„ã†ã‹ã€ãƒã‚¦ãƒã‚¦ãŒå¿…è¦ã§ã‚ã‚‹ã¨ã„ã†ã®ãŒç¾å®Ÿã ã¨æ€ã„ã¾ã™ã€‚
ã¨ãã« AWS Lambda + aws-sdk v3 + TypeScript ã®å ´åˆã«ã¯ã§ã™ã­ã€‚&lt;/p&gt;

&lt;p&gt;ã¶ã£ã¡ã‚ƒã‘ TypeScript ã§ãªã‘ã‚Œã°ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚„å‹é•åã«ã¤ã„ã¦ã®å•é¡Œã‚‚ãªã„ã—ã€ã—ã„ã¦ã„ãˆã° zip ã«å«ã‚ã‚‹ã‹ã©ã†ã‹ï¼Ÿãã‚‰ã„ã§ã™ã€‚
ã¨ã¯ã„ãˆã€ã¿ã‚“ãªã‚‚ã† Node.js ãƒ©ãƒ³ã‚¿ã‚¤ãƒ é¸ã¶ãªã‚‰ TypeScript ä½¿ã†ã ã‚ã†ã¨æ€ã†ã®ã§ã€ã“ã‚Œã¾ã§ã®è¨˜äº‹ã®ãƒã‚¦ãƒã‚¦ãŒå½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™ã€‚&lt;/p&gt;
</content>
  </entry>
</feed>
